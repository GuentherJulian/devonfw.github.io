<!DOCTYPE html><html lang="en"><head><style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style><style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="Updated at 2020-08-04 15:38:08 UTC">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>devonfw guide</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.6/lunr.min.js" integrity="sha256-M/Awbb/BYh+Rh0aGjpQid26p1b2OBsrk2k9yAvQxPV0=" crossorigin="anonymous"></script>
<!-- JQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.4/styles/googlecode.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.4/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.4/lang/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>

<!-- ************** Google analytics ************ -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>

<!-- ******************************************** -->

</head>
<body id="master.asciidoc" class="book toc2 toc-left">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt>
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="/website/pages/welcome/welcome.html"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="/website/pages/resources/resources.html">RESOURCES</a></p>
</li>
<li>
<p><a href="/website/pages/explore/explore.html">EXPLORE</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">DOCS</a></p>
</li>
<li>
<p><a href="/website/pages/community/community.html">COMMUNITY</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input id="search-field" type="search" class="form-control mr-sm-2" placeholder="Search by keyword(s)..." aria-label="Search" style="height: auto;">
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width="auto" height="auto" alt>
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="header">
<h1>devonfw guide</h1>
<div class="details">
<span id="author" class="author">Updated at 2020-08-04 15:38:34 UTC</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="master.html">devonfw guide</a></span></p><ul class="sectlevel0">
<li><a href="getting-started.asciidoc.html">I. Getting Started</a>
</li>
<li><a href="devonfw-ide.asciidoc.html">II. devonfw-ide</a>
</li>
<li><a href="devon4j.asciidoc.html">III. devonfw for Java (devon4j)</a>
</li>
<li><a href="master-devon4ng.asciidoc.html">IV. devon4ng</a>
</li>
<li><a href="master-devon4net.asciidoc.html">V. devon4net</a>
</li>
<li><a href="master-devon4node.asciidoc.html">VI. devon4node</a>
</li>
<li><a href="master-database.asciidoc.html">VII. Choosing your Database</a>
</li>
<li><a href="master-devonfw-shop-floor.asciidoc.html">VIII. devonfw shop floor</a>
</li>
<li><a href="master-cicdgen.asciidoc.html">IX. cicdgen</a>
</li>
<li><a href="master-production-line.asciidoc.html">X. Production Line Templates</a>
</li>
<li><a href="master-cobigen.asciidoc.html">XI. CobiGen&#x2009;&#x2014;&#x2009;Code-based incremental Generator</a>
</li>
<li><a href="master-mrchecker.asciidoc.html">XII. MrChecker - devon testing tool</a>
<ul class="sectlevel1">
<li><a href="master-mrchecker.asciidoc_who-is-mrchecker.html">74. Who Is MrChecker</a>
</li>
<li><a href="master-mrchecker.asciidoc_test-framework-modules.html"><span class="toc-current">75. Test Framework Modules</span></a>
<ul class="sectlevel2">
<li><a href="master-mrchecker.asciidoc_test-framework-modules.html#master-mrchecker.asciidoc_core-test-module">75.1. Core Test Module</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div><div id="content">
<div class="sect1">
<h2 id="master-mrchecker.asciidoc_test-framework-modules">75. Test Framework Modules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, it is possible to find all information regarding the main modules of MrChecker:</p>
</div>
<div class="sect2">
<h3 id="master-mrchecker.asciidoc_core-test-module">75.1. Core Test Module</h3>
<!-- toc disabled -->
<div class="sect3">
<h4 id="Core-Test-Module.asciidoc">75.1.1. Core Test Module</h4>
<div class="sect4">
<h5 id="core-test-module.asciidoc_what-is-core-test-module">What is Core Test Module</h5>
<div class="imageblock">
<div class="content">
<img src="images/image1.png" alt="image1">
</div>
</div>
</div>
<div class="sect4">
<h5 id="core-test-module.asciidoc_core-test-module-functions">Core Test Module Functions</h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Core-Test-Module-Test-reports-with-logs-and-or-screenshots.asciidoc">Test reports with logs and/or screenshots</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Core-Test-Module-test-groups-tags.asciidoc">Test groups/tags</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Core-Test-Module-Data-driven-approach.asciidoc">Data driven approach</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Core-Test-Module-Test-case-parallel-execution.asciidoc">Test case parallel execution</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Core-Test-Module-BDD-Gherkin-Cucumber-approach.asciidoc">BDD - Gherkin - Cucumber approach</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Core-Test-Module-Run-on-independent-Operating-Systems.asciidoc">Run on independent Operating Systems</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Core-Test-Module-Externalize-test-environment-DEV-QA-SIT-PROD.asciidoc">Externalize test environment (DEV, QA, SIT, PROD)</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Core-Test-Module-Different-Environments.asciidoc">Encrypting sensitive data</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="core-test-module.asciidoc_how-to-start">How to start?</h5>
<div class="paragraph">
<p>Read: <a href="https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Core-Test-Module-Framework-Test-Class.asciidoc">Framework Test Class</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Core-Test-Module-Test-reports-with-logs-and-or-screenshots.asciidoc">75.1.2. Allure Logger &#x2192; BFLogger</h4>
<div class="paragraph">
<p>In Allure E2E Test Framework you have ability to use and log any additional information crucial either for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>test steps</p>
</li>
<li>
<p>test exection</p>
</li>
<li>
<p>page object actions, and many more.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="core-test-module-test-reports-with-logs-and-or-screenshots.asciidoc_where-to-find-saved-logs">Where to find saved logs</h5>
<div class="paragraph">
<p>Every logged information is saved in separate test file, as a result of use parallel tests execution.</p>
</div>
<div class="paragraph">
<p>Place where they are saved:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In test folder <em>C:\Allure_Test_Framework\allure-app-under-test\logs</em></p>
</li>
<li>
<p>In every Allure Test report, logs are always embedded as a attachment, according to test run.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="core-test-module-test-reports-with-logs-and-or-screenshots.asciidoc_how-to-use-logger">How to use logger:</h5>
<div class="ulist">
<ul>
<li>
<p>Start typing</p>
<div class="paragraph">
<p><code>BFLogger</code></p>
</div>
</li>
<li>
<p>Then type . (dot)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="core-test-module-test-reports-with-logs-and-or-screenshots.asciidoc_type-of-logger">Type of logger:</h5>
<div class="ulist">
<ul>
<li>
<p><code>BFLogger.logInfo(&quot;Your text&quot;)</code> - used for test steps</p>
</li>
<li>
<p><code>BFLogger.logDebug(&quot;Your text&quot;)</code> - used for non official information, either during test build process or in Page Object files</p>
</li>
<li>
<p><code>BFLogger.logError(&quot;Your text&quot;)</code> - used to emphasize critical information</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image13.png" alt="image13">
</div>
</div>
<div class="paragraph">
<p>Console output:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image14.png" alt="image14">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Core-Test-Module-Test-reports-with-logs-and-or-screenshots.asciidoc">75.1.3. Allure Reports</h4>
<div class="imageblock">
<div class="content">
<img src="images/image15.png" alt="image15">
</div>
</div>
<div class="paragraph">
<p>Allure is a tool designed for test reports.</p>
</div>
<div class="sect5">
<h6 id="core-test-module-test-reports-with-logs-and-or-screenshots.asciidoc_generate-report---command-line">Generate report - command line</h6>
<div class="paragraph">
<p>You can generate a report using one of the following command:</p>
</div>
<div class="paragraph">
<p>Since mrchecker-core-module version 5.6.2.1:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mvn test allure:serve -Dgroups=TS_Tag1</pre>
</div>
</div>
<div class="paragraph">
<p>Prior to mrchecker-core-module version 5.6.2.1:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mvn test allure:serve -Dtest=TS_Tag1</pre>
</div>
</div>
<div class="paragraph">
<p>Report will be generated into temp folder. Web server with results will start. You can additionally configure the server timeout. The default value is &quot;3600&quot; (one hour).</p>
</div>
<div class="paragraph">
<p>System property allure.serve.timeout.</p>
</div>
<div class="paragraph">
<p>Since mrchecker-core-module version 5.6.2.1:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mvn test allure:report -Dgroups=TS_Tag1</pre>
</div>
</div>
<div class="paragraph">
<p>Prior to mrchecker-core-module version 5.6.2.1:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mvn test allure:report -Dtest=TS_Tag1</pre>
</div>
</div>
<div class="paragraph">
<p>Report will be generated t&#x43E; directory: target/site/allure-maven/index.html</p>
</div>
<div class="paragraph">
<p><strong>NOTE</strong>: Please open <em>index.html</em> file under Firefox. Chrome has some limitation to present dynamic content. If you want to open report with Chromium based Web Browser, you need to launch it first with <code>--allow-file-access-from-files</code> argument.</p>
</div>
</div>
<div class="sect5">
<h6 id="core-test-module-test-reports-with-logs-and-or-screenshots.asciidoc_generate-report---eclipse">Generate report - Eclipse</h6>
<div class="paragraph">
<p>Report is created here <em>allure-app-under-test\target\site\allure-report\index.html</em></p>
</div>
<div class="paragraph">
<p><strong>NOTE</strong>: Please open <em>index.html</em> file under Firefox. Chrome has some limitation to present dynamic content. If you want to open report with Chromium based Web Browser, you need to launch it first with <code>--allow-file-access-from-files</code> argument.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image17.png" alt="image17">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image18.png" alt="image18">
</div>
</div>
</div>
<div class="sect5">
<h6 id="core-test-module-test-reports-with-logs-and-or-screenshots.asciidoc_generate-report---jenkins">Generate report - Jenkins</h6>
<div class="paragraph">
<p>In our case, we&#x2019;ll use the Allure Jenkins plugin. When integrating Allure in the Jenkins job configuration, we&#x2019;ll have direct access to the build&#x2019;s test report.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image19.png" alt="image19">
</div>
</div>
<div class="paragraph">
<p>There are several ways to access the Allure Test Reports:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using the &quot;Allure Report&quot; button on the left navigation bar or center of the general job overview</p>
</li>
<li>
<p>Using the &quot;Allure Report&quot; button on the left navigation bar or center of a specific build overview</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Afterwards you&#x2019;ll be greeted with either the general Allure Dashboard (showing the newest build) or the Allure Dashboard for a specific (older) build.</p>
</div>
</div>
<div class="sect4">
<h5 id="core-test-module-test-reports-with-logs-and-or-screenshots.asciidoc_allure-dashboard">Allure dashboard</h5>
<div class="imageblock">
<div class="content">
<img src="images/image20.png" alt="image20">
</div>
</div>
<div class="paragraph">
<p>The Dashboard provides a graphical overview on how many test cases were successful, failed or are broken.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Passed</strong> means, that the test case was executed successfully.</p>
</li>
<li>
<p><strong>Broken</strong> means, that there were mistakes inside of the test method or test class. As tests are being treated as code, broken code has to be expected, resulting in occasionally broken test results.</p>
</li>
<li>
<p><strong>Failed</strong> means that an assertion failed.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="core-test-module-test-reports-with-logs-and-or-screenshots.asciidoc_defects">Defects</h5>
<div class="paragraph">
<p>The defects tab lists out all the defects that occurred, including a description. Clicking on a list item displays the test case which resulted in an error. Again, clicking on the test case allows the user to have a look at the test case steps, as well as Log files or Screenshots of the failure.</p>
</div>
</div>
<div class="sect4">
<h5 id="core-test-module-test-reports-with-logs-and-or-screenshots.asciidoc_graph">Graph</h5>
<div class="paragraph">
<p>The graph page includes a pie chart of all tests, showing their result status (failed, passed, etc.). Another graph allows insight into the time elapsed during the tests. This is a very useful information to find and eliminate possible bottlenecks in test implementations.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image21.png" alt="image21">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Core-Test-Module-test-groups-tags.asciidoc">75.1.4. Why join Test Cases in groups - Test Suites</h4>
<div class="imageblock">
<div class="content">
<img src="images/image22.png" alt="image22">
</div>
</div>
<div class="paragraph">
<p>[[core-test-module-test-groups-tags.asciidoc_httpsen.wikipedia.orgwindex.phptitle=regression_suiteredirect=noregresion-suite]]
== <a href="https://en.wikipedia.org/w/index.php?title=Regression_suite&amp;redirect=no">Regresion Suite</a>:</p>
</div>
<div class="paragraph">
<p>Regression testing is a type of <a href="https://en.wikipedia.org/wiki/Software_testing">software testing</a> which verifies that software which was previously developed and tested still performs the same way after it was changed or interfaced with other software.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/Smoke_testing">Smoke</a></p>
</li>
<li>
<p>Business vital functionalities</p>
</li>
<li>
<p>Full scope of test cases</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="core-test-module-test-groups-tags.asciidoc_httpswww.rainforestqa.comblog2016-06-27-what-is-functional-testingfunctional-suite"><a href="https://www.rainforestqa.com/blog/2016-06-27-what-is-functional-testing">Functional Suite</a>:</h5>
<div class="ulist">
<ul>
<li>
<p>Smoke</p>
</li>
<li>
<p>Business function A</p>
</li>
<li>
<p>Business function B</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="core-test-module-test-groups-tags.asciidoc_httpsen.wikipedia.orgwikisingle_responsibility_principlesingle-responsibility-unit"><a href="https://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility Unit</a>:</h5>
<div class="ulist">
<ul>
<li>
<p>Single page</p>
</li>
<li>
<p>Specific test case</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Core-Test-Module-test-groups-tags.asciidoc">75.1.5. How to build Test Suite based on tags</h4>
<div class="sect4">
<h5 id="core-test-module-test-groups-tags.asciidoc_structure-of-test-suite">Structure of Test Suite</h5>
<div class="sect5">
<h6 id="core-test-module-test-groups-tags.asciidoc_since-mrchecker-core-module-version-5.6.2.1">Since mrchecker-core-module version 5.6.2.1:</h6>
<div class="imageblock">
<div class="content">
<img src="images/image23_new.png" alt="image23 new">
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@RunWith(JUnitPlatform.class)</code> - use Junit5 runner</p>
</li>
<li>
<p><code>@IncludeTags({&quot;TestsTag1&quot;})</code> - search all test files with Tag <code>&quot;TestsTag1&quot;</code></p>
</li>
<li>
<p><code>@ExcludeTags({&quot;TagToExclude&quot;})</code> - at last exclude test files</p>
</li>
<li>
<p><code>@SelectPackages(&quot;com.capgemini.mrchecker.core.groupTestCases.testCases&quot;)</code> - search only test files in <code>&quot;com.capgemini.mrchecker.core.groupTestCases.testCases&quot;</code> package</p>
</li>
<li>
<p><code>public class TS_Tag1</code> - name of Test Suite &quot;TS_Tag1&quot;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Most commonly used filter to build Test Suite is usage of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@IncludeTags({ })</code></p>
</li>
<li>
<p><code>@ExcludeTags({ })</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>@IncludeTags({ &quot;TestsTag1&quot; }) , @ExcludeTags({ })</code> &#x2192; will execute all test cases with tag <code>TestsTag1</code></p>
</li>
<li>
<p><code>@IncludeTags({ &quot;TestsTag1&quot; }) , @ExcludeTags({ &quot;SlowTest&quot; })</code> &#x2192; will execute all test cases with tag <code>&quot;TestsTag1&quot;</code> although it will exclude, from this list, test cases with tag <code>&quot;SlowTest&quot;</code></p>
</li>
<li>
<p><code>@IncludeTags({ }) , @ExcludeTags({ &quot;ExcludeTags&quot; })</code> &#x2192; It will exclude test cases with tag <code>&quot;SlowTest&quot;</code></p>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="core-test-module-test-groups-tags.asciidoc_prior-to-mrchecker-core-module-version-5.6.2.1">Prior to mrchecker-core-module version 5.6.2.1:</h6>
<div class="imageblock">
<div class="content">
<img src="images/image23.png" alt="image23">
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@RunWith(WildcardPatternSuiteBF.class)</code> - search for test files under <code>/src/test/java</code></p>
</li>
<li>
<p><code>@IncludeCategories({ TestsTag1.class })</code> - search all test files with Tag <code>&quot;TestsTag1.class&quot;</code></p>
</li>
<li>
<p><code>@ExcludeCategories({ })</code> - at last exclude test files. In this example, there is not exclusion</p>
</li>
<li>
<p><code>@SuiteClasses({ &quot;**/*Test.class&quot; })</code> - search only test files, where file name ends with <code>&quot;&lt;anyChar/s&gt;Test.class&quot;</code></p>
</li>
<li>
<p><code>public class TS_Tag1</code> - name of Test Suite &quot;TS_Tag1&quot;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Most commonly used filter to build Test Suite is usage of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@IncludeCategories({ })</code></p>
</li>
<li>
<p><code>@ExcludeCategories({ })</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>@IncludeCategories({ TestsTag1.class }) , @ExcludeCategories({ })</code> &#x2192; will execute all test cases with tag <code>TestsTag1.class</code></p>
</li>
<li>
<p><code>@IncludeCategories({ TestsTag1.class }) , @ExcludeCategories({ SlowTest.class })</code> &#x2192; will execute all test cases with tag <code>&quot;TestsTag1.class&quot;</code> although it will exclude, from this list, test cases with tag <code>&quot;SlowTest.class&quot;</code></p>
</li>
<li>
<p><code>@IncludeCategories({ }) , @ExcludeCategories({ SlowTest.class })</code> &#x2192; will execute all test cases from <code>/src/test/java</code>, although it will exclude, from this list, test cases with tag <code>&quot;SlowTest.class&quot;</code></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect4">
<h5 id="core-test-module-test-groups-tags.asciidoc_structure-of-test-case">Structure of Test Case</h5>
<div class="sect5">
<h6 id="core-test-module-test-groups-tags.asciidoc_since-mrchecker-core-module-version-5.6.2.1">Since mrchecker-core-module version 5.6.2.1:</h6>
<div class="imageblock">
<div class="content">
<img src="images/image24_new.png" alt="image24 new">
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@TestsTag1, @TestsSmoke, @TestsSelenium</code> - list of tags assigned to this test case - <code>&quot;TestsTag1, TestsSmokre, TestSelenium&quot;</code> annotations</p>
</li>
<li>
<p><code>public class FristTest_tag1_Test</code> - name of test case <code>&quot;FristTest_tag1_Test&quot;</code></p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="core-test-module-test-groups-tags.asciidoc_prior-to-mrchecker-core-module-version-5.6.2.1">Prior to mrchecker-core-module version 5.6.2.1:</h6>
<div class="imageblock">
<div class="content">
<img src="images/image24.png" alt="image24">
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Category({ TestsTag1.class, TestsSmoke.class, TestSelenium.class })</code> - list of tags / categories assigned to this test case - <code>&quot;TestsTag1.class, TestsSmoke.class, TestSelenium.class&quot;</code></p>
</li>
<li>
<p><code>public class FristTest_tag1_Test</code> - name of test case <code>&quot;FristTest_tag1_Test&quot;</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="core-test-module-test-groups-tags.asciidoc_structure-of-tags--categories">Structure of Tags / Categories</h5>
<div class="sect5">
<h6 id="core-test-module-test-groups-tags.asciidoc_since-mrchecker-core-module-version-5.6.2.1">Since mrchecker-core-module version 5.6.2.1:</h6>
<div class="paragraph">
<p>Tag name: <code>TestsTag1</code> annotation</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image25_new.png" alt="image25 new">
</div>
</div>
<div class="paragraph">
<p>Tag name: <code>TestsSmoke</code> annotation</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image26_new.png" alt="image26 new">
</div>
</div>
<div class="paragraph">
<p>Tag name: <code>TestSelenium</code> annotation</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image27_new.png" alt="image27 new">
</div>
</div>
</div>
<div class="sect5">
<h6 id="core-test-module-test-groups-tags.asciidoc_prior-to-mrchecker-core-module-version-5.6.2.1">Prior to mrchecker-core-module version 5.6.2.1:</h6>
<div class="paragraph">
<p>Tag name: <code>TestsTag1.class</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image25.png" alt="image25">
</div>
</div>
<div class="paragraph">
<p>Tag name: <code>TestsSmoke.class</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image26.png" alt="image26">
</div>
</div>
<div class="paragraph">
<p>Tag name: <code>TestSelenium.class</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image27.png" alt="image27">
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="Core-Test-Module-test-groups-tags.asciidoc">75.1.6. How to run Test Suite</h4>
<div class="paragraph">
<p>To run Test Suite you will do the same steps as you do to run test case</p>
</div>
<div class="paragraph">
<p><em>Command line</em></p>
</div>
<div class="paragraph">
<p>Since mrchecker-core-module version 5.6.2.1:</p>
</div>
<div class="paragraph">
<p>JUnit5 disallows running suite classes from maven. Use -Dgroups=Tag1,Tag2 and -DexcludeGroups=Tag4,Tag5 to create test suites in maven.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mvn test site -Dgroups=TS_Tag1</pre>
</div>
</div>
<div class="paragraph">
<p>Prior to mrchecker-core-module version 5.6.2.1:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mvn test site -Dtest=TS_Tag1</pre>
</div>
</div>
<div class="paragraph">
<p><em>Eclipse</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image28.png" alt="image28">
</div>
</div>
</div>
<div class="sect3">
<h4 id="Core-Test-Module-Data-driven-approach.asciidoc">75.1.7. Data driven approach</h4>
<div class="paragraph">
<p><strong>Data driven approach</strong> - External <strong>data driven</strong></p>
</div>
<div class="paragraph">
<p><strong>External data driven</strong> - Data as external file injected in <strong>test case</strong></p>
</div>
<div class="paragraph">
<p><strong>Test case</strong> - Categorize <strong>functionality</strong> and <strong>severity</strong></p>
</div>
<div class="paragraph">
<p>More information about data driven you can find here and here</p>
</div>
<div class="paragraph">
<p>There are a few ways to define parameters for tests.</p>
</div>
</div>
<div class="sect3">
<h4 id="Core-Test-Module-Data-driven-approach.asciidoc">75.1.8. Internal Data driven approach</h4>
<div class="paragraph">
<p>Data as <strong>part</strong> of <strong>test case</strong></p>
</div>
<div class="paragraph">
<p>The different means to pass in parameters are shown below.</p>
</div>
<div class="sect5">
<h6 id="core-test-module-data-driven-approach.asciidoc_since-mrchecker-core-module-version-5.6.2.1">Since mrchecker-core-module version 5.6.2.1</h6>
<div class="paragraph">
<p>Static methods are used to provide the parameters.</p>
</div>
</div>
<div class="sect5">
<h6 id="core-test-module-data-driven-approach.asciidoc_a-method-in-the-test-class">A method in the test class:</h6>
<div class="listingblock">
<div class="content">
<pre>@ParameterizedTest
@MethodSource(&quot;argumentsStream&quot;)
---

*OR*</pre>
</div>
</div>
<div class="paragraph">
<p>@ParameterizedTest
@MethodSource(&quot;arrayStream&quot;)
---</p>
</div>
<div class="paragraph">
<p>In the first case the arguments are directly mapped to the test method parameters. In the second case the array is passed as the argument.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image30_new.png" alt="image30 new">
</div>
</div>
</div>
<div class="sect5">
<h6 id="core-test-module-data-driven-approach.asciidoc_a-method-in-a-different-class">A method in a different class:</h6>
<div class="listingblock">
<div class="content">
<pre>@ParameterizedTest
@MethodSource(&quot;com.capgemini.mrchecker.core.datadriven.MyContainsTestProvider#provideContainsTrueParameters&quot;)
---

image::images/image32_new.png[]

[[core-test-module-data-driven-approach.asciidoc_prior-to-mrchecker-core-module-version-5.6.2.1]]
=== Prior to mrchecker-core-module version 5.6.2.1

Parameters that are passed into tests using the `@Parameters` annotation must be _Object[]_&apos;s

[[core-test-module-data-driven-approach.asciidoc_in-the-annotation]]
=== In the annotation:</pre>
</div>
</div>
<div class="paragraph">
<p>@Parameters({&quot;1, 2, 3&quot;, &quot;3, 4, 7&quot;, &quot;5, 6, 11&quot;, &quot;7, 8, 15&quot;})</p>
</div>
<div class="listingblock">
<div class="content">
<pre>image::images/image30.png[]

The parameters must be primitive objects such as integers, strings, or booleans. Each set of parameters is contained within a single string and will be parsed to their correct values as defined by the test method&#x2019;s signature.

[[core-test-module-data-driven-approach.asciidoc_in-a-method-named-in-the-annotation]]
=== In a method named in the annotation:</pre>
</div>
</div>
<div class="paragraph">
<p>@Parameters(method = &quot;addParameters&quot;)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>image::images/image31.png[]

A separate method can be defined and referred to for parameters. This method must return an `Object[]` and can contain normal objects.

[[core-test-module-data-driven-approach.asciidoc_in-a-class]]
=== In a class:</pre>
</div>
</div>
<div class="paragraph">
<p>@Parameters(source = MyContainsTestProvider.class)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>image::images/image32.png[]

A separate class can be used to define parameters for the test. This test must contain at least one static method that returns an Object[], and its name must be prefixed with provide. The class could also contain multiple methods that provide parameters to the test, as long as they also meet the required criteria.

[[Core-Test-Module-Data-driven-approach.asciidoc]]
= External Data Driven

Data as *external file injected* in *test case*

[[core-test-module-data-driven-approach.asciidoc_since-mrchecker-core-module-version-5.6.2.1]]
=== Since mrchecker-core-module version 5.6.2.1



[[core-test-module-data-driven-approach.asciidoc_prior-to-mrchecker-core-module-version-5.6.2.1]]
=== Prior to mrchecker-core-module version 5.6.2.1

Tests use the annotation @FileParameters to inject CSVs file.</pre>
</div>
</div>
<div class="paragraph">
<p>@FileParameters(&quot;src/test/resources/datadriven/test.csv&quot;)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>A CSV can also be used to contain the parameters for the tests. It is pretty simple to set up, as it&#x2019;s just a comma separated list.

[[core-test-module-data-driven-approach.asciidoc_classic-csv]]
=== Classic CSV

image::images/image33.png[]

and CSV file structure

image::images/image34.png[]

[[core-test-module-data-driven-approach.asciidoc_csv-with-headers]]
=== CSV with headers

image::images/image35.png[]

and CSV file structure

image::images/image36.png[]

[[core-test-module-data-driven-approach.asciidoc_csv-with-specific-column-mapper]]
=== CSV with specific column mapper

image::images/image37.png[]

and Mapper implementation

image::images/image38.png[]

:leveloffset: 0

:leveloffset: 3

[[Core-Test-Module-Test-case-parallel-execution.asciidoc]]
= What is &quot;Parallel test execution&quot; ?

Parallel test execution means how many _&quot;Test Classes&quot;_ can run simultaneously.

_&quot;Test Class&quot;_, as this is Junit Test class, it can have one and more test cases - _&quot;Test case methods&quot;_

image::images/image39.png[]

[[Core-Test-Module-Test-case-parallel-execution.asciidoc]]
= How many parallel test classes can run?

By default, number of parallel test classes is set to 8.

It can be updated as you please, on demand, by command line:

    mvn test site -Dtest=TS_Tag1 -Dthread.count=16

_-Dthread.count=16_ - increase number of parallel Test Class execution to 16.

:leveloffset: 3

:leveloffset: 3

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_overview]]
== Overview

*Cucumber / Selenium*

Business and IT don&#x2019;t always understand each other. Too often misunderstandings between business and IT result in the costly failure of IT projects. With this in mind Cucumber was developed as a tool to support human collaboration between business and IT.

Cucumber uses executable specifications to encourage close collaboration. This helps teams to keep the business goal in mind at all times. With Cucumber you can merge specification and test documentation into one cohesive whole, allowing your team to maintain one single source of truth. Because these executable specifications are automatically tested by Cucumber, your single source of truth is always up-to-date.

image::images/image40.png[]

Cucumber supports testers when designing test cases. To automate these test cases several languages can be used. Cucumber also works well with Browser Automation tools such as Selenium Webdriver.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_selenium]]
==== Selenium

Selenium automates browsers and is used for automating web applications for testing purposes. Selenium offers testers and developers full access to the properties of objects and the underlying tests, via a scripting environment and integrated debugging options.

Selenium consists of many parts. If you want to create robust, browser-based regression automation suites and tests then Selenium Webdriver is most appropriate. With Selenium Webdriver you can also scale and distribute scripts across many environments.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_strengths]]
=== Strengths

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_supports-bdd]]
==== Supports BDD

Those familiar with Behavior Driven Development (BDD) recognize in Cucumber an excellent open source tool that supports this practice.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_all-in-one-place]]
==== All in one place

With Cucumber / Selenium you can automate at the UI level. Automation at the unit or API level can also be implemented using Cucumber. This means all tests, regardless of the level at which they are implemented, can be implemented in one tool.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_maintainable-test-scripts]]
==== Maintainable test scripts

Many teams seem to prefer UI level automation. This despite the huge cost of maintaining UI level tests compared with the cost of maintaining API or unit tests. To lessen the maintenance of UI testing, when designing UI level functional tests, you can try describing the test and the automation at three levels: business rule, UI workflow, technical implementation.

When using Cucumber combined with Selenium you can implement these three levels for better maintenance.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_early-start]]
==== Early start

Executable specifications can and should be written before the functionality is implemented. By starting early teams get most return on investment from their test automation.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_supported-by-a-large-community]]
==== Supported by a large community

Cucumber and Selenium are both open source tools with a large community, online resources and mailing lists.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_how-to-run-cucumber-tests-in-mr.checker]]
== How to run cucumber tests in Mr.Checker

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_command-line--jenkins]]
=== Command line / Jenkins

* Run cucumber tests and generate Allure report. Please use this for Jenkins execution. Report is saved under _./target/site_.
+
    mvn clean -P cucumber test site
+
* Run and generate report
+
    mvn clean -P cucumber test site allure:report
+
* Run cucumber tests, generate Allure report and start standalone report server
+
    mvn clean -P cucumber test site allure:serve

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_eclipse-ide]]
=== Eclipse IDE

image::images/image41.png[]

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_tooling]]
== Tooling

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_cucumber]]
==== Cucumber

Cucumber supports over a dozen different software platforms. Every Cucumber implementation provides the same overall functionality, but they also have their own installation procedure and platform-specific functionality. See https://cucumber.io/docs for all Cucumber implementations and framework implementations.

Also, IDE&#x2019;s such as Intellij offer several plugins for Cucumber support.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_selenium]]
==== Selenium

Selenium has the support of some of the largest browser vendors who have taken (or are taking) steps to make Selenium a native part of their browser. It is also the core technology in countless other browser automation tools, APIs and frameworks.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_automation-process]]
=== Automation process

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_write-a-feature-file]]
==== Write a feature file

Test automation in Cucumber starts with writing a feature file. A feature normally consists of several (test)scenario&#x2019;s and each scenario consists of several steps.

Feature: Refund item

Scenario: Jeff returns a faulty microwave

Given Jeff has bought a microwave for $100

And he has a receipt

When he returns the microwave

Then Jeff should be refunded $100

Above example shows a feature &#x201C;Refund item&#x201D; with one scenario &#x201C;Jeff returns a faulty microwave&#x201D;. The scenario consists of four steps each starting with a key word (Given, And, When, Then).

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_implementing-the-steps]]
==== Implementing the steps

Next the steps are implemented. Assuming we use Java to implement the steps, the Java code will look something like this.</pre>
</div>
</div>
<div class="paragraph">
<p>public class MyStepdefs \{</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@Given(&quot;Jeff has bought a microwave for $(\d+)&quot;)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public void Jeff_has_bought_a_microwave_for(int amount) \{</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// implementation can be plain java</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// or selenium</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>driver.findElement(By.name(&quot;test&quot;)).sendKeys(&quot;This is an example\n&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>		driver.findElement(By.name(&quot;button&quot;)).click();// etc
	}
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Cucumber uses an annotation (highlighted) to match the step from the feature file with the function implementing the step in the Java class. The name of the class and the function can be as the developer sees fit. Selenium code can be used within the function to automate interaction with the browser.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_running-scenario&#x2019;s]]
==== Running scenario&#x2019;s

There are several ways to run scenarios with Cucumber, for example the JUnit runner, a command line runner and several third party runners.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_reporting-test-results]]
==== Reporting test results

Cucumber can report results in several different formats, using formatter plugins

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_features]]
=== Features

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_feature-files-using-gherkin]]
==== Feature files using GherkiN

Cucumber executes your feature files. As shown in the example below, feature files in Gherkin are easy to read so they can be shared between IT and business. Data tables can be used to execute a scenario with different inputs.

image::images/image42.png[]

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_organizing-tests]]
==== Organizing tests

Feature files are placed in a directory structure and together form a feature tree.

Tags can be used to group features based on all kinds of categories. Cucumber can include or exclude tests with certain tags when running the tests.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_reporting-test-results]]
=== Reporting test results

Cucumber can report results in several formats, using formatter plug-ins.

Not supported option by Shared Services: The output from Cucumber can be used to present test results in Jenkins or Hudson depending of the preference of the project.

image::images/image43.png[]

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_how-is-cucumber--selenium-used-at-capgemini]]
== HOW IS Cucumber / Selenium USED AT Capgemini?

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_tool-deployment]]
=== Tool deployment

Cucumber and Selenium are chosen as one of Capgemini&#x2019;s test automation industrial tools. We support the Java implementation of Cucumber and Selenium Webdriver. We can help with creating Cucumber, Selenium projects in Eclipse and IntelliJ.

[[core-test-module-bdd-gherkin-cucumber-approach.asciidoc_application-in-ataas-automated-testing-as-a-service]]
=== Application in ATaaS (Automated Testing as a service)

In the context of industrialisation, Capgemini has developed a range of services to assist and support the projects in process and tools implementation.

In this context a team of experts assists projects using test automation.

The main services provided by the center of expertise are:

* Advise on the feasibility of automation.
* Support with installation.
* Coaching teams in the use of BDD.

:leveloffset: 3

:leveloffset: 3

[[Core-Test-Module-Run-on-independent-Operating-Systems.asciidoc]]
= Run on independent Operation Systems

As _E2E Allure test framework_ is build on top of:

* Java 1.8
* Maven 3.3

*This guarantees portability to all operating systems.*

_E2E Allure test framework_ can run on OS:

* Windows,
* Linux and
* Mac.

Test creation and maintenance in _E2E Allure test framework_ can be done with any type of IDE:

* Eclipse,
* IntelliJ,
* WebStorm,
* Visual Studio Code,
* many more support Java + Maven.

:leveloffset: 3

:leveloffset: 3

[[Core-Test-Module-Externalize-test-environment-DEV-QA-SIT-PROD.asciidoc]]
= System under test environments

image::images/image44.png[]

* _Quality assurance_ or QA is a way of preventing mistakes or defects in manufactured products and avoiding problems when delivering solutions or services to customers; which ISO 9000 defines as &quot;part of quality management focused on providing confidence that quality requirements will be fulfilled&quot;.
* _System integration testing_ or SIT is a high-level software testing process in which testers verify that all related systems maintain data integrity and can operate in coordination with other systems in the same environment. The testing process ensures that all sub-components are integrated successfully to provide expected results.
* _Development_ or _Dev_ testing is performed by the software developer or engineer during the construction phase of the software development life-cycle. Rather than replace traditional QA focuses, it augments it. Development testing aims to eliminate construction errors before code is promoted to QA; this strategy is intended to increase the quality of the resulting software as well as the efficiency of the overall development and QA process.
* _Prod_ If the customer accepts the product, it is deployed to a _production_ environment, making it available to all users of the system.

image::images/image45.png[]

[[Core-Test-Module-Externalize-test-environment-DEV-QA-SIT-PROD.asciidoc]]
= How to use system environment

In Page classes, when you load / start web, it is uncommon to save fixed main url.

Value flexibility is a must, when your web application under test, have different main url, dependence on environmnent (DEV, QA, SIT, ..., PROD)

Instead of hard coded main url variable, you build your Page classe with dynamic variable.

Example of dynamic variable `GetEnvironmentParam.WWW_FONT_URL`

image::images/image46.png[]

[[Core-Test-Module-Externalize-test-environment-DEV-QA-SIT-PROD.asciidoc]]
= How to create / update system environment

[[core-test-module-externalize-test-environment-dev-qa-sit-prod.asciidoc_external-file-with-variable-values]]
== External file with variable values

Dynamic variable values are stored under path _mrchecker-app-under-test\src\resources\enviroments\environments.csv_.

*NOTE*: As environments.csv is Comma-separated file, please be aware of any edition and then save it under Excel.

image::images/image47.png[]

[[core-test-module-externalize-test-environment-dev-qa-sit-prod.asciidoc_encrypting-sensitive-data]]
== Encrypting sensitive data

Some types of data you might want to store as environment settings are sensitive in nature (e.g. passwords). You might not want to store them (at least not in their plaintext form) in your repository. To be able to encrypt sensitive data you need to do following:

1. Create a secret (long, random chain of characters) and store it under _mrchecker-app-under-test\src\resources\secretData.txt_. Example: `LhwbTm9V3FUbBO5Tt5PiTUEQrXGgWrDLCMthnzLKNy1zA5FVTFiTdHRQAyPRIGXmsAjPUPlJSoSLeSBM`
2. Exclude the file from being checked into the git repository by adding it to _git.ignore_. You will need to pass the file over a different channel among your teammates.
3. Encrypt the values before putting them into the _environments.csv_ file by creating following script (put the script where your jasypt library resides, e.g. _C:\MrChecker_Test_Framework\m2\repository\org\jasypt\jasypt\1.9.2)_:
+</pre>
</div>
</div>
<div class="paragraph">
<p>@ECHO OFF</p>
</div>
<div class="paragraph">
<p>set SCRIPT_NAME=encrypt.bat
set EXECUTABLE_CLASS=org.jasypt.intf.cli.JasyptPBEStringEncryptionCLI
set EXEC_CLASSPATH=jasypt-1.9.2.jar
if &quot;%JASYPT_CLASSPATH%&quot; == &quot;&quot; goto computeclasspath
set EXEC_CLASSPATH=%EXEC_CLASSPATH%;%JASYPT_CLASSPATH%</p>
</div>
<div class="paragraph">
<p>:computeclasspath
IF &quot;%OS%&quot; == &quot;Windows_NT&quot; setlocal ENABLEDELAYEDEXPANSION
FOR %%c in (%~dp0..\lib\*.jar) DO set EXEC_CLASSPATH=!EXEC_CLASSPATH!;%%c
IF &quot;%OS%&quot; == &quot;Windows_NT&quot; setlocal DISABLEDELAYEDEXPANSION</p>
</div>
<div class="paragraph">
<p>set JAVA_EXECUTABLE=java
if &quot;%JAVA_HOME%&quot; == &quot;&quot; goto execute
set JAVA_EXECUTABLE=&quot;%JAVA_HOME%\bin\java&quot;</p>
</div>
<div class="paragraph">
<p>:execute
%JAVA_EXECUTABLE% -classpath %EXEC_CLASSPATH% %EXECUTABLE_CLASS% %SCRIPT_NAME% %*</p>
</div>
<div class="listingblock">
<div class="content">
<pre>+
4. Encrypt the values by calling
+</pre>
</div>
</div>
<div class="paragraph">
<div class="title">\encrypt.bat input=someinput password=secret</div>
<p>----ENVIRONMENT-----------------</p>
</div>
<div class="paragraph">
<p>Runtime: Oracle Corporation Java HotSpot&#x2122; 64-Bit Server VM 25.111-b14</p>
</div>
<div class="paragraph">
<p>----ARGUMENTS-------------------</p>
</div>
<div class="paragraph">
<p>input: someinput
password: secret</p>
</div>
<div class="paragraph">
<p>----OUTPUT----------------------</p>
</div>
<div class="paragraph">
<p>JN3nOFol2GMZoUxR5z2wI2qdipcNH1UD</p>
</div>
<div class="listingblock">
<div class="content">
<pre>+
5. Mark the value as encrypted by adding a prefix &apos;ENC(&apos; and suffix &apos;)&apos; like: `ENC(JN3nOFol2GMZoUxR5z2wI2qdipcNH1UD)`
+
image::images/image48.png[]

[[core-test-module-externalize-test-environment-dev-qa-sit-prod.asciidoc_bridge-between-external-file-nad-page-class]]
== Bridge between external file nad Page class

To map values from external file with Page class you ought to use class `GetEnvironmentParam`.

Therefore when you add new variable (row) in _environments.csv_ you might need to add this variable to `GetEnvironmentParam`.

image::images/image49.png[]

[[Core-Test-Module-Externalize-test-environment-DEV-QA-SIT-PROD.asciidoc]]
= Run test case with system environment

To run test case with system environment, please use:

* _-Denv=&lt;NameOfEnvironment&gt;_
* _&lt;NameOfEnvironment&gt;_ is taken as column name from file _mrchecker-app-under-test\src\test\resources\enviroments\environments.csv_

[[core-test-module-externalize-test-environment-dev-qa-sit-prod.asciidoc_command-line]]
== Command Line

    mvn test site -Dtest=RegistryPageTest -Denv=DEV

[[core-test-module-externalize-test-environment-dev-qa-sit-prod.asciidoc_eclipse]]
== Eclipse

image::images/image50.png[]

image::images/image51.png[]


:leveloffset: 3

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing


[[Core-Test-Module-Different-Environments.asciidoc]]
= System under test environments

image::images/image080.png[]

* *Quality assurance* or *QA* is a way of preventing mistakes or defects in manufactured products and avoiding problems when delivering solutions or services to customers; which ISO 9000 defines as &quot;part of quality management focused on providing confidence that quality requirements will be fulfilled&quot;.

* *System integration testing* or *SIT* is a high-level software testing process in which testers verify that all related systems maintain data integrity and can operate in coordination with other systems in the same environment. The testing process ensures that all sub-components are integrated successfully to provide expected results.

* *Development* or *Dev* testing is performed by the software developer or engineer during the construction phase of the software development life-cycle. Rather than replace traditional QA focuses, it augments it. Development testing aims to eliminate construction errors before code is promoted to QA; this strategy is intended to increase the quality of the resulting software as well as the efficiency of the overall development and QA process.

* *Prod* If the customer accepts the product, it is deployed to a *production* environment, making it available to all users of the system.

image::images/image051.png[]

[[Core-Test-Module-Different-Environments.asciidoc]]
= How to use system environment

In Page classes, when you load / start web, it is uncommon to save fixed main url.

Value flexibility is a must, when your web application under test, have different main url, dependence on environmnent (DEV, QA, SIT, ..., PROD)

Instead of *hard coded* main url variable, you build your Page classe with dynamic variable.

Example of dynamic variable *GetEnvironmentParam.WWW_FONT_URL*

image::images/image081.png[]

[[Core-Test-Module-Different-Environments.asciidoc]]
= How to create / update system environment

[[core-test-module-different-environments.asciidoc_external-file-with-variable-values]]
== External file with variable values

Dynamic variable values are stored under path *mrchecker-app-under-test\src\resources\enviroments\environments.csv*.

**NOTE:** As environments.csv is Comma-separated file, please be aware of any edition and then save it under Excel.

image::images/image082.png[]

[[core-test-module-different-environments.asciidoc_encrypting-sensitive-data]]
== Encrypting sensitive data

Some types of data you might want to store as environment settings are sensitive in nature (e.g. passwords). You might not want to store them (at least not in their plaintext form) in your repository. To be able to encrypt sensitive data you need to do following:

1. Create a secret (long, random chain of characters) and store it under *mrchecker-app-under-test\src\resources\secretData.txt*. Example: `LhwbTm9V3FUbBO5Tt5PiTUEQrXGgWrDLCMthnzLKNy1zA5FVTFiTdHRQAyPRIGXmsAjPUPlJSoSLeSBM`
2. Exclude the file from being checked into the git repository by adding it to *git.ignore*. You will need to pass the file over a different channel among your teammates.
3. Encrypt the values before putting them into the *environments.csv* file by creating following script (put the script where your jasypt library resides, e.g. *C:\MrChecker_Test_Framework\m2\repository\org\jasypt\jasypt\1.9.2*):</pre>
</div>
</div>
<div class="paragraph">
<p>@ECHO OFF</p>
</div>
<div class="paragraph">
<p>set SCRIPT_NAME=encrypt.bat
set EXECUTABLE_CLASS=org.jasypt.intf.cli.JasyptPBEStringEncryptionCLI
set EXEC_CLASSPATH=jasypt-1.9.2.jar
if &quot;%JASYPT_CLASSPATH%&quot; == &quot;&quot; goto computeclasspath
set EXEC_CLASSPATH=%EXEC_CLASSPATH%;%JASYPT_CLASSPATH%</p>
</div>
<div class="paragraph">
<p>:computeclasspath
IF &quot;%OS%&quot; == &quot;Windows_NT&quot; setlocal ENABLEDELAYEDEXPANSION
FOR %%c in (%~dp0..\lib\*.jar) DO set EXEC_CLASSPATH=!EXEC_CLASSPATH!;%%c
IF &quot;%OS%&quot; == &quot;Windows_NT&quot; setlocal DISABLEDELAYEDEXPANSION</p>
</div>
<div class="paragraph">
<p>set JAVA_EXECUTABLE=java
if &quot;%JAVA_HOME%&quot; == &quot;&quot; goto execute
set JAVA_EXECUTABLE=&quot;%JAVA_HOME%\bin\java&quot;</p>
</div>
<div class="paragraph">
<p>:execute
%JAVA_EXECUTABLE% -classpath %EXEC_CLASSPATH% %EXECUTABLE_CLASS% %SCRIPT_NAME% %*</p>
</div>
<div class="listingblock">
<div class="content">
<pre>4. Encrypt the values by calling</pre>
</div>
</div>
<div class="paragraph">
<div class="title">\encrypt.bat input=someinput password=secret</div>
<p>----ENVIRONMENT-----------------</p>
</div>
<div class="paragraph">
<p>Runtime: Oracle Corporation Java HotSpot&#x2122; 64-Bit Server VM 25.111-b14</p>
</div>
<div class="paragraph">
<p>----ARGUMENTS-------------------</p>
</div>
<div class="paragraph">
<p>input: someinput
password: secret</p>
</div>
<div class="paragraph">
<p>----OUTPUT----------------------</p>
</div>
<div class="paragraph">
<p>JN3nOFol2GMZoUxR5z2wI2qdipcNH1UD</p>
</div>
<div class="listingblock">
<div class="content">
<pre>5. Mark the value as encrypted by adding a prefix &apos;ENC(&apos; and suffix &apos;)&apos; like: `ENC(JN3nOFol2GMZoUxR5z2wI2qdipcNH1UD)`

image::images/image083.png[]

[[core-test-module-different-environments.asciidoc_bridge-between-external-file-nad-page-class]]
== Bridge between external file nad Page class

To map values from external file with Page class you ought to use class *GetEnvironmentParam*

Therefore when you add new variable (row) in *environments.csv* you might need to add this variable to *GetEnvironmentParam*.

image::images/image084.png[]

[[Core-Test-Module-Different-Environments.asciidoc]]
= Run test case with system environment

To run test case with system environment, please use:
* *-Denv=\&lt;NameOfEnvironment\&gt;*
* *\&lt;NameOfEnvironment\&gt;* is taken as column name from file *mrchecker-app-under-test\src\test\resources\enviroments\environments.csv*


[[core-test-module-different-environments.asciidoc_command-line]]
== Command Line</pre>
</div>
</div>
<div class="paragraph">
<p>mvn test site -Dtest=RegistryPageTest -Denv=DEV</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[core-test-module-different-environments.asciidoc_eclipse]]
== Eclipse

image::images/image085.png[]
image::images/image086.png[]


:leveloffset: 3

[[master-mrchecker.asciidoc_selenium-module]]
=== Selenium Module

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[Selenium-Test-Module.asciidoc]]
= Selenium Test Module

[[selenium-test-module.asciidoc_what-is-mrchecker-e2e-selenium-test-module]]
== What is MrChecker E2E Selenium Test Module

image::images/image2.png[]

[[selenium-test-module.asciidoc_selenium-structure]]
== Selenium Structure

* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Selenium-Test-Module-What-is-Selenium.asciidoc[What is Selenium]
* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Selenium-Test-Module-What-is-WebDriver.asciidoc[What is WebDriver]
* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Selenium-Test-Module-What-is-Page-Object-Model-Pattern.asciidoc[What is Page Object Model/Pattern]

[[selenium-test-module.asciidoc_framework-features]]
== Framework Features

* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Selenium-Test-Module-Construction-of-Framework-Page-Class.asciidoc[Construction of Framework Page Class]
    - Every Page class must extend BasePage
    - What is `isLoaded()`, `load()` and `pageTitle()` for
    - How to create selector variable - `private static final By ButtonOkSelector = By.Css(&#x2026;&#x200B;)`
    - How to prepare everlasting selector
    - Method/action naming convention
    - Why we should use `findElementDynamic()` and `findElementQuietly()` instead of classic Selenium `findElement`
    - List of well-rounded groups of user friendly actions (`ElementButton`, `ElementCheckbox`, `ElementInput`, etc.)
    - Verification points of well-defined Page classes and Test classes
* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Selenium-Test-Module-Run-with-different-browser-options.asciidoc[Run on different browsers: Chrome, Firefox, IE, Safari, Edge]
* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Selenium-Test-Module-Run-on-different-browsers.asciidoc[Run with different browser option]
* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Selenium-Test-Module-Run-with-full-range-of-resolution.asciidoc[Run with full range of resolution (mobile, desktop): Testing response Design Webpage]

[[selenium-test-module.asciidoc_how-to-start]]
== How to start?

Read: https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Selenium-Test-Module-Building-basic-Selenium-Test.asciidoc[My first Selenium Test]

[[selenium-test-module.asciidoc_selenium-best-practices]]
== Selenium Best Practices

* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Selenium-Test-Module-Selenium-Best-Practices.asciidoc[Table of best practices]

[[selenium-test-module.asciidoc_selenium-uft-comparison]]
== Selenium UFT Comparison

* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Selenium-Test-Module-Selenium-UFT-Comparison.asciidoc[Selenium UFT Comparison]

:leveloffset: 3

[[master-mrchecker.asciidoc_selenium-structure]]
=== Selenium Structure

:leveloffset: 3

[[Selenium-Test-Module-What-is-Selenium.asciidoc]]
= What is Selenium

Selenium is a framework for testing browser applications. The test automation supports:

* Frequent regression testing
* Repeating test case executions
* Documentation of test cases
* Finding defects
* Multiple Browsers

The Selenium testing framework consists of multiple tools:

* *Selenium IDE*
+
The Selenium Integrated Development Environment is a prototyping tool for building test scripts. It is a Firefox Plugin and provides an easy-to-use interface for developing test cases. Additionally, Selenium IDE contains a recording feature, that allows the user to record user inputs that can be automatically re-executed in future.
+
* *Selenium 1*
+
Selenium 1, also known as Selenium RC, commands a Selenium Server to launch and kill browsers, interpreting the Selenese commands passed from the test program. The Server acts as an HTTP proxy. *This tool is deprecated*.
+
* *Selenium 2*
+
Selenium 2, also known as Selenium WebDriver, is designed to supply a well-designed object-oriented API that provides improved support for modern advanced web-app testing problems.
+
* *Selenium 3.0*
+
The major change in Selenium 3.0 is removing the original Selenium Core implementation and replacing it with one backed by WebDriver. There is now a W3C specification for browser automation, based on the Open Source WebDriver.
+
* *Selenium Grid*
+
Selenium Grid allows the scaling of Selenium RC test cases, that must be run in multiple and eventually variable environments. The tests can be run in parallel on different remote machines.

[[selenium-test-module-what-is-selenium.asciidoc_selenium-on-the-production-line]]
== Selenium on the Production Line

More information on Selenium on the Production Line can be found https://km3.capgemini.com/book/1051672[here].

*tl;dr*

The Production Line has containers running a Chrome and a Firefox Selenium Node. The communication with these nodes is accomplished using Selenium Grid.

Having issues using Selenium on the Production Line? Check the Production Line https://km3.capgemini.com/book/1074416[issue list], maybe it&#x2019;s a known issue that can be worked around.

:leveloffset: 3

:leveloffset: 3

[[Selenium-Test-Module-What-is-WebDriver.asciidoc]]
= What is WebDriver

On the one hand, it is a very convenient API for the programmer that allows to interact with the browser, on the other hand it is a driver concept that enables this direct communication.

image::images/image53.png[]

[[selenium-test-module-what-is-webdriver.asciidoc_how-does-it-work]]
==== How does it work?

image::images/image54.png[]

A tester, through his/her test script, can command WebDriver to perform certain actions on the WAUT on a certain browser. The way the user can command WebDriver to perform something is by using the client libraries or language bindings provided by WebDriver.

By using the language-binding client libraries, tester can invoke the browser-specific implementations of WebDriver, such as Firefox Driver, IE Driver, Opera Driver, and so on, to interact with the WAUT on the respective browser. These browser-specific implementations of WebDriver will work with the browser natively and execute commands from outside the browser to simulate exactly how the application user does.

After execution, WebDriver will send out the test result back to the test script for developer&apos;s analysis.

:leveloffset: 3

:leveloffset: 3

[[Selenium-Test-Module-What-is-Page-Object-Model-Pattern.asciidoc]]
= What is Page Object Model?

image::images/image55.png[]

Creating Selenium test cases can result in an unmaintainable project. One of the reasons is that too many duplicated code is used. Duplicated code could be caused by duplicated functionality and this will result in duplicated usage of locators. The disadvantage of duplicated code is that the project is less maintainable. If some locator will change, you have to walk through the whole test code to adjust locators where necessary. By using the page object model we can make non-brittle test code and reduce or eliminate duplicate test code. Beside of that it improves the readability and allows us to create interactive documentation. Last but not least, we can create tests with less keystroke. An implementation of the page object model can be achieved by separating the abstraction of the test object and the test scripts.

image::images/image56.png[]

:leveloffset: 3

:leveloffset: 3

[[Selenium-Test-Module-List-of-web-elements.asciidoc]]
= Basic Web elements

This page will provide an overview of basic web elements.

image::images/image57.png[]

image::images/image58.png[]

[cols=2*,options=header]
|===
|Name
|Method to use element

|Form: Input Text
|`elementInputText()`

|Form: Label
|`elementLabel()`

|Form: Submit Button
|`elementButton()`

|Page: Button
|`elementButton()`

|Checkbox
|`elementCheckbox()`

|Radio
|`elementRadioButton()`

|Elements (Tabs, Cards, Account, etc.)
|`elementTab()`

|Dropdown List
|`elementDropdownList()`

|Link
|-

|Combobox
|`elementList()`
|===

Comparision how pick value from `checkbox` can be done:

* by classic Selenium atomic actions
* by our enhanced Selenium wrapper

Classic Selenium atomic actions</pre>
</div>
</div>
<div class="paragraph">
<p>List&lt;WebElement&gt; checkboxesList = getDriver()
                .findElements(selectorHobby);
WebElement currentElement;
for (int i = 0; i &lt; checkboxesList.size(); i++) {
    currentElement = checkboxesList.get(i);
    if (currentElement.getAttribute(&quot;value&quot;)
                    .equals(hobby.toString()) &amp;&amp; currentElement.isSelected() != true)
                        {
        currentElement.click();
            }
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Enhanced Selenium in E2E test framework</pre>
</div>
</div>
<div class="paragraph">
<p>getDriver().elementCheckbox(selectorHobby)
				.setCheckBoxByValue(hobby.toString());</p>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

[[master-mrchecker.asciidoc_framework-features]]
=== Framework Features

:leveloffset: 3

[[Selenium-Test-Module-Construction-of-Framework-Page-Class.asciidoc]]
= Page Class

Page Object Models allow the representation of a webpage as a Java Class. It contains all required web elements like buttons, textfields, labels, etc. When initializing a new project, create a new package to store the Page Object Models in.

[[selenium-test-module-construction-of-framework-page-class.asciidoc_initialization]]
== Initialization

*Source folder*: _allure-app-under-test/src/main/java_

*Name*: `com.example.selenium.pages.YOUR_PROJECT`

Classes being created inside of this newly created package have to extend the *BasePage* class. As a result, a few abstract methods from *BasePage* have to be implemented.</pre>
</div>
</div>
<div class="paragraph">
<p>public class DemoPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>	}
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>The example above demonstrates a minimum valid Page Object class with all required methods included.

[[selenium-test-module-construction-of-framework-page-class.asciidoc_basepage-method-isloaded]]
=== BasePage method: isLoaded

The inherited method `isLoaded()` can be used to check if the current Page Object Model has been loaded correctly. There are multiple ways to verify a correctly loaded page. One example would be to check the actual page title with the expected page title.</pre>
</div>
</div>
<div class="paragraph">
<p>public boolean isLoaded() {
	if(getDriver().getTitle().equals(&quot;EXPECTED_TITLE&quot;)) {
		return true;
	}
	return false;
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[selenium-test-module-construction-of-framework-page-class.asciidoc_basepage-method-load]]
=== BasePage method: load

The method `load()` can be used to tell the webdriver to load a specific page.</pre>
</div>
</div>
<div class="paragraph">
<p>public void load() {
	getDriver().get(&quot;http://SOME_PAGE&quot;);
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[selenium-test-module-construction-of-framework-page-class.asciidoc_basepage-method-pagetitle]]
=== BasePage method: pageTitle

The `pageTitle()` method returns a String containing the page title.

[[selenium-test-module-construction-of-framework-page-class.asciidoc_creating-a-selector-variable]]
== Creating a selector variable

To initialize web elements, a large variety of selectors can be used.

We recommend to create a private and constant field for every web element you&#x2019;d like to represent in Java. Use the guide above to find the preferred selector and place it in the code below at &quot;WEB_ELEMENT_SELECTOR&quot;.</pre>
</div>
</div>
<div class="paragraph">
<p>private static final By someWebElementSelector = By.CSS(&quot;WEB_ELEMENT_SELECTOR&quot;);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>As soon as you created the selector above, you can make use of it to initialize a WebElement object.</pre>
</div>
</div>
<div class="paragraph">
<p>WebElement someWebElement = getDriver().findDynamicElement(someWebElementSelector);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>*Note*: The examples displayed in the _cssSelector.docx_ file use the Selenium method `driver.findElement()` to find elements. However, using this framework we recommend using `findDynamicElement()` or `findQuietlyElement().findDynamicElement()` allows waiting for dynamic elements, for example buttons that pop up.

[[selenium-test-module-construction-of-framework-page-class.asciidoc_creating-a-page-method]]
== Creating a page method

To interact with the page object, we recommend creating methods for each action.</pre>
</div>
</div>
<div class="paragraph">
<p>public void enterGoogleSearchInput(String query) {
	&#x2026;&#x200B;
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Creating a method like above allows the test case to run something like `googleSearchPage.enterGoogleSearchInput(&quot;Hello&quot;)` to interact with the page object.

[[selenium-test-module-construction-of-framework-page-class.asciidoc_naming-conventions]]
== Naming Conventions

For code uniformity and readability we provide a few method naming conventions.

[cols=3*,options=header]
|===

|Element
|Action
|Name (example)

|Form: Input text
|enter
|`enterUsernameInput()`

|
|is (label)
|`isUsernameInputPresent()`

|
|is (value)
|`isUsernameEmpty()`

|
|get
|`getUsernameValue()`

|Form: Label
|get
|`getCashValue()`

|
|is (value)
|`isCashValueEmpty()`

|
|is (label)
|`isCashLabelPresent()`

|Form: Submit Button
|submit
|`submitLoginForm()`

|
|is
|`isLoginFormPresent()`

|Page: Button
|click
|`clickInfoButton()`

|
|is
|`isInfoButtonpresent()`

|Checkbox
|set
|`setRememberMeCheckbox()`

|
|unset
|`unsetRememberMeCheckbox()`

|
|is (present)
|`isRememberMeCheckboxPresent()`

|
|is (value)
|`isRememberMeCheckboxSet()`

|Radio
|set
|`setMaleRadioValue(&quot;Woman&quot;)`

|
|is (present)
|`isMaleRadioPresent()`

|
|is (visible)
|`isMaleRadioVisible()`

|
|get
|`getSelectedMaleValue()`

|Elements (Tabs, Cards, Account, etc.)
|click
|`clickPositionTab()` / `clickMyBilanceCard()`

|
|is
|`isMyBilanceCardPresent()`

|Dropdown List
|select
|`selectAccountTypeValue(typeName)`

|
|unselect
|`unselectAccountTypeValue(typeName)`

|
|multiple select
|`selectAccountTypesValues(List typeNames)`

|
|is (list)
|`isAccountTypeDropdownListPresent()`

|
|is (element present)
|`isAccountTypeElementPresent(typeName)`

|
|is (element selected)
|`isAccountTypeSelected(typeName)`

|Link
|click
|`clickMoreLink()`

|
|is
|`isMoreLinkPresent()`

|Combobox
|select
|`selectSortCombobox()`

|
|is (present)
|`isSortComboboxPresent(name)`

|
|is (contain)
|`selectSortComboboxContain(name)`

|Element Attribute
|get
|`getPositionTabCss()`

|
|get
|`getMoreLinkHref()` / `getRememberMeCheckboxName()`

|===

:leveloffset: 3

:leveloffset: 3

The css selector is used to select elements from the HTML page.

Selection by element, class or id are the most common selectors.</pre>
</div>
</div>
<div class="paragraph">
<p>&lt;p class=&apos;myText&apos; id=&apos;123&apos;&gt;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>This text element (p) can be found by using any one of the following selectors:</pre>
</div>
</div>
<div class="paragraph">
<p>The HTML element: &quot;p&quot;. Note: in practical use this will be too generic, if a preceding text section is added, the selected element will change.
The class attribute preceded by &quot;.&quot;: &quot;.myText&quot;
The id attribute preceded by &quot;#&quot;: &quot;#123&quot;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[selenium-test-module-css-selectors.asciidoc_using-other-attributes]]
== Using other attributes

When a class or id attribute is not sufficient to identify the other attributes can be used as well, by using &quot;[attribute=value]&quot;: For example:</pre>
</div>
</div>
<div class="paragraph">
<p>&lt;a href=&apos;https://ns.nl/example.html&apos;&gt;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Can be selected by using the entire value: &quot;a[href=&apos;https://ns.nl/example.html&apos;\]&quot;. For selecting links starting with, containing, ending with see the list below.

[[selenium-test-module-css-selectors.asciidoc_using-sub-elements]]
== Using sub-elements
The css selectors can be stacked, by appending them:</pre>
</div>
</div>
<div class="paragraph">
<p>&lt;div id=&apos;1&apos;&gt;&lt;a href=&apos;ns.nl&apos;&gt;&lt;/div&gt;
&lt;div id=&apos;2&apos;&gt;&lt;a href=&apos;nsinternational.nl&apos;&gt;&lt;/div&gt;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>In the example above, the link element to nsinternational can be obtained by: &quot;#2 a&quot;.

[[selenium-test-module-css-selectors.asciidoc_when-possible-avoid]]
== When possible avoid

* Using paths of commonly used HTML elements within the containers (HTML: div). This will cause failures when a container is added, a common occurrence during development. E.g.: &quot;div div p&quot;. Use class or id instead, if those are not available, request them to be added in the production code.
* Magic order numbers. It is possible to get the second text element in its contained by using selector &quot;p:nth-child(2)&quot;. If the items are representing different items, ask the developer to add specific attributes, it is possible to request all items and iterated later, with a selector similar to &quot;.myList li&quot;. .

[[selenium-test-module-css-selectors.asciidoc_list]]
== List

A good list with CSS Selectors can be found at W3Schools: +
https://www.w3schools.com/cssref/css_selectors.asp

:leveloffset: 3

:leveloffset: 3

[[Selenium-Test-Module-Selenium-UFT-Comparison.asciidoc]]
= Selenium UFT Comparison

[cols=5*,options=header]
|===

|Subject
|HP UFT
|HP LeanFT
|Selenium
|Selenium IDE

|Language
|VBScript
|Same as Selenium
|Supports several languages
Java
|Javascript

|Learning curve
|Based on VBScript which is relatively easy to learn
|Less intuitive, more coding knowledge necessary
|Less intuitive, more coding skills necessary
|Record/playback possible. Generated code difficult to maintain

|*Project type*
|*Traditional*
|*Agile*
|*Agile*
|*Agile*

|*User oriented*
|*More Tester*
|*More Developer*
|*More Developer*
|*More Tester*

|Object recognition
|Test object identification and storage in object repository
|Same as UFT
|With Firebug
|Same as SE

|Customizations
|All is standard available
|Same as UFT
|Lots of customizations possible
|Less then SE

|Framework
|Needed
Exists in ATaaS
|
|Needed
Integration with Fitnesse, Cucumber, Gauche
|No Framework. Limited capabilities of the tool.

|Operating System support
|Runs on Windows
|Runs on Windows
|Multiple OS support. With Grid: testing at multiple devices at same time
|Plugin for Firefox

|*Application coverage*
|*Many*
|*Many*
|*Web only*
|*Web only*

|Multiple browsers
|In UFT 12.5 available
|In 12.5 available
|Multiple tests on multiple browser windows at once and faster support for new browser versions
|Multiple tests on multiple browser windows at once and faster support for new browser versions

|System Load
|High system load (RAM &amp; CPU usage)
|Lower load then HP UFT?
|Lower load then HP UFT
|Lower load then HP UFT

|ALM integration
|With HP ALM &#x2013; full integration
|
|Jira, Jenkins
Not with ALM tool
|Same as SE

|Integration with other tools
|A lot can be build, but many is already covered.
|More than UFT.
|Freeware and can be integrated with different open source tools
|Freeware and can be integrated with different open source tools

|Addins
|Add-ins necessary to access all capabilities of the tool &#x2013; license related
|Same as UFT
|See integration with other tools
|See integration with other tools

|Reporting
|Complete, link to ALM
|Same as UFT
|No native mechanism for generating reports, but multiple plugins available for reporting
|No native mechanism for generating reports, but multiple plugins available for reporting

|Support
|HP full support
|Same as UFT
|Limited support as it is open source
|Limited support as it is open source

|*License costs*
|*About 17K &#x2013; Capgemini price 5K.*
*Included in the S2 service charge*
|*Same price as HP UFT*
|*Free*
|*Free*
*limited functionality (no iterations / conditional statements)*

|iVAL Service
|ATaaS
|Not in a S2 service
|Not in a S2 service
|Not in a S2 service

|===

Bold for key differentiators.

Projects choose also an available resources and the knowledge of that resource.

Both: Framework determines the quality of automation. Needs to set up by someone with experience with the tool

:leveloffset: 3

:leveloffset: 3

[[Selenium-Test-Module-Run-on-different-browsers.asciidoc]]
= Run on different browsers

image::images/image59.png[]

To execute each test with chosen installed browser, it is required to use specific arguments in Run configuration.

image::images/image60.png[]

image::images/image61.png[]

As an argument (in &apos;Arguments&apos; tab) it is necessary to enter _-Dbrowser=_ with browser parameter name:

firefox
ie
phantomjs
chrome
chromeheadless
For example: _-Dbrowser=ie_

To restore default settings _-ea_ should be entered as an argument.

:leveloffset: 3

:leveloffset: 3

[[Selenium-Test-Module-Run-with-different-browser-options.asciidoc]]
= Browser options

To run browser with specific options during runtime, please use

_-DbrowserOptions=&quot;&lt; options &gt;&quot;_

    &gt; mvn test -DbrowserOptions=&quot;param1&quot;
    &gt; mvn test -DbrowserOptions=&quot;param1=value1&quot;

examples:

* One parameter _-DbrowserOptions=&quot;headless&quot;_
* One parameter _-DbrowserOptions=&quot;--incognito&quot;_
* Many parameters _-DbrowserOptions=&quot;headless;param1=value1;testEquals=FirstEquals=SecondEquals;--testMe&quot;_

List of options/capabilites supported by:

* https://github.com/SeleniumHQ/selenium/wiki/DesiredCapabilities[Selenium Grid]
* http://chromedriver.chromium.org/capabilities[Chrome Driver]

:leveloffset: 3

:leveloffset: 3

[[Selenium-Test-Module-Run-with-full-range-of-resolution.asciidoc]]
= Run with full range of resolution

image::images/image62.png[]

In order to execute tests in different browser resolutions, it is required to provide those resolutions as test parameter.

Test example with resolutions included may be found in _ResolutionTest_ test class

image::images/image63.png[]

Example of resolution notation is available in _ResolutionEnum_ class

image::images/image64.png[]

Test with given resolution parameters will be launched as may times as many resolutions are provided.

:leveloffset: 3

:leveloffset: 3

[[Selenium-Test-Module-Selenium-Best-Practices.asciidoc]]
= Selenium Best Practices

The following table displays a few best practices that should be taken into concideration when developing Selenium test cases.

[cols=2*,options=header]
|===

|Best Practices
|Description

|&quot;Keep it Simple&quot;
|Do not force use every Selenium feature available - Plan before creating the actual test cases

|Using Cucumber
|Cucumber can be used to create initial testcases for further decision making

|Supporting multiple browsers
|Test on multiple browsers (eventually in parallel) if the application is expected to support multiple environments

|Test reporting
|Make use of test reporting modules like TestNG which is included in the framework

|Maintainability
|Always be aware of the maintainability of tests - You should always be able to adapt to changes

|Testing types
|Which tests should be created? Rule of thumb: 70% Unit test cases, 20% Integration test cases and 10% UI Test cases

|Test data
|Thoughts before actually developing tests and choosing tools: Where to get test data from, how to reset test data

|===

:leveloffset: 3

[[master-mrchecker.asciidoc_web-api-module]]
=== Web API Module

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing= Web API Test Module

[[web-api-test-module.asciidoc_service-virtualization]]
== Service Virtualization

* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Web-API-Test-Module-What-is-service-virtualization.asciidoc[What is service virtualization]
* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Web-API-Test-Module-How-plug-in-service-virtualization-into-Application-Under-Test.asciidoc[How plug in service virtualization into Application Under Test]
* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Web-API-Test-Module-How-to-make-virtual-asset.asciidoc[How to make virtual asset]
* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Web-API-Test-Module-Smoke-Tests-virtualization.asciidoc[Smoke Tests virtualization]

:leveloffset: 3

:leveloffset: 3

[[Web-API-Test-Module-What-is-service-virtualization.asciidoc]]
= Is it doable to keep pace in QA with today&#x2019;s software agile approach?

DevOps + Microservices + Shift left + Time to Market == *? Service virtualization ?*

image::images/image72.png[]

Test pyramid

image::images/image73.png[]

[[web-api-test-module-what-is-service-virtualization.asciidoc_what-is-service-virtualization]]
== What is service virtualization

*Service Virtualization has become recognized as one of the best ways to speed up testing and accelerate your time to market.*

Service virtualization lets you automatically execute tests even when the application under test&#x2019;s dependent system components (APIs, third-party applications, etc.) cannot be properly accessed or configured for testing. By simulating these dependencies, you can ensure that your tests will encounter the appropriate dependency behaviour and data each and every time that they execute.

*Service virtualization is the simulation of interfaces &#x2013; not the virtualization of systems.*

According to http://en.wikipedia.org/wiki/Service_virtualization[Wikipedia&#x2019;s service virtualization] entry: _Service virtualization emulates the behaviour of software components to remove dependency constraints on development and testing teams. Such constraints occur in complex, interdependent environments when a component connected to the application under test is:_

* _Not yet completed_
* _Still evolving_
* _Controlled by a third-party or partner_
* _Available for testing only in a limited capacity or at inconvenient times_
* _Difficult to provision or configure in a test environment_
* _Needed for simultaneous access by different teams with varied test data setup and other requirements_
* _Restricted or costly to use for load and performance testing_

For instance, instead of virtualizing an entire database (and performing all associated test data management as well as setting up the database for every test session), you monitor how the application interacts with the database, then you emulate the related database behaviour (the SQL queries that are passed to the database, the corresponding result sets that are returned, and so forth).

[[web-api-test-module-what-is-service-virtualization.asciidoc_mocks,-stubs-and-virtual-services]]
== Mocks, stubs and virtual services

The most commonly discussed categories of test doubles are mocks, stubs and virtual services.

*Stub*: a minimal implementation of an interface that normally returns hardcoded data that is tightly coupled to the test suite. It is most useful when the suite of tests is simple and keeping the hardcoded data in the stub is not an issue. Some stubs are handwritten; some can be generated by tools. A stub is normally written by a developer for personal use. It can be shared with testers, but wider sharing is typically limited by interoperability issues related to software platform and deployment infrastructure dependencies that were hardcoded. A common practice is when a stub works in-process directly with classes, methods, and functions for the unit, module, and acceptance testing. Some developers will say that a stub can also be primed, but you cannot verify an invocation on a stub. Stubs can also be communicating &quot;over the wire&quot;, for example, HTTP, but some would argue that they should be called virtual services in that case.

*Mock*: a programmable interface observer, that verifies outputs against expectations defined by the test. It is frequently created using a third party library, for example in Java that is Mockito, JMock or WireMock. It is most useful when you have a large suite of tests and a stub will not be sufficient because each test needs a different data set up and maintaining them in a stub would be costly. The mock lets us keep the data set-up in the test. A mock is normally written by a developer for personal use but it can be shared with testers. However, wider sharing is typically limited by interoperability issues related to software platform and deployment infrastructure dependencies that were hardcoded. They are most often work-in-progress directly with classes, methods, and functions for a unit, module, and acceptance testing. Mock provides responses based on a given request satisfying predefined criteria (also called request or parameter matching). A mock also focuses on interactions rather than state so mocks are usually stateful. For example, you can verify how many times a given method was called or the order of calls made to a given object.

*Virtual service*: a test double often provided as a Software-as-a-Service (SaaS), is always called remotely, and is never working in-process directly with methods or functions. A virtual service is often created by recording traffic using one of the service virtualization platforms instead of building the interaction pattern from scratch based on interface or API documentation. A virtual service can be used to establish a common ground for teams to communicate and facilitate artefact sharing with other development teams as well as testing teams. A virtual service is called remotely (over HTTP, TCP, etc.) normally supports multiple protocols (e.g. HTTP, MQ, TCP, etc.), while a stub or mock normally supports only one. Sometimes virtual services will require users to authorize, especially when deployed in environments with enterprise-wide visibility. Service virtualization tools used to create virtual services will most often have user interfaces that allow less tech-savvy software testers to hit the ground running, before diving into the details of how specific protocols work. They are sometimes backed by a database. They can also simulate non-functional characteristics of systems such as response times or slow connections. You can sometimes find virtual services that provide a set of stubbed responses for given request criteria and pass every other request to a live backend system (partial stubbing). Similar to mocks, virtual services can have quite complex request matchers, that allow having one response returned for many different types of requests. Sometimes, virtual services simulate system behaviours by constructing parts of the response based on request attributes and data.

It is often difficult to definitely say which of the following categories a test double fits into. They should be treated as spectrums rather than strict definitions.

:leveloffset: 3

:leveloffset: 3

[[Web-API-Test-Module-How-plug-in-service-virtualization-into-Application-Under-Test.asciidoc]]
= Plug in service virtualization

[[web-api-test-module-how-plug-in-service-virtualization-into-application-under-test.asciidoc_classic-application-structure]]
== Classic application structure

image::images/image74.png[]

This is quite common application structure, where we have either in Application Under Test (AUT):

* UI / GUI
* WebAPI
* 3rd party service

[[web-api-test-module-how-plug-in-service-virtualization-into-application-under-test.asciidoc_classic-application-structure-with-virtualization]]
== Classic application structure with virtualization

image::images/image75.png[]

This classic application is quite fragile for development and/or test process. Special while, component (WebAPI) connected to the application under test is:

* Not yet completed
* Still evolving
* Controlled by a third-party or partner
* Available for testing only in limited capacity or at inconvenient times
* Difficult to provision or configure in a test environment
* Needed for simultaneous access by different teams with varied test data setup and other requirements
* Restricted or costly to use for load and performance testing

Full list of such &quot;classic application structure&quot; limitation you can find here https://github.com/devonfw/devonfw-testing/wiki/What-is-service-virtualization[What-is-service-virtualization].

*To address such list of impediments, service virtualization is the key solution.*

For simplicity, AUT connects to other component by TCP/IP protocol. Therefore AUT has IP address and port number where given components operates. _To plug in virtualization server, author of AUT ought to switch IP and port instead from real endpoint component (WebAPI) to &quot;proxy server&quot;_ Finally &quot;proxy server&quot; maps requests comes from AUT with either virtual assets or real endpoint component (WebAPI) How maps work in such &quot;proxy server&quot; have a look here https://github.com/devonfw/devonfw-testing/wiki/How-to-make-virtual-asset[How-to-make-virtual-asset]

Therefore AUT is build either with:

* switchable property file taken while startup

or

* &quot;on fly&quot; operation to change IP and ports of connected components.

[[web-api-test-module-how-plug-in-service-virtualization-into-application-under-test.asciidoc_classic-app-structure-with-full-scope---binding-in-service-virtualization]]
== CLassic APP structure with full scope - Binding in service virtualization

image::images/image76.png[]

:leveloffset: 3

:leveloffset: 3

[[Web-API-Test-Module-How-to-make-virtual-asset.asciidoc]]
= How to make virtual asset

This can be done in 4 ways:

* Record all traffic (Mappings and Responses) comes through proxy - by UI
* Record all traffic (Mappings and Responses) comes through proxy - by Code
* Create manually Mappings and Responses by text files
* Create manually Mappings and Responses by code

[[web-api-test-module-how-to-make-virtual-asset.asciidoc_record-all-traffic-mappings-and-responses-comes-through-proxy---ui]]
== Record all traffic (Mappings and Responses) comes through proxy - UI

Full article here http://wiremock.org/docs/record-playback/[Wiremock record-playback].

First, start an instance of http://wiremock.org/docs/running-standalone[WireMock running standalone]. Once that&#x2019;s running visit the recorder UI page at http://localhost:8080/__admin/recorder (assuming you started WireMock on the default port of 8080).

image::images/image77.png[]

Enter the URL you wish to record from in the target URL field and click the Record button. You can use http://example.mocklab.io to try it out.

Now you need to make a request through WireMock to the target API so that it can be recorded. If you&#x2019;re using the example URL, you can generate a request using curl:

    $ curl http://localhost:8080/recordables/123

Now click stop. You should see a message indicating that one stub was captured.

You should also see that a file has been created called something like _recordables_123-40a93c4a-d378-4e07-8321-6158d5dbcb29.json_ under the mappings directory created when WireMock started up, and that a new mapping has appeared at http://localhost:8080/__admin/mappings.

Requesting the same URL again (possibly disabling your wifi first if you want firm proof) will now serve the recorded result:</pre>
</div>
</div>
<div class="paragraph">
<p>$ curl <a href="http://localhost:8080/recordables/123" class="bare">http://localhost:8080/recordables/123</a></p>
</div>
<div class="paragraph">
<p>{
&quot;message&quot;: &quot;Congratulations on your first recording!&quot;
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[web-api-test-module-how-to-make-virtual-asset.asciidoc_record-all-traffic-mappings-and-responses-comes-through-proxy---by-code]]
== Record all traffic (Mappings and Responses) comes through proxy - by Code

Example how such record can be achive</pre>
</div>
</div>
<div class="paragraph">
<p>@Test
public void startRecording() {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>SnapshotRecordResult recordedMappings;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>DriverManager.getDriverVirtualService()
        .start();
DriverManager.getDriverVirtualService()
        .startRecording(&quot;http://example.mocklab.io&quot;);
recordedMappings = DriverManager.getDriverVirtualService()
        .stopRecording();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>BFLogger.logDebug(&quot;Recorded messages: &quot; + recordedMappings.toString());</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[web-api-test-module-how-to-make-virtual-asset.asciidoc_create-manually-mappings-and-responses-by-text-files]]
== Create manually Mappings and Responses by text files

EMPTY

[[web-api-test-module-how-to-make-virtual-asset.asciidoc_create-manually-mappings-and-responses-by-code]]
== Create manually Mappings and Responses by code

Link to full file structure: https://github.com/devonfw/devonfw-testing/blob/develop/mrchecker-framework-modules/mrchecker-webapi-module/src/test/java/com/capgemini/mrchecker/endpoint/rest/REST_FarenheitToCelsiusMethod_Test.java[REST_FarenheitToCelsiusMethod_Test.java]

[[web-api-test-module-how-to-make-virtual-asset.asciidoc_start-up-virtual-server]]
=== Start up Virtual Server</pre>
</div>
</div>
<div class="paragraph">
<p>public void startVirtualServer() {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>// Start Virtual Server
WireMockServer driverVirtualService = DriverManager.getDriverVirtualService();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// Get Virtual Server running http and https ports
int httpPort = driverVirtualService.port();
int httpsPort = driverVirtualService.httpsPort();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// Print is Virtual server running
BFLogger.logDebug(&quot;Is Virtual server running: &quot; + driverVirtualService.isRunning());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    String baseURI = &quot;http://localhost&quot;;
    endpointBaseUri = baseURI + &quot;:&quot; + httpPort;
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[web-api-test-module-how-to-make-virtual-asset.asciidoc_plug-in-virtual-asset]]
=== Plug in virtual asset

REST_FarenheitToCelsiusMethod_Test.java</pre>
</div>
</div>
<div class="paragraph">
<p>public void activateVirtualAsset() {
    /*
    * ----------
    * Mock response. Map request with virtual asset from file
    * -----------
    */
    BFLogger.logInfo(&quot;#1 Create Stub content message&quot;);
    BFLogger.logInfo(&quot;#2 Add resource to virtual server&quot;);
    String restResourceUrl = &quot;/some/thing&quot;;
    String restResponseBody = &quot;{ \&quot;FahrenheitToCelsiusResponse\&quot;:{\&quot;FahrenheitToCelsiusResult\&quot;:37.7777777777778}}&quot;;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>new StubREST_Builder //For active virtual server ...
        .StubBuilder(restResourceUrl) //Activate mapping, for this Url AND
        .setResponse(restResponseBody) //Send this response  AND
        .setStatusCode(200) // With status code 200 FINALLY
        .build(); //Set and save mapping.</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Link to full file structure: https://github.com/devonfw/devonfw-testing/blob/develop/mrchecker-framework-modules/mrchecker-webapi-module/src/main/java/com/capgemini/mrchecker/webapi/endpoint/stubs/StubREST_Builder.java[StubREST_Builder.java]

Source link to http://wiremock.org/docs/stubbing/[How to create Stub].

StubREST_Builder.java</pre>
</div>
</div>
<div class="paragraph">
<p>public class StubREST_Builder {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>// required parameters
private String endpointURI;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// optional parameters
private int statusCode;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public String getEndpointURI() {
    return endpointURI;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public int getStatusCode() {
    return statusCode;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private StubREST_Builder(StubBuilder builder) {
    this.endpointURI = builder.endpointURI;
    this.statusCode = builder.statusCode;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// Builder Class
public static class StubBuilder {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// required parameters
private String endpointURI;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// optional parameters
private int     statusCode  = 200;
private String  response    = &quot;{ \&quot;message\&quot;: \&quot;Hello\&quot; }&quot;;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public StubBuilder(String endpointURI) {
    this.endpointURI = endpointURI;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public StubBuilder setStatusCode(int statusCode) {
    this.statusCode = statusCode;
    return this;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public StubBuilder setResponse(String response) {
    this.response = response;
    return this;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public StubREST_Builder build() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// GET
DriverManager.getDriverVirtualService()
        .givenThat(
                // Given that request with ...
                get(urlMatching(this.endpointURI))
                        .withHeader(&quot;Content-Type&quot;, equalTo(ContentType.JSON.toString()))
                        // Return given response ...
                        .willReturn(aResponse()
                                .withStatus(this.statusCode)
                                .withHeader(&quot;Content-Type&quot;, ContentType.JSON.toString())
                                .withBody(this.response)
                                .withTransformers(&quot;body-transformer&quot;)));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// POST
DriverManager.getDriverVirtualService()
        .givenThat(
                // Given that request with ...
                post(urlMatching(this.endpointURI))
                        .withHeader(&quot;Content-Type&quot;, equalTo(ContentType.JSON.toString()))
                        // Return given response ...
                        .willReturn(aResponse()
                                .withStatus(this.statusCode)
                                .withHeader(&quot;Content-Type&quot;, ContentType.JSON.toString())
                                .withBody(this.response)
                                .withTransformers(&quot;body-transformer&quot;)));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// PUT
DriverManager.getDriverVirtualService()
        .givenThat(
                // Given that request with ...
                put(urlMatching(this.endpointURI))
                        .withHeader(&quot;Content-Type&quot;, equalTo(ContentType.JSON.toString()))
                        // Return given response ...
                        .willReturn(aResponse()
                                .withStatus(this.statusCode)
                                .withHeader(&quot;Content-Type&quot;, ContentType.JSON.toString())
                                .withBody(this.response)
                                .withTransformers(&quot;body-transformer&quot;)));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// DELETE
DriverManager.getDriverVirtualService()
        .givenThat(
                // Given that request with ...
                delete(urlMatching(this.endpointURI))
                        .withHeader(&quot;Content-Type&quot;, equalTo(ContentType.JSON.toString()))
                        // Return given response ...
                        .willReturn(aResponse()
                                .withStatus(this.statusCode)
                                .withHeader(&quot;Content-Type&quot;, ContentType.JSON.toString())
                                .withBody(this.response)
                                .withTransformers(&quot;body-transformer&quot;)));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// CATCH any other requests
DriverManager.getDriverVirtualService()
        .givenThat(
                any(anyUrl())
                        .atPriority(10)
                        .willReturn(aResponse()
                                .withStatus(404)
                                .withHeader(&quot;Content-Type&quot;, ContentType.JSON.toString())
                                .withBody(&quot;{\&quot;status\&quot;:\&quot;Error\&quot;,\&quot;message\&quot;:\&quot;Endpoint not found\&quot;}&quot;)
                                .withTransformers(&quot;body-transformer&quot;)));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>            return new StubREST_Builder(this);
        }
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 3

[[Web-API-Test-Module-Smoke-Tests-virtualization.asciidoc]]
= Start virtual server

The following picture presents process of executing Smoke Tests in virtualized environment:

image::images/image78.png[]

[[web-api-test-module-smoke-tests-virtualization.asciidoc_install-docker-service]]
== Install docker service

If docker is not actually installed on machine (this should be checked during C2C creation) then install docker, docker-compose, apache2-utils, openssl (You can use *script* to install docker &amp; docker-compose OR refer to this *post* and add Alias for this machine &lt;C2C_Alias_Name&gt;):

* run the script
* sudo apt-get install -y apache2-utils

[[web-api-test-module-smoke-tests-virtualization.asciidoc_build-docker-image]]
== Build docker image

*Dockerfile:*</pre>
</div>
</div>
<div class="paragraph">
<p>FROM docker.xxx.com/ubuntu:16.04
MAINTAINER Maintainer Name &quot;maintainer@email.adress&quot;
LABEL name=ubuntu_java \
           version=v1-8.0 \
           base=&quot;ubuntu:16.04&quot; \
           build_date=&quot;03-22-2018&quot; \
           java=&quot;1.8.0_162&quot; \
           wiremock=&quot;2.14.0&quot; \
           description=&quot;Docker to use with Ubuntu, JAVA and WIREMOCK &quot;</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="update-and-install-needed-applications">75.1.9. Update and install needed applications</h4>
<div class="paragraph">
<p>COPY 80proxy /etc/apt/apt.conf.d/80proxy
RUN apt-get update
RUN apt-get install -y \
            wget \
            libfontconfig \
            unzip \
            zip
            ksh \
            curl \
            git</p>
</div>
<div class="paragraph">
<p>COPY wgetrc /etc/wgetrc</p>
</div>
<div class="paragraph">
<p>#Env parameters</p>
</div>
<div class="sect5">
<h6 id="java-part">JAVA PART</h6>
<div class="paragraph">
<p>#TO UPDATE:please verify url link to JDK <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" class="bare">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a>
##Download and install JAVA JDK8
RUN mkdir /opt/jdk
RUN wget -qq --header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot; <a href="http://download.oracle.com/otn-pub/java/jdk/8u162-b12/0da788060d494f509bf8624735fa2f1/jdk-8u162-linux-x64.tar.gz" class="bare">http://download.oracle.com/otn-pub/java/jdk/8u162-b12/0da788060d494f509bf8624735fa2f1/jdk-8u162-linux-x64.tar.gz</a> &amp;&amp; tar -zxf jdk-8u162-linux-x64.tar.gz -C /opt/jdk &amp;&amp; rm jdk-8u162-linux-x64.tar.gz &amp;&amp; update-alternatives --install /usr/bin/javac javac /opt/jdk/jdk1.8.0_162/bin/javac 100 &amp;&amp; java -version &amp;&amp; chmod 755 -R /opt/jdk/jdk1.8.0_162/
RUN java -version</p>
</div>
<div class="paragraph">
<p>##Add user
RUN useradd -u 29001 -g 100 srvpwiredev</p>
</div>
<div class="paragraph">
<p>##Add app
RUN mkdir -p -m 777 /app
COPY wiremock-standalone-2.14.0.jar /app/wiremock-standalone-2.14.0.jar</p>
</div>
<div class="paragraph">
<p>##Expose port
EXPOSE 8080</p>
</div>
<div class="paragraph">
<p>##Set workdir
WORKDIR /App</p>
</div>
<div class="paragraph">
<p>##Run app
CDM java -jar /app/wiremock-standalone-2.14.0.jar</p>
</div>
<div class="listingblock">
<div class="content">
<pre>To build docker image and push it to repository execute following steps with specified version:</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="build-image">Build image</h5>
<div class="paragraph">
<p>sudo docker build -t docker.xxx.com/app/build/wiremock:v2.14.0.</p>
</div>
</div>
<div class="sect4">
<h5 id="push-image">Push image</h5>
<div class="paragraph">
<p>sudo docker login docker.xxx.com
sudo docker push docker.xxx.com/app/build/wiremock:v2.14.0.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[web-api-test-module-smoke-tests-virtualization.asciidoc_run-docker-image]]
== Run docker image

To run docker image execute following command:

    sudo docker run -td -p 8080:8080 -v /home/wiremock/repo/app/docker/QA/mappings:/app/mappings -v /home/wiremock/repo/app/docker/QA/__files:/app/__files --restart always docker.xxx.com/app/build/wiremock:v2.14.0.

Where:

*-p* - publish a container&#x2019;s port to the host

*-v* - bind mount a volume. WireMock server creates two directories under the current one: mappings and __files. It is needed to mount directories with already created mappings and responses to make it working.

*-restart always* - restart policy to apply when a container exists

All of run parameters are described in: https://docs.docker.com/engine/reference/run/[official docker documentation]

[[Web-API-Test-Module-Smoke-Tests-virtualization.asciidoc]]
= Map requests with virtual assets

*What is WireMock?*

WireMock is an HTTP mock server. At its core it is web server that can be primed to serve canned responses to particular requests (stubing) and that captures incoming requests so that they can be checked later (verification). It also has an assortment of other useful features including record/playback of interactions with other APIs, injection of faults and delays, simulation of stateful behaviour.

Full documentation can be found under following link: http://wiremock.org/docs[WireMock]

[[web-api-test-module-smoke-tests-virtualization.asciidoc_record--create-virtual-assets-mappings]]
== Record / create virtual assets mappings

*Record*

WireMock can create stub mappings from requests it has received. Combined with its proxying feature this allows you to &quot;record&quot; stub mappings from interaction with existing APIs.

Record and playback (Legacy): http://wiremock.org/docs/record-playback-legacy/[documentation]

    java -jar wiremock-standalone-2.16.0.jar --proxy-all=&quot;http://search.twitter.com&quot; --record-mappings --verbose

Once it&#x2019;s started and request is sent to it then it will be redirected to &quot;http://search.twitter.com&quot; and traffic (response) is saved to files in mappings and __files directories for futher use.

Record and playback (New): http://wiremock.org/docs/record-playback/[documentation]

[[web-api-test-module-smoke-tests-virtualization.asciidoc_enable-mappings-in-virtual-server]]
== Enable mappings in virtual server

When the WireMock server starts it creates two directories uder the current one: mappings and __files. To create a stub it is needed to drop a file with a .son extension under mappings.

*Run docker with mounted volumes*

Mappings are in repository. It is needed to mount directories with already created mappings and responses to make it working:

    sudo docker run -td -p 8080:8080 -v /home/wiremock/repo/app/docker/QA/mappings:/app/mappings -v /home/wiremock/repo/app/docker/QA/__files:/app/__files --restart always docker.xxx.com/app/build/wiremock:v2.14.0.

Description of how to build and run docker is available in: https://docs.docker.com/engine/reference/run/[Docker run command description]

*Recorded mappings*

Rrecorded mappings are in the project repository.

[[web-api-test-module-smoke-tests-virtualization.asciidoc_create-user-and-map-him-to-docker-user]]
== Create user and map him to docker user

To Enable connection from Jenkins to Virtual Server (C2C) it is needed to create user and map him to docker group user. It can be done using following command:

    adduser -G docker -m wiremock

To set the password for wiremock user:

    passwd wiremock

[[web-api-test-module-smoke-tests-virtualization.asciidoc_create-ssh-private-and-public-keys-for-wiremock-user]]
== Create SSH private and public keys for wiremock user

SSH keys serve as a means of identifying yourself to an SSH server using https://en.wikipedia.org/wiki/Public-key_cryptography[public-key cryptography] and https://en.wikipedia.org/wiki/Challenge%E2%80%93response_authentication[challenge-response authentication]. One Immediate advantage this method has over traditional password is that you can be authenticated by the server without ever having to send your password over the network.

To create SSH key, log in as wiremock (previously created user).

    su wiremock

The .ssh directory is not by default created below user home directody. So, it is needed to create it:

    mkdir ~/.ssh

Now we can proceed with creating RSA key using ssh-keygen (tool for creating new authentication key pairs for SSH):

    ssh-keygen -t rsa

Key should be created under /.ssh/id_rsa Appending the public keys to authorized_keys:

    wiremock@vc2crptXXXXXXXn:~/ssh$ cat id_rsa.pub &gt;&gt; authorized_keys

[[web-api-test-module-smoke-tests-virtualization.asciidoc_install-ssh-key-in-jenkins]]
== Install SSH key in Jenkins

To add ssh key to Jenkins go to credentials in location with your job. Choose Folder within credentials. Then &apos;global credentials&apos;. And &apos;Add credentials&apos;. Fill the fields. And finally entry should be created.

[[web-api-test-module-smoke-tests-virtualization.asciidoc_build-jenkins-groovy-script]]
== Build Jenkins Groovy script

Description of how to use SSH Agent plugin in Jenkins pipeline can be found under: https://www.karthikeyan.tech/2017/09/ssh-agent-blue-ocean-via-jenkins.html

Example of use:</pre>
</div>
</div>
<div class="paragraph">
<p>sshagent (credentials: [env.WIREMOCK_CREDENTIALS]) {
     sh &quot;&quot;&quot;
         ssh -T -o StrictHostKeyChecking=no -l ${env.WIREMOCK_USERNAME} ${env.WIREMOCK_IP_ADRESS} &quot;docker container restart ${env.WIREMOCK_CONTAINER_NAME}&quot;
     &quot;&quot;&quot;
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Where: env.WIREMOCK_CREDENTIALS is a credential id of previously created wiremock credentials. Now as it is presented we can execute commands on remote machine, where in ssh command: env.WIREMOCK_USERNAME - user name of user connected with configured private key env.WIREMOCK_IP_ADRESS - ip address of machine where this user with this private key exists

[[web-api-test-module-smoke-tests-virtualization.asciidoc_pull-repository-with-virtual-assets]]
== Pull repository with virtual assets

To pull the repository on remote kacine it is needed to use previously described SSH Agent plugin Example of use:</pre>
</div>
</div>
<div class="paragraph">
<p>sshagent (credentials: [env.WIREMOCK_CREDENTIALS]) {
withCredentials([usernamePassword(credentialsId: end.STASH_CREDENTIALS, passwordVariable: &apos;PASS&apos;, usernameVariable: &apos;USER&apos;)]) {
     sh &quot;&quot;&quot;
         ssh -T -o StrictHostKeyChecking=no -l ${env.WIREMOCK_USERNAME} ${env.WIREMOCK_IP_ADRESS} &quot;cd ~/${env.APPLICATION_DIRECTORY_WIREMOCK}/${env.PROJET_HOME}; git fetch <a href="https://&amp;USER:$PASS@${env.GIT_WITHOUT_HTTPS}" class="bare">https://&amp;USER:$PASS@${env.GIT_WITHOUT_HTTPS}</a> ${env.GIT_BRANCH}; git reset --hard FETCH_HEAD; git clean -df&quot;
      &quot;&quot;&quot;
    }
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Where:

*withCredentials* allows various kinds of credentials (secrets) to be used in idiosyncratic ways. Each binding will define an environment variable active within the scope of the step. Then needed commands are executed:

`cd &#x2026;&#x200B;` - command will change from current directory to specified directory with git repository

`git fetch &#x2026;&#x200B; ;git reset &#x2026;&#x200B; ;git clean &#x2026;&#x200B;` - pull from GIT branch. Git pull or checkout are not used here to prevent situation with wrong coding between Mac OSX/Linux etc.

*PLEASE remember that when using this script for the first time code from previous block should be turned to:*</pre>
</div>
</div>
<div class="paragraph">
<p>stage(&quot;ssh-agent&quot;){
        sshagent (credentials: [env.WIREMOCK_CREDENTIALS]) {
            withCredentials([usernamePassword(credentialsId: end.STASH_CREDENTIALS, passwordVariable: &apos;PASS&apos;, usernameVariable: &apos;USER&apos;)]) {
                sh &quot;&quot;&quot;
                        ssh -T -o StrictHostKeyChecking=no -l ${env.WIREMOCK_USERNAME} ${env.WIREMOCK_IP_ADRESS} &quot;cd ~/${env.APPLICATION_DIRECTORY_WIREMOCK} ;git clone --depth=1 --branch=develop <a href="https://&amp;USER:$PASS@${env.GIT_WITHOUT_HTTPS}" '" class="bare">https://&amp;USER:$PASS@${env.GIT_WITHOUT_HTTPS}&quot;&apos;</a>;
                &quot;&quot;&quot;
    }
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[Web-API-Test-Module-Smoke-Tests-virtualization.asciidoc]]
= Install application with Smoke environment

[[web-api-test-module-smoke-tests-virtualization.asciidoc_update-properties-settings-file]]
== Update properties settings file

New settings file is pushed to the repository. Example configuration:</pre>
</div>
</div>
<div class="paragraph">
<p>&#x2026;&#x200B;
   &lt;key&gt;autocomplete&lt;/key&gt;
   &lt;string&gt;<a href="http://server:port&lt;/string&gt;" class="bare">http://server:port&lt;/string&gt;</a>;
   &lt;key&gt;benefitsummary&lt;/key&gt;
   &lt;string&gt;<a href="http://server:port&lt;/string&gt;" class="bare">http://server:port&lt;/string&gt;</a>;
   &lt;key&gt;checkscan&lt;/key&gt;
   &lt;string&gt;<a href="http://server:port&lt;/string&gt;" class="bare">http://server:port&lt;/string&gt;</a>;
   &lt;key&gt;dpesb&lt;/key&gt;
   &lt;string&gt;<a href="http://server:port&lt;/string&gt;" class="bare">http://server:port&lt;/string&gt;</a>;
&#x2026;&#x200B;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Adress of service (backend) should be changed to wiremock addres as it is shown on listing to change the default route.

[[web-api-test-module-smoke-tests-virtualization.asciidoc_build-application-with-updated-properties-file]]
== Build application with updated properties file

New version of application are prepared by Jenkins job.

[[web-api-test-module-smoke-tests-virtualization.asciidoc_install-application-on-target-properties-file]]
== Install application on target properties file

Installation of application is actually executed in non-automated way using SeeTest environment.

[[Web-API-Test-Module-Smoke-Tests-virtualization.asciidoc]]
= UI tests

[[web-api-test-module-smoke-tests-virtualization.asciidoc_run-jenkins-job]]
== Run Jenkins job

*Jenkinsfile:*</pre>
</div>
</div>
<div class="paragraph">
<p>def properties = [</p>
</div>
<div class="literalblock">
<div class="content">
<pre>JENKINS_LABELS                                 : &apos;PWI_LINUX_DEV&apos;,
APPLICATION_FOLDER                             : &apos;app_dir&apos;,
PROJECT_HOME                                   : &apos;app_home_folder&apos;,</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>//WIREMOCK
WIREMOCK_CREDENTIALS                           : &apos;vc2crptXXXXXXn&apos;,
WIREMOCK_USERNAME                              : &apos;wiremock&apos;,
WIREMOCK_ADDRESS                               : &apos;http://vc2crptXXXXXXn.xxx.com:8080&apos;,
WIREMOCK_IP_ADRESS                             : &apos;10.196.67.XXX&apos;,
WIREMOCK_CONTAINER_NAME                        : &apos;wiremock&apos;,
APPLICATION_DIRECTORY_WIREMOCK                 : &apos;repo&apos;,</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>//GIT
GIT_CREDENTIALS                                : &apos;e47742cc-bb66-4321-2341-a2342er24f2&apos;,
GIT_BRANCH                                     : &apos;develop&apos;,
GIT_SSH                                        : &apos;ssh://git@stash.xxx.com/app/app.git&apos;
GIT_HTTPS                                      : &apos;HTTPS://git@stash.xxx.com/app/app.git&apos;,</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>STASH_CREDENTIALS                              : &apos;e47742cc-bb66-4321-2341-a2342er24f2&apos;,</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>//DOCKER
ARTIFACTORY_USER_CREDENTIALS                   : &apos;e47742cc-bb66-4321-2341-a2342er24f2&apos;,
SEETEST_DOCKER_IMAGE                           : &apos;docker.xxx.com/project/images/app:v1-8.3&apos;,</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>          //SEETEST_DOCKER_IMAGE
          SEETEST_APPLICATION_FOLDER                     : &apos;seetest_dir&apos;,
          SEETEST_PROJECT_HOME                           : &apos;Automated Scripts&apos;,
          SEETEST_GIT_SSH                                : &apos;ssh://git@stash.xxx.com/pr/seetest_automation_cucumber.git&apos;
          SEETEST_GIT_BRANCH                             : &apos;develop&apos;,
          SEETEST_GRID_USER_CREDENTIALS                  : &apos;e47742cc-bb66-4321-2341-a2342er24f2&apos;,
          SEETEST_CUCUMBER_TAG                           : &apos;@Virtualization&apos;,
          SEETEST_CLOUD_NAME                             : &apos;Core Group&apos;,
          SEETEST_IOS_VERSION                            : &apos;11&apos;,
          SEETEST_IOS_APP_URL                            : &apos;&apos;,
          SEETEST_INSTALL_APP                            : &apos;No&apos;,
          SEETEST_APP_ENVIRONMENT                        : &apos;SmokeTests&apos;,
          SEETEST_DEVICE_QUERY                           : &apos;&apos;,
]</pre>
</div>
</div>
<div class="paragraph">
<p>node(properties.JENKINS_LABELS) {
    try {
        prepareEnv(properties)
        gitCheckout()
        stageStartVirtualServer()
        stageMapApiRequests()
        stageInstallApplication()
        stageUITests()
     } catch(Exception ex) {
        currentBuild.result = &apos;FAILURE&apos;
        error = &apos;Error&apos; + ex
     }
}</p>
</div>
<div class="paragraph">
<p>private void prepareEnv(properties) {
    cleanWorkspace()
    overrideProperties(properties)
    setWorkspace()
}</p>
</div>
<div class="paragraph">
<p>private void gitCheckout() {
    dir(env.APPLICATION_FOLDER) {
        checkout([$class: &apos;GitSCM&apos;, branches: [[Web-API-Test-Module-Smoke-Tests-virtualization.asciidoc_name: env.GIT_BRANCH]], doGenerateSubmoduleConfiguration: false, extensions: [[Web-API-Test-Module-Smoke-Tests-virtualization.asciidoc_$class: &apos;CloneOption&apos;, depth: 0, noTags: false, reference: &apos;&apos;, shallow: false, timeout: 50]], gitTool: &apos;Default&apos;, submoduleCfg: [], userRemoteConfigs: [[Web-API-Test-Module-Smoke-Tests-virtualization.asciidoc_credentialsId: env.GIT_CREDENTIALS, url: env.GIT_SSH]])
     }
}</p>
</div>
<div class="paragraph">
<p>private void stageStartVirtualServer() {
    def module = load &quot;${env.SUBMODULES_DIR}/stageStartVirtualServer.groovy&quot;
    module()
}</p>
</div>
<div class="paragraph">
<p>private void stageMapApiRequests() {
    def module = load &quot;${env.SUBMODULES_DIR}/stageMapApiRequests.groovy&quot;
    module()
}</p>
</div>
<div class="paragraph">
<p>private void stageInstallApplication() {
    def module = load &quot;${env.SUBMODULES_DIR}/stageInstallApplication.groovy&quot;
    module()
}</p>
</div>
<div class="paragraph">
<p>private void stageUITests() {
    def module = load &quot;${env.SUBMODULES_DIR}/stageUITests.groovy&quot;
    module()
}</p>
</div>
<div class="paragraph">
<p>private void setWorkspace() {
    String workspace = pwd()
    env.APPLICATION_DIRECTORY = &quot;/${env.APPLICATION_DIRECTORY}&quot;
    env.WORKSPACE_LOCAL - workspace + env.APPLICATION_DIRECTORY
    env.SEETEST_PROJECT_HOME_ABSOLute_PATH = &quot;${workspace}/${env.SEETEST_APPLICATION_FOLDER}/${env.SEETEST_PROJECT_HOME}&quot;
    env.SUBMODULES_DIR = env.WORKSPACE_LOCAL + &quot;/pipelines/SmokeTests.submodules&quot;
    env.COMMONS_DIR    = env.WORKSPACE_LOCAL + &quot;/pipelines/commons&quot;
}</p>
</div>
<div class="paragraph">
<p>/*
    function ovverrides env vales based on provided properties
*/
private void overrideProperties(properties) {
    for (param in properties) {
        if (env.(param.key) == null) {
           echo &quot;Adding parameter &apos;${param.key}&apos; with default value: &apos;$param.value}&apos;&quot;
           env.(param.key) = param.value
        } else {
           echo &quot;Parameter &apos;${param.key}&apos; has overriden value: &apos;${env.(param.key)}&apos;&quot;
        }
     }</p>
</div>
<div class="literalblock">
<div class="content">
<pre>     echo sh(script: &quot;env | sort&quot;, returnStdout: true)
}</pre>
</div>
</div>
<div class="paragraph">
<p>private void cleanWorkspace() {
   sh &apos;rm-rf *&apos;
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>stageStartVirtualServer.groovy:</pre>
</div>
</div>
<div class="paragraph">
<p>def call () {
    stage(&quot;Check virtual server&quot;) {
        def statusCode</p>
</div>
<div class="literalblock">
<div class="content">
<pre>try {
    def response = httpRequest &quot;${env.WIREMOCK_ADDRESS}/__admin/&quot;
    statusCode = response.status
} catch(Exception ex) {
    currentBuild.result = &apos;FAILURE&apos;
    error &apos;WireMock server os unreachable.&apos;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        if(statusCode !=200) {
            currentBuild.result = &apos;FAILURE&apos;
            error &apos;WireMock server is unreachable. Return code: ${statusCode}&apos;
        }
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>stageMapApiRequests.groovy:</pre>
</div>
</div>
<div class="paragraph">
<p>def call() {
    stage(&quot;Map API requests with virtual assets&quot;) {
        checkoutRepository()
        restartWiremock()
        checkWiremockStatus()
     }
}</p>
</div>
<div class="paragraph">
<p>private checkoutRepository() {
    extractHTTPSUrl()
    sshagent (credentials: [env.WIREMOCK_CREDENTIALS]) {
        withCredentials([usernamePassword(credentialsId: env.STASH_CREDENTIALS, passwordVariable: &apos;PASS&apos;, usernameVariable: &apos;USER&apos;)]) {
            sh &quot;&quot;&quot;
                ssh -T -o StrictHostKeyChecking=no -l ${env.WIREMOCK_USERNAME} ${env.WIREMOCK_IP_ADDRESS} &quot;cd~/${env.APPLICATION_DIRECTORY_WIREMOCK}/${env.PROJECT_HOME}; git fetch <a href="https://$USER:$PASS@${env.GIT_WITHOUT_HTTPS}" class="bare">https://$USER:$PASS@${env.GIT_WITHOUT_HTTPS}</a> ${env.GIT_BRANCH}; git reset --hard FETCH_HEAD; git clean -df&quot;
             &quot;&quot;&quot;
         }
     }
}</p>
</div>
<div class="paragraph">
<p>private restartWiremock() {
    sshagent (credentials: [env.WIREMOCK_CREDENTIALS]) {
            sh &quot;&quot;&quot;
                ssh -T -o StrictHostKeyChecking=no -l ${env.WIREMOCK_USERNAME} ${env.WIREMOCK_IP_ADDRESS} &quot;docker container restart ${env.WIREMOCK_CONTAINER_NAME}&quot;
             &quot;&quot;&quot;
     }
}</p>
</div>
<div class="paragraph">
<p>private checkWiremockStatus() {
    int wiremockStatusCheckCounter =6
    int sleepTimeInSeconds = 10
    def wiremockStatus</p>
</div>
<div class="literalblock">
<div class="content">
<pre>for (i = 0; i &lt; wiremockStatusCheckCounter; i++) {
     try {
         wiremockStatus = getHttpRequestStatus()
         echo &quot;WireMock server status code: ${wiremockStatus}&quot;
     } catch(Exceprion ex) {
         echo &quot;Exception when checking connection to WireMock&quot;
     }
     if(wiremockStatus == 200) break
     else sh &quot;sleep $(sleepTimeInSeconds}&quot;
  }</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>      if(wiremockStatus != 200) {
          currentBuild.result = &apos;FAILURE&apos;
          error &apos;WireMock server is unreachable. Return code: ${wiremockStatus}&apos;
      }
}</pre>
</div>
</div>
<div class="paragraph">
<p>private def getHttpRequestStatus() {
    def response = httpRequest &quot;${env.WIREMOCK_ADDRESS}/__admin&quot;
    return response.status</p>
</div>
<div class="paragraph">
<p>private extractHTTPSUrl() {
    env.GIT_WITHOUT_HTTPS = env.GIT_HTTPS.replace(&quot;https://&quot;, &quot;&quot;)
}</p>
</div>
<div class="paragraph">
<p>return this</p>
</div>
<div class="listingblock">
<div class="content">
<pre>stageInstallApplication.groovy:</pre>
</div>
</div>
<div class="paragraph">
<p>def call() {
    stage(&apos;Install application with smoke tests environment&apos;) {
        dir(env.SEETEST_APPLICATION_FOLDER) {
            checkout([$class: &apos;GitSCM&apos;, branches: [[Web-API-Test-Module-Smoke-Tests-virtualization.asciidoc_name: env.SEETEST_GIT_BRANCH]], doGenerateSubmoduleConfigurations: false, extensions: [], gitTool: &apos;default&apos;, submoduleCfg: [], userRemoteConfigs: [[Web-API-Test-Module-Smoke-Tests-virtualization.asciidoc_credentialsId: env.GIT_CREDENTIALS, url: env.SEETEST_GIT_SSH]])
        }
     }
}</p>
</div>
<div class="paragraph">
<p>return this</p>
</div>
<div class="listingblock">
<div class="content">
<pre>stageUITests.groovy:</pre>
</div>
</div>
<div class="paragraph">
<p>def call() {
    stage(&apos;UI tests&apos;) {
        def utils = load &quot;${env.SUBMODULES_DIR}/utils.groovy&quot;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        try {
            utils.generateUserIDVariable(); //Generate USER_ID and USER_GROUP
            docker.image(env.SEETEST_DOCKER_IMAGE).inside(&quot;-u ${env.USER_ID}:${env.USER_GROUP}&quot;) {
                withCredentials([[Web-API-Test-Module-Smoke-Tests-virtualization.asciidoc_$class: &apos;UsernamePasswordMultiBinding&apos;, credentialsId: &quot;${env.ARTIFACTORY_USER_CREDENTIALS}&quot;, passwordVariable: &apos;ARTIFACTORY_PASSWORD&apos;, usernameVariable: &apos;ARTIFACTORY_USERNAME]]) {
                    executeTests()
                    compressArtifacts()
                    publishJUnitTestResultReport()
                    archiveArtifacts()
                    publishHTMLReports()
                    publishCucumberReports()
                 }
             }
        } catch (Exception exc) {
            throw exc
        }
   }
}</pre>
</div>
</div>
<div class="paragraph">
<p>private executeTests() {
    withCredentials([usernamePassword(credentialsId: env.SEETEST_GRID_USER_CREDENTIALS, passwordVariable: &apos;GRID_USER_PASSWORD&apos;, usernameVariable: &apos;GRID_USER_NAME&apos;)]) {
            sh &quot;&quot;&quot;
                cd ${env.SEETEST_PROJECT_HOME_ABSOLUTE_PATH}
                mvn clean test -B -Ddriver=&quot;grid&quot; -Dtags=&quot;${env.SEETEST_CUCUMBER_TAG}&quot; -DcloudName=&quot;${env.SEETEST_CLOUD_NAME}&quot; -DdeviceQuery=&quot;${env.SEETEST_DEVICE_QUERY} -DgridUser=&quot;${GRID_USER_NAME}&quot; -DgridPassword=&quot;${GRID_USER_PASSWORD}&quot; -Dinstall=&quot;${env.SEETEST_INSTALL_APP}&quot; -DiosUrl=&quot;${env.SEETEST_IOS_APP_URL}&quot; -DdeviceType=&quot;iPhone&quot; -DiosVersion=&quot;$env.SEETEST_IOS_VERSION}&quot; -DparallelMode=&quot;allonall&quot; -Denv=&quot;${env.SEETEST_APP_ENVIRONMENT}&quot; site
             &quot;&quot;&quot;
     }
}</p>
</div>
<div class="paragraph">
<p>private compressartifacts() {
    echo &quot;Compressing artifacts from /target/site&quot;
    sh &quot;&quot;&quot;
        zip -r allure_report.zip **/${env.SEETEST_PROJECT_homE}/target/site
    &quot;&quot;&quot;</p>
</div>
<div class="paragraph">
<p>private publishJUnitTestResultReport() {
    echo &quot;Publishing JUnit reports from ${env.SEETEST_APPLICATION_FOLDER}/${env.SEETEST_PROJECT_HOME}/target/surefire-reports/junitreporters/*.xml&quot;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    try {
        junit &quot;${env.SEETEST_APPLICATION_FOLDER}/${env.SEETEST_PROJECT_HOME}/target/surefire-reports/junitreporters/*.xml&quot;
    } catch(e) {
        echo(&quot;No JUnit report found&quot;)
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>private archiveArtifacts() {
    echo &quot;Archiving artifacts&quot;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    try {
        archiveArtifacts allowEmptyArchive: true, artifacts: &quot;**/allure_report.zip&quot;
    } catch(e) {
        echo(&quot;No artifacts found&quot;)
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>private publishHTMLReports() {
    echo &quot;Publishing HTML reports from ${env.SEETEST_APPLICATION_FOLDER}/${env.SEETEST_PROJECT_HOME}/target/site/allure-maven-plugin&quot;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    try {
        publishHTML([allowMissing: false, alwaysLinkToLastBuild: true, keepAll: true, reportDir: &quot;${env.SEETEST_APPLICATION_FOLDER/${env.SEETEST_PROJECT_HOME}/target/site/allure-maven-plugin&quot;, reportFiles: &apos;index.html&apos;, reportName: &apos;Allure report&apos;, reportTitles: &apos;Allure report&apos;])
    } catch(e) {
        echo(&quot;No artifacts found&quot;)
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>private publishCucumberREPORTS() {
    echo &quot;Publishing Cucumber reports from ${env.SEETEST_APPLICATION_FOLDER}/${env.SEETEST_PROJECT_HOME}/target/cucumber-parallel/*.json&quot;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    try {
        step([$class: &apos;CucumberReportPublisher&apos;, fileExcludePattern &apos;&apos;, fileIncludePattern: &quot;#{env.SEETEST_APPLICATION_FOLDER}/${env.SEETEST_PROJECT_HOME}/target/cucumber-parallel/*.json&quot;, ignoreFailedTests: false, jenkinsBasePath: &apos;&apos;, jsonReportDirectory: &apos;&apos;, missingFails: false, parallelTesting: false, pendingFails: false, skippedFails: false, undefinedFails: false])
    } catch(e) {
        echo(&quot;No Cucumber report found&quot;)
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>return this</p>
</div>
<div class="listingblock">
<div class="content">
<pre>*Configuration*

It is possible to configure Jenkins job in two ways. First one is to edit Jenkinsfile. All of the properties are in properties collection as below:</pre>
</div>
</div>
<div class="paragraph">
<p>def properties = [</p>
</div>
<div class="literalblock">
<div class="content">
<pre>JENKINS_LABELS                                : &apos;PWI_LINUX_DEV&apos;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>...</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>//Docker
ARTIFACTORY_USER_CREDENTIALS                  : &apos;ba2e4f46-56f1-4467-ae97-17b356d6s643&apos;,
SEETEST_DOCKER_IMAGE                          : &apos;docker.XXX.com/app/base-images/seetest:v1-8.3&apos;,</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>//SeeTest
SEETEST_APPLICATION_FOLDER                    : &apos;seetest_dit&apos;,
SEETEST_PROJECT_HOME                          : &apos;Automated_Scripts&apos;,
SEETEST_GIT_SSH                               : &apos;ssh://stash.xxx.com/app/seetest_automation_cucumber.git&apos;,
SEETEST_GIT_BRANCH                            : &apos;develop&apos;,</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>          ...
]</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Second one is to add properties in &apos;Configure job&apos;. All of there properties are overriding properties from Jenkinsfile (have biggest priority). Then it can be set durring &apos;Build with Paremeters&apos; process.

*Reports*

After job execution &apos;Allure report&apos; and &apos;Cucumber-JVM&apos; reports should be visible. If any tests fails You can check on which screen (printscreen from failures is attached, why and etc.)

:leveloffset: 3

[[master-mrchecker.asciidoc_security-module]]
=== Security Module

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[Security-Test-Module.asciidoc]]
= Security Test Module

[[security-test-module.asciidoc_what-is-security]]
== What is Security

Application Security is concerned with *Integrity*, *Availability* and *Confidentiality* of data processed, stored and transferred by the application.

Application Security is a cross-cutting concern which touches every aspect of the Software Development Lifecycle. You can introduce some SQL injection flaws in your application and make it exploitable, but you can also expose your secrets due to poor secret management process (which will have nothing to do with code itself), and fail as well.

Because of this, and many other reasons, not every aspect of security can be automatically verified. Manual tests and audits will be still needed. Nevertheless, every security requirement which is automatically verified will prevent code degeneration and misconfiguration in a continuous manner.

[[security-test-module.asciidoc_how-to-test-security]]
== How to test Security

Security tests can be performed in many different ways like:

* *Static Code Analysis* - improves the security by (usually) automated code review. A good way to search after vulnerabilities, which are &apos;obvious&apos; on the code level (like e.g. SQL injection). The downside is that the professional tools to perform such scans are very expensive and still produce many false positives.

* *Dynamic Code Analysis* - tests are run against a working environment. A good way to search after vulnerabilities, which require all client- and server-side components to be present and running (like e.g. Cross-Site Scripting). Tests are performed in a semi-automated manner and require a proxy tool (like e.g. OWASP ZAP)

* *Unit tests* - self-written and maintained tests. They work usually on the HTTP/REST level (as this defines the trust boundary between the client and the server) and run against a working environment. Unit tests are best suited to verify requirements which involve business knowledge of the system or which assure secure configuration on the HTTP level.

In the current release of the Security Module, the main focus will be *Unit Tests*.

Although the most common choice of environment for security tests to run on will be *integration*(as the environment offers the right stability and should mirror the production closely), it is not uncommon for some security tests to run on production as well. This is done for e.g. TLS configuration testing to ensure proper configuration of the most relevant environment in a continuous manner.


:leveloffset: 3

[[master-mrchecker.asciidoc_database-module]]
=== Database Module

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[Database-Test-Module.asciidoc]]
= Database Test Module

[[database-test-module.asciidoc_what-is-mrchecker-database-test-module]]
== What is MrChecker Database Test Module

Database module is based on Object-Relational Mapping programming technique. All functionalities are build using Java Persistence API but examples use Hibernate as a main provider.

[[database-test-module.asciidoc_jpa-structure-schema]]
== JPA structure schema

This module was written to allow the use of any JPA provider. Structure is represented by schema below.

image::images/image3.png[]

[[database-test-module.asciidoc_orm-representation-applied-in-framework]]
== ORM representation applied in Framework

image::images/image4.png[]

:leveloffset: 3

[[master-mrchecker.asciidoc_mobile-test-module]]
=== Mobile Test Module

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[Mobile-Test-Module.asciidoc]]
= Mobile Test Module

[[mobile-test-module.asciidoc_what-is-mrchecker-e2e-mobile-test-module]]
== What is MrChecker E2E Mobile Test Module

MrChecker E2E Mobile test Module is a suitable solution for testing Remote Web Design, Mobile Browsers and application.
A user can write tests suitable for all mobile browsers with a full range of resolution. The way of working is similar to Selenium and uses the same rules and patterns as the Web Driver. For more information please look in the https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Selenium-Test-Module.asciidoc[Selenium test module].

[[mobile-test-module.asciidoc_what-is-page-object-architecture]]
== What is Page Object Architecture

Creating Selenium test cases can result in an unmaintainable project. One of the reasons is that too many duplicated code is used. Duplicated code could be caused by the duplicated functionality and this will result in duplicated usage of locators. The disadvantage of duplicated code is that the project is less maintainable. If some locator will change, you have to walk through the whole test code to adjust locators where necessary. By using the page object model we can make non-brittle test code and reduce or eliminate duplicate test code. Beside of that it improves the readability and allows us to create interactive documentation. Last but not least, we can create tests with less keystroke. An implementation of the page object model can be achieved by separating the abstraction of the test object and the test scripts.

[[mobile-test-module.asciidoc_page-object-pattern]]
== Page Object Pattern

image::images/Pom.png[]

[[mobile-test-module.asciidoc_mobile-structure]]
== Mobile Structure

It is build on the top of the Appium library.
Appium is an open-source tool for automating native, mobile web, and hybrid applications on iOS mobile, Android mobile, and Windows desktop platforms. Native apps are those written using iOS, Android, or Windows SDKs. Mobile web apps are web apps accessed using a mobile browser (Appium supports Safari on iOS and Chrome or the built-in &apos;Browser&apos; app on Android). Hybrid apps have a wrapper around a &quot;webview&quot; - a native control that enables interaction with web content.

[[mobile-test-module.asciidoc_run-on-different-mobile-devices]]
== Run on different mobile devices

To execute each test with chosen connected mobile devices, it is required to use specific arguments in Run configuration.

image::images/image01.png[]

image::images/image02.png[]

Default supported arguments in MrChecker:

* `deviceUrl` - http url to Appium Server, default value &quot;http://127.0.0.1:4723&quot;

* `automationName` - which automation engine to use , default value &quot;Appium&quot;

* `platformName` - which mobile OS platform to use , default value &quot;Appium&quot;

* `platformVersion` - mobile OS version , default value &quot;&quot;

* `deviceName` - the kind of mobile device or emulator to use , default value &quot;Android Emulator&quot;

* `app` - the absolute local path or remote http URL to a .ipa file (IOS), .app folder (IOS Simulator), .apk file (Android) or .apks file (Android App Bundle), or a .zip file, default value &quot;.&quot;

* `browserName` - name of mobile web browser to automate. Should be an empty string if automating an app instead, default value &quot;&quot;

* `newCommandTimeout` - how long (in seconds) Appium will wait for a new command from the client before assuming the client quit and ending the session, default value &quot;4000&quot;

* `deviceOptions` - any other capabilites not covered in essential ones, default value none

Example usage:</pre>
</div>
</div>
<div class="paragraph">
<p>mvn clean test -Dtest=MyTest -DdeviceUrl=&quot;http://192.168.0.1:1234&quot; -DplatformName=&quot;iOS&quot; -DdeviceName=&quot;iPhone Simulator&quot; -Dapp=&quot;.\\Simple_App.ipa&quot;</p>
</div>
<div class="listingblock">
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>mvn clean test -Dtest=MyTest -Dapp=&quot;.\\Simple_App.apk -DdeviceOptions=&quot;orientation=LANDSCAPE;appActivity=MainActivity;chromeOptions=[&apos;--disable-popup-blocking&apos;]&quot;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Check also:
+
https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Selenium-Test-Module-Building-basic-Selenium-Test.asciidoc[My First Selenium Test]
+
https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/Mobile-Test-ModuleMobile-Test-Module-How-to-use.asciidoc[How to use Mobile test Module]
+
https://github.com/devonfw/devonfw-testing/blob/feature/Create-mobile-module-%23213/example/src/test/java/com/capgemini/mrchecker/mobile/simpleapp/SimpleAppTest.java[Example TestCase]
+
Full list of https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/caps.md#general-capabilities[Generic Capabilities]
+
List of additional capabilities for https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/caps.md#android-only[Android]
+
List of additional capabilities for https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/caps.md#ios-only[iOS]


:leveloffset: 3

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[Mobile-Test-Module-How-to-use.asciidoc]]
= How to use mobile test Module

1. Install https://github.com/devonfw/devonfw-testing/blob/develop/documentation/MrChecker-download/Windows/Easy-out-of-the-box.asciidoc[IDE with MrChecker]
2. Switch branch to &apos;feature/Create-mobile-module-#213&apos; - by default it is &apos;develop&apos;</pre>
</div>
</div>
<div class="paragraph">
<p>git checkout feature/Create-mobile-module-#213</p>
</div>
<div class="listingblock">
<div class="content">
<pre>3. install and setup git checkout feature/Create-mobile-module-#213[Appium Server]

4. Connect to local Device by Appium Server

 1.
Install Android SDK    https://developer.android.com/studio/index.html#command-tools    -&gt;
	2.
Download Platform and Build-Tools  (Android versions - &gt;    https://en.wikipedia.org/wiki/Android_version_history   )
* sdkmanager &quot;platform-tools&quot; &quot;platforms;android-19&quot;
* sdkmanager &quot;build-tools;19.0.0&quot;
* copy from /build-tools  file &quot;aapt.exe&quot;  to /platform-tools
	3.
Set Environment:
ANDROID_SDK_ROOT = D:\sdk-tools-windows-4333796
PATH =  %PATH%; %ANDROID_SDK_ROOT%
	4.
Start Appium Server
	5.
Start Session in Appium Server, capabilities
{
  &quot;platformName&quot;: &quot;Android&quot;,
            &quot;deviceName&quot;: &quot;Android Emulator&quot;,
            &quot;app&quot;: &quot;D:\\Repo\\mrchecker-source\\mrchecker-framework-modules\\mrchecker-mobile-module\\src\\test\\resources\\Simple App_v2.0.1_apkpure.com.apk&quot;,
            &quot;automationName&quot;: &quot;UiAutomator1&quot;
            }

5. Run Mobile tests with runtime parameters.
List of supported parameters could be found https://github.com/devonfw/devonfw-testing/wiki/Run-on-different-mobile-devices[here]

* From command line (as in Jenkins):</pre>
</div>
</div>
<div class="paragraph">
<p>mvn clean compile test  -Dapp=&quot;.\\Simple_App_v2.0.1_apkpure.com.apk&quot; -DautomationName=&quot;UiAutomator1&quot; -Dthread.count=1</p>
</div>
<div class="listingblock">
<div class="content">
<pre>* from IDE:

image::images/image00100.jpg[]
image::images/image00101.jpg[]

:leveloffset: 3

[[master-mrchecker.asciidoc_devops-test-module]]
=== DevOps Test Module

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing
[[DevOPS-Test-Module.asciidoc]]
= DevOPS Test Module

[[devops-test-module.asciidoc_what-is-devops-for-us]]
== What is DevOps for us?

DevOps consists of a mixture of three key components in a technical project:

* People skills and mindset
* Processes
* Tools

By using E2E MrChecker Test Framework it is possible to cover the majority of these areas.

[[devops-test-module.asciidoc_qa-team-goal]]
== QA Team Goal

For QA engineers, it is essential to take care of the product code quality.

Therefore, we have to understand, that a *test case is also a code which has to be validated* against quality gates. As a result, we must *test our developed test case* alike it is done during standard Software Delivery Life Cycle.

[[devops-test-module.asciidoc_well-rounded-test-case-production-process]]
== Well rounded test case production process

* How do we define top-notch test cases development process in *E2E MrChecker Test Framework*

image::images/image5.png[]

[[devops-test-module.asciidoc_continuous-integration-ci-and-continuous-delivery-cd]]
== Continuous Integration (CI) and Continuous Delivery (CD)

* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/DevOPS-Test-Module-Continuous-Integration-CI.asciidoc[Continuous Integration (CI)] - a procedure where quality gates validate test case creation process
* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/DevOPS-Test-Module-Continuous-Delivery-CD.asciidoc[Continuous Delivery (CD)] - a procedure where we include as smoke/regression/security created test cases, validated against CI

image::images/image6.png[]

[[devops-test-module.asciidoc_what-should-you-receive-from-this-devops-module]]
== What should you receive from this DevOps module

image::images/image7.png[]

[[devops-test-module.asciidoc_what-will-you-gain-with-our-devops-module]]
== What will you gain with our DevOps module

The CI procedure has been divided into transparent modules. This solution makes configuration and maintenance very easy because everyone is able to manage versions and customize the configuration independently for each module. A separate security module ensures the protection of your credentials and assigned access roles regardless of changes in other modules.

image::images/image8.png[]

Your CI process will be matched to the current project. You can easily go back to the previous configuration, test a new one or move a selected one to other projects.

image::images/image9.png[]

DevOps module supports a delivery model in which executors are made available to the user as needed. It has advantages such as:

* Saving computing resources
* Eliminating guessing on your infrastructure capacity needs
* Not spending time on running and maintaining additional executors

image::images/image10.png[]

image::images/image11.png[]

image::images/image12.png[]

[[devops-test-module.asciidoc_how-to-build-this-devops-module]]
== How to build this DevOps module

Once you have implemented the module, you can learn more about:

* https://github.com/devonfw/devonfw-testing/blob/develop/documentation/Who-Is-MrChecker/Test-Framework-Modules/DevOPS-Test-Module-Docker-commands.asciidoc[Docker commands]

:leveloffset: 3

:leveloffset: 3

[[DevOPS-Test-Module-Continuous-Integration-CI.asciidoc]]
= Continuous Integration

Embrace quality with Continuous Integration while you produce test case/s.

[[devops-test-module-continuous-integration-ci.asciidoc_overview]]
== Overview

There are two ways to set up your Continuous Integration environment:

1. Create a Jenkins instance from scratch (e.g. by using the Jenkins Docker image)
+
Using a clean Jenkins instance requires the installation of additional plugins. The plugins required and their versions can be found on https://github.com/devonfw/devonfw-testing/wiki/jenkins-plugins[this page].
+
2. Use thre pre-configured custom Docker image provided by us
+
No more additional configurations is required (but optional) using this custom Docker image. Additionally, this Jenkins setup allows to be dynamically scaled across multiple machines and even the cloud (AWS, Azure, Google Cloud etc.).

[[devops-test-module-continuous-integration-ci.asciidoc_jenkins-overview]]
== Jenkins Overview

Jenkins is an Open Source Continuous Integration Tool. It allows the user to create automated build jobs which will run remotely on so called Jenkins Slaves. A build job can be triggered by several events, for example on new pull request on specified repositories or timed (e.g. at midnight).

[[devops-test-module-continuous-integration-ci.asciidoc_jenking-configuration]]
=== Jenking Configuration

Tests created by using the testing framework can be easily implemented on a Jenkins instance. The following chapter will describe such a job configuration. If you&#x2019;re running your own Jenkins instance you may have to install additional plugins listed on the page https://github.com/devonfw/devonfw-testing/wiki/jenkins-plugins[Jenkins Plugins] for a trouble-free integration of your tests.

[[devops-test-module-continuous-integration-ci.asciidoc_initial-configuration]]
==== Initial Configuration

The test job is configured as a so-called _parametrized_ job. This means, after starting the job, parameters can be specified, which will then be used in the build process. In this case, _branch_ and _testname_ will be expected when starting the job. These parameters specify which branch in the code repository should be checked out (possibly feature branch) and the name of the test, that should be executed.

image::images/image79.png[]

[[devops-test-module-continuous-integration-ci.asciidoc_build-process-configuration]]
==== Build Process Configuration

* The first step inside the build process configuration is to get the author of the commit that was made. The mail will be extracted and gets stored in a file called _build.properties_. This way, the author can be notified if the build fails.
+
image::images/image80.png[]
+
* Next up, Maven will be used to check if the code can be compiled, without running any tests.
+
image::images/image81.png[]
+
After making sure that the code can be compiled, the actual tests will be executed.
+
image::images/image82.png[]
+
* Finally, reports will be generated.
+
image::images/image83.png[]

[[devops-test-module-continuous-integration-ci.asciidoc_post-build-configuration]]
==== Post Build Configuration

* At first, the results will be imported to the https://github.com/devonfw/devonfw-testing/wiki/Allure-report#allure-reports[Allure System]
+
image::images/image84.png[]
+
* JUnit test results will be reported as well. Using this step, the test result trend graph will be displayed on the Jenkins job overview.
+
image::images/image85.png[]
+
* Finally, an E-Mail will be sent to the previously extracted author of the commit.
+
image::images/image86.png[]

[[devops-test-module-continuous-integration-ci.asciidoc_using-the-pre-configured-custom-docker-image]]
== Using the Pre-Configured Custom Docker Image

If you are starting a new Jenkins instance for your tests, we&#x2019;d suggest to use the pre-configured Docker image. This image already contains all configurations and additional features.

The configurations that are made are e.g. Plugins and Pre-Installed job setup samples. This way, you don&#x2019;t have to set up the entire CI-Environment from ground up.

The additional features from this docker image allow the dynamic creation and deletion of Jenkins slaves, by creating Docker containers. Also, Cloud Solutions can be implemented to allow wide-spread load balancing.

:leveloffset: 3

:leveloffset: 3

[[DevOPS-Test-Module-Continuous-Delivery-CD.asciidoc]]
= Continuous Delivery

Include quality with Continuous Delivery during product release.

image::images/image87.png[]

[[devops-test-module-continuous-delivery-cd.asciidoc_overview]]
== Overview

CD from Jenkins point of view does not change a lot from Continuous Integration one.

[[devops-test-module-continuous-delivery-cd.asciidoc_jenkins-overview]]
== Jenkins Overview

For Jenkins CD setup please use the same Jenkins settings as for CI https://github.com/devonfw/devonfw-testing/wiki/continuous-integration#jenkins-configuration[link]. The only difference is:

* What type of test you we will execute. Before we have been picking test case(s), however now we will choose test suite(s)
* Who will will trigger given Smoke/Integration/Performance job
* What is the name of official branch. This branch ought to use be used always in every CD execution. It will be either *master* or *develop*.

[[devops-test-module-continuous-delivery-cd.asciidoc_jenkins-for-smoke-tests]]
=== Jenkins for Smoke Tests

In point where we input test name - $TESTNAME ( https://github.com/devonfw/devonfw-testing/wiki/continuous-integration#initial-configuration[link] ), please input test suite which merge by tags -( https://github.com/devonfw/devonfw-testing/wiki/tags-and-test-suites[link] ) how to all test cases need to run only smoke tests.

[[devops-test-module-continuous-delivery-cd.asciidoc_jenkins-for-performance-tests]]
=== Jenkins for Performance Tests

Under construction - added when WebAPI module is included.

:leveloffset: 3

:leveloffset: 3

[[DevOPS-Test-Module-Pipeline-structure.asciidoc]]
= Pipeline structure

[[devops-test-module-pipeline-structure.asciidoc_pipeline-configuration]]
== Pipeline configuration:

The default interaction with Jenkins required manual jobs. It keeps configuration of a job in Jenkins separately from source code. With Pipeline plugin users can implement al pipeline procedure in Jenkinsfile and store it in repository with other code. This approach is used in Mr Checker framework More info: https://jenkins.io/solutions/pipeline/

Our CI &amp; CD process is divided into a few separate files: Jenkins_node.groovy &#x2013; it is file to manage all process. It defines all operations executes on Jenkins node, so all code in this file is closed in node closure. Workflow in Jenkinsfile:

* Read all parameters from Jenkins job
* Execute stage to preparing environment
* Execute git pull command
* Set Jenkins job description
* Execute compilation of the project in special prepared docker container
* Execute unit tests
* Execute integration tests
* Deploy artifacts to local repository
* Deploy artifacts to outside repository (nexus/arifactory)

Not all steps must be in the Jenkins files. It should be configure specially for job requirements.

[[devops-test-module-pipeline-structure.asciidoc_description-of-stages]]
== Description of stages:

[[devops-test-module-pipeline-structure.asciidoc_stage-prepare-environment]]
=== Stage &#x201C;Prepare environment&#x201D;

First thing to do in this stage is overwriting of properties loaded from Jenkins job. It is defined in &#x201C;overrideProperties&#x201D; function. Next function &#x201C;setJenkinsJobVariables&#x201D; defines environment variables such as :

* JOB_NAME_UPSTREAM
* BUILD_DISPLAY_NAME_UPSTREAM
* BUILD_URL_UPSTREAM
* GIT_CREDENTIALS
* JENKINS_CREDENTIALS

Last function in stage &#x2013; &#x201C;setWorkspace&#x201D; Creates an environment variable with path to local workspace. This is required because when using pipeline plugin. Jenkins does not create the WORKSPACE env variables.

[[devops-test-module-pipeline-structure.asciidoc_stage-git-pull]]
=== Stage &quot;Git pull&quot;

It pulls sources from the repository and loads &#x201C;git pull&#x201D; file which contains additional methods:

* setGitAuthor &#x2013; setting properties about git author to the file &#x201C;build.properties&#x201D; and loading created file
* tryMergeWithBranch &#x2013; checking if actual branch can be merged with default main branch

[[devops-test-module-pipeline-structure.asciidoc_stage-build-compile]]
=== Stage &#x201C;Build compile&#x201D;

Verify by maven that code can builds without errors

[[devops-test-module-pipeline-structure.asciidoc_stage-unit-test]]
=== Stage &#x201C;Unit test&#x201D;

Execute unit tests with mvn surefire test and publish reports as junit and allure format

[[devops-test-module-pipeline-structure.asciidoc_stage-integration-test]]
=== Stage &#x201C;Integration test&#x201D;

Execute integration tests with mvn surefire test and publish reports as junit and allure format

[[devops-test-module-pipeline-structure.asciidoc_stage-deploy-&#x2013;-local-repo]]
=== Stage &#x201C;Deploy &#x2013; local repo&#x201D;

Archive artifacts as jar in local repository

[[devops-test-module-pipeline-structure.asciidoc_stage-deploy-&#x2013;-nexu-repo]]
=== Stage &#x201D;Deploy &#x2013; nexu repo&#x201D;

Deploy to the outside repository by maven release deploy command with credentials stored in Jenkins machine Additional files:

* mailSender.groovy &#x2013; contains methods to send mail with generated content
* stashNotification.groovy &#x2013; send job status for bitbucket by curl command
* utils.groovy - contains additional functions to load properties, files and generating additional data

:leveloffset: 3

:leveloffset: 3

[[DevOPS-Test-Module-Selenium-Grid.asciidoc]]
= Selenium Grid

[[devops-test-module-selenium-grid.asciidoc_what-is-selenium-grid]]
== What is Selenium Grid

Selenium Grid allows running web/mobile browsers test cases to fulfil bedrock factors, such as:

* Independence infrastructure, similar to end-users
* Scalable infrastructure (\~50 simultaneous sessions at once)
* Huge variety of web browsers (from mobile to desktop)
* Continuous Integration and Continuous Delivery process
* Support multi-type programming languages (java, javascript, python, &#x2026;&#x200B;).

image::images/image88.png[]

On a daily basis, a test automation engineer uses his local environments for test case execution/development. However, created browser test case has to be able to run on any other infrastructure. Selenium Grid enables this portability for us.

[[devops-test-module-selenium-grid.asciidoc_selenium-grid-structure]]
== Selenium Grid Structure

image::images/image89.png[]

Full documentation for Selenium Grid can be found https://github.com/SeleniumHQ/selenium[here] and http://docs.seleniumhq.org/docs/07_selenium_grid.jsp[here].

&apos;Vanilla flavour&apos; Selenium Grid is based on two, not too complicated, ingredients:

1. *Selenium Hub* - as one machine, accepting connections to grid from test cases executors. It also plays a managerial role in connection to/from Selenium Nodes
2. *Selenium Node* - from one to many machines, where on each machine a browser used during test case execution is installed.

[[devops-test-module-selenium-grid.asciidoc_how-to-setup]]
== How to setup

There are two options of Selenium Grid setup:

* Classic, static solution - http://docs.seleniumhq.org/docs/07_selenium_grid.jsp#installation[link]
* Cloud, scalable solution - https://bitbucket.org/lukasz_stefaniszyn/seleniumgriddockercompose/overview[link]

Advantages and disadvantages of both solutions:

image::images/image90.png[]

[[devops-test-module-selenium-grid.asciidoc_how-to-use-selenium-grid-with-e2e-mr-checker-test-frameworks]]
== How to use Selenium Grid with E2E Mr Checker Test Frameworks

Run following command either in Eclipse or in Jenkins:</pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>mvn test -Dtest=com.capgemini.ntc.selenium.tests.samples.resolutions.ResolutionTest -DseleniumGrid=&quot;http://10.40.232.61:4444/wd/hub&quot; -Dos=LINUX -Dbrowser=chrome</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre>As a result of this command:

* `-Dtest=com.capgemini.ntc.selenium.features.samples.resolutions.ResolutionTest` - name of test case to execute
* `-DseleniumGrid=&quot;http://10.40.232.61:4444/wd/hub&quot;` - IP address of Selenium Hub
* `-Dos=LINUX` - what operating system must be taken during test case execution
* `-Dbrowser=chrome` - what type of browser will be used during test case execution

image::images/image91.png[]

:leveloffset: 3

:leveloffset: 3

[[DevOPS-Test-Module-Jenkins-Plugins.asciidoc]]
= List of Jenkins Plugins

[cols=2*,options=header]
|===

|Plugin Name
|Version

|blueocean-github-pipeline
|1.1.4

|blueocean-display-url
|2.0

|blueocean
|1.1.4

|workflow-support
|2.14

|workflow-api
|2.18

|plain-credentials
|1.4

|pipeline-stage-tags-metadata
|1.1.8

|credentials-binding
|1.12

|git
|3.5.1

|maven-plugin
|2.17

|workflow-durable-task-step
|2.12

|job-dsl
|1.64

|git-server
|1.7

|windows-slaves
|1.3.1

|github
|1.27.0

|blueocean-personalization
|1.1.4

|jackson2-api
|2.7.3

|momentjs
|1.1.1

|workflow-basic-steps
|2.6

|workflow-aggregator
|2.5

|blueocean-rest
|1.1.4

|gradle
|1.27.1

|pipeline-maven
|3.0.0

|blueocean-pipeline-editor
|0.2.0

|durable-task
|1.14

|scm-api
|2.2.2

|pipeline-model-api
|1.1.8

|config-file-provider
|2.16.3

|github-api
|1.85.1

|pam-auth
|1.3

|workflow-cps-global-lib
|2.8

|github-organization-folder
|1.6

|workflow-job
|2.12.1

|variant
|1.1

|git-client
|2.5.0

|sse-gateway
|1.15

|script-security
|1.29.1

|token-macro
|2.1

|jquery-detached
|1.2.1

|blueocean-web
|1.1.4

|timestamper
|1.8.8

|greenballs
|1.15

|handlebars
|1.1.1

|blueocean-jwt
|1.1.4

|pipeline-stage-view
|2.8

|blueocean-i18n
|1.1.4

|blueocean-git-pipeline
|1.1.4

|ace-editor
|1.1

|pipeline-stage-step
|2.2

|email-ext
|2.58

|envinject-api
|1.2

|role-strategy
|2.5.1

|structs
|1.9

|locale
|1.2

|docker-workflow
|1.13

|ssh-credentials
|1.13

|blueocean-pipeline-scm-api
|1.1.4

|metrics
|3.1.2.10

|external-monitor-job
|1.7

|junit
|1.21

|github-branch-source
|2.0.6

|blueocean-config
|1.1.4

|cucumber-reports
|3.8.0

|pipeline-model-declarative-agent
|1.1.1

|blueocean-dashboard
|1.1.4

|subversion
|2.9

|blueocean-autofavorite
|1.0.0

|pipeline-rest-api
|2.8

|pipeline-input-step
|2.7

|matrix-project
|1.11

|pipeline-github-lib
|1.0

|workflow-multibranch
|2.16

|docker-plugin
|0.16.2

|resource-disposer
|0.6

|icon-shim
|2.0.3

|workflow-step-api
|2.12

|blueocean-events
|1.1.4

|workflow-scm-step
|2.6

|display-url-api
|2.0

|favorite
|2.3.0

|build-timeout
|1.18

|mapdb-api
|1.0.9.0

|pipeline-build-step
|2.5.1

|antisamy-markup-formatter
|1.5

|javadoc
|1.4

|blueocean-commons
|1.1.4

|cloudbees-folder
|6.1.2

|ssh-slaves
|1.20

|pubsub-light
|1.10

|pipeline-graph-analysis
|1.4

|allure-jenkins-plugin
|2.23

|mailer
|1.20

|ws-cleanup
|0.33

|authentication-tokens
|1.3

|blueocean-pipeline-api-impl
|1.1.4

|ldap
|1.16

|docker-commons
|1.8

|branch-api
|2.0.10

|workflow-cps
|2.36.1

|pipeline-model-definition
|1.1.8

|blueocean-rest-impl
|1.1.4

|ant
|1.7

|credentials
|2.1.14

|matrix-auth
|1.7

|pipeline-model-extensions
|1.1.8

|pipeline-milestone-step
|1.3.1

|jclouds-jenkins
|2.14

|bouncycastle-api
|2.16.1

|===

:leveloffset: 3

:leveloffset: 3

[[DevOPS-Test-Module-Docker-commands.asciidoc]]
= What is Docker

Docker - open source software platform to create, deploy and manage virtualized application containers on a common operating system (OS), with an ecosystem of allied tools.

[[DevOPS-Test-Module-Docker-commands.asciidoc]]
= Where do we use Docker

DevOps module consists of Docker images

1. Jenkins image
2. Jenkins job image
3. Jenkins management image
4. Security image

in addition, each new node is also based on the Docker

[[DevOPS-Test-Module-Docker-commands.asciidoc]]
= Exploring basic Docker options

Let&#x2019;s expose some of the most important commands that are needed when working with our DevOps module based on the Docker platform. Each command given below should be preceded by a sudo call by default. If you don&#x2019;t want to use `sudo` command create a Unix group called docker and add user to it.</pre>
</div>
</div>
<div class="paragraph">
<p>$ sudo groupadd docker
$ sudo usermod -aG docker $USER</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_build-an-image-from-a-dockerfile]]
== Build an image from a Dockerfile</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="docker-build-options-path-url">75.1.10. docker build [OPTIONS] PATH | URL | -</h4>
<div class="paragraph">
<p>#
# Options:
#  --tag , -t : Name and optionally a tag in the &#x2018;name:tag&#x2019; format</p>
</div>
<div class="paragraph">
<p>$ docker build -t vc_jenkins_jobs .</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_container-start]]
== Container start</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="docker-run-options-imagetagdigest-command-arg">75.1.11. docker run [OPTIONS] IMAGE[:TAG|@DIGEST] [COMMAND] [ARG&#x2026;&#x200B;]</h4>
<div class="paragraph">
<p>#
# Options:
# -d : To start a container in detached mode (background)
# -it : interactive terminal
# --name : assign a container name
# --rm : clean up
# --volumes-from=&quot;&quot;: Mount all volumes from the given container(s)
# -p : explicitly map a single port or range of ports
# --volume : storage associated with the image</p>
</div>
<div class="paragraph">
<p>$ docker run -d --name vc_jenkins_jobs vc_jenkins_jobs</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_remove-one-or-more-containers]]
== Remove one or more containers</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="docker-rm-options-container">75.1.12. docker rm [OPTIONS] CONTAINER</h4>
<div class="paragraph">
<p>#
# Options:
# --force , -f : Force the removal of a running container</p>
</div>
<div class="paragraph">
<p>$ docker rm -f jenkins</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_list-containers]]
== List containers</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="docker-ps-options">75.1.13. docker ps [OPTIONS]</h4>

</div>
<div class="sect3">
<h4 id="all-a-show-all-containers-default-shows-just-running">75.1.14. --all, -a : Show all containers (default shows just running)</h4>
<div class="paragraph">
<p>$ docker ps</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_pull-an-image-or-a-repository-from-a-registry]]
== Pull an image or a repository from a registry</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="docker-pull-options-nametagdigest">75.1.15. docker pull [OPTIONS] NAME[:TAG|@DIGEST]</h4>
<div class="paragraph">
<p>$ docker pull jenkins/jenkins:2.73.1</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_push-the-image-or-a-repository-to-a-registry]]
== Push the image or a repository to a registry

Pushing new image takes place in two steps. First save image by adding container ID to commit command and next use push:</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="docker-push-options-nametag">75.1.16. docker push [OPTIONS] NAME[:TAG]</h4>
<div class="paragraph">
<p>$ docker ps
  # copy container ID from the result
$ docker commit b46778v943fh vc_jenkins_mng:project_x
$ docker push vc_jenkins_mng:project_x</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_return-information-on-docker-object]]
== Return information on Docker object</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="docker-inspect-options-nameid-nameid">75.1.17. docker inspect [OPTIONS] NAME|ID [NAME|ID&#x2026;&#x200B;]</h4>
<div class="paragraph">
<p>#
# Options:
# --format , -f : output format</p>
</div>
<div class="paragraph">
<p>$ docker inspect -f &apos;{{ .Mounts }}&apos; vc_jenkins_mng</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_list-images]]
== List images</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="docker-images-options-repositorytag">75.1.18. docker images [OPTIONS] [REPOSITORY[:TAG]]</h4>
<div class="paragraph">
<p>#
# Options:
--all , -a : show all images with intermediate images</p>
</div>
<div class="paragraph">
<p>$ docker images
$ docker images jenkins</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_remove-one-or-more-images]]
== Remove one or more images</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="docker-rmi-options-image-image">75.1.19. docker rmi [OPTIONS] IMAGE [IMAGE&#x2026;&#x200B;]</h4>
<div class="paragraph">
<p>#
# Options:
#   --force , -f : Force removal of the image</p>
</div>
<div class="paragraph">
<p>$ docker rmi jenkins/jenkins:latest</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_run-a-command-in-a-running-container]]
== Run a command in a running container</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="docker-exec-options-container-command-arg">75.1.20. docker exec [OPTIONS] CONTAINER COMMAND [ARG&#x2026;&#x200B;]</h4>

</div>
<div class="sect3">
<h4 id="d-run-command-in-the-background">75.1.21. -d : run command in the background</h4>

</div>
<div class="sect3">
<h4 id="it-interactive-terminal">75.1.22. -it : interactive terminal</h4>

</div>
<div class="sect3">
<h4 id="w-working-directory-inside-the-container">75.1.23. -w : working directory inside the container</h4>

</div>
<div class="sect3">
<h4 id="e-set-environment-variables">75.1.24. -e : Set environment variables</h4>
<div class="paragraph">
<p>$ docker exec vc_jenkins_jobs sh -c &quot;chmod 755 config.xml&quot;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[DevOPS-Test-Module-Docker-commands.asciidoc]]
= Advanced commands

[[devops-test-module-docker-commands.asciidoc_remove-dangling-images]]
== Remove dangling images</pre>
</div>
</div>
<div class="paragraph">
<p>$ docker rmi $(docker images -f dangling=true -q)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_remove-all-images]]
== Remove all images</pre>
</div>
</div>
<div class="paragraph">
<p>$ docker rmi $(docker images -a -q)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_removing-images-according-to-a-pattern]]
== Removing images according to a pattern</pre>
</div>
</div>
<div class="paragraph">
<p>$ docker images | grep &quot;pattern&quot; | awk &apos;{print $2}&apos; | xargs docker rm</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_remove-all-exited-containers]]
== Remove all exited containers</pre>
</div>
</div>
<div class="paragraph">
<p>$ docker rm $(docker ps -a -f status=exited -q)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_remove-all-stopped-containers]]
== Remove all stopped containers</pre>
</div>
</div>
<div class="paragraph">
<p>$ docker rm $(docker ps --no-trunc -aq)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_remove-containers-according-to-a-pattern]]
== Remove containers according to a pattern</pre>
</div>
</div>
<div class="paragraph">
<p>$ docker ps -a | grep &quot;pattern&quot; | awk &apos;{print $1}&apos; | xargs docker rmi</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[devops-test-module-docker-commands.asciidoc_remove-dangling-volumes]]
== Remove dangling volumes</pre>
</div>
</div>
<div class="paragraph">
<p>$ docker volume rm $(docker volume ls -f dangling=true -q)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

[[master-mrchecker.asciidoc_mrchecker-download]]
== MrChecker download

[[master-mrchecker.asciidoc_windows]]
=== Windows

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[Easy-out-of-the-box.asciidoc]]
= Easy out of the Box

1. Click on the link https://capgemini.sharepoint.com/sites/E2ETesting-SummitDevonfwProductionLine/Shared%20Documents/General/MrChecker_Test_Framework_2_6_0.7z[Ready to use MrChecker_Test_Environment] and download the package
2. Unzip downloaded MrChecker Test Framework to the folder C:\ on your PC - recommended tool: http://www.7-zip.org/download.html[7z] All necessary components, such as Eclipse, Java and Maven will be pre-installed for you. There is no need for additional installations.
+
*Note*: Please double check the place in which you have unzipped MrChecker_Test_Framework
3. Go to folder C:\MrChecker_Test_Framework\ , in which Mr.Checker has been unzipped
+
image::images/image1.png[]
4. In order to run the program, double click on _start-eclipse-with-java.bat_
+
_(note that start-eclipse.bat won&apos;t detect Java)_
5. Update project structure (_ALT_ + _F5_)
+
image::images/image2.png[]

:leveloffset: 3

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[Out-of-the-box-installation.asciidoc]]
= Out of the box installation

1. Start from Easy out of the box installation

2. Open Eclipse

3. Manually Delete folders that appear in Eclipse

4. Click inside Eclipse with a right mouse click and open Import

5. Select Maven &#x2192; existing Maven project

6. Select Mr Checker &#x2192; workspace &#x2192; devonfw-testing and click OK

At this point, all test catalogues should be imported in Eclipse and ready to use.

:leveloffset: 3

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[Advanced-installation.asciidoc]]
= Advanced installation

[[advanced-installation.asciidoc_java-installation]]
== Java installation
There is one important pre-requisite for Mr Checker installation - there has to be Java installed on the computer and an environmental variable has to be set in order to obtain optimal functioning of the framework.

1. Install Java 1.8 JDK 64bit
+
Download and install [.line-through]#http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html[Java download link]#
+
_(To download JDK 8 from Oracle you have to have an account. It is recomended to get a JDK build based on OpenJDK from https://adoptopenjdk.net/[AdoptOpenJDK])_

2. Windows Local Environment - https://www.java.com/en/download/help/path.xml[How to set]:
+
* *Variable name*: JAVA_HOME | *Variable value*: C:\Where_You&#x2019;ve_Installed_Java
+
* *Variable name*: PATH | *Variable value*: %JAVA_HOME%/bin;%JAVA_HOME%\lib
+
image::images/image3.png[]

3. Next, verify it in the command line:
+</pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>java --version</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre>[[advanced-installation.asciidoc_other-components-installation]]
== Other components installation
Install each component separately, or update the existing ones on your PC.

1. Maven 3.5
    * https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.5.0/apache-maven-3.5.0-bin.zip[Download Maven]
    * Unzip Maven in following location C:\maven
    * Set Windows Local Environment
        - *Variable name*: M2_HOME | *Variable value*: C:\maven\apache-maven-3.5.0
        - *Variable name*: PATH | *Variable value*: %M2_HOME%\bin
+
image::images/image4.png[]
+
    * Verify in a command line:
+</pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>mvn --version</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre>2. Eclipse IDE
    * Download an unzip https://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/neon/3/eclipse-java-neon-3-win32-x86_64.zip[Eclipse]
    * Download MrCheckerTestFramework https://github.com/devonfw/devonfw-testing/archive/develop.zip[source code]
    * Import:
+
image::images/image5.png[]
+
    * Projects from folders
+
image::images/image6.png[]
+
    * Open already created projects:
+
image::images/image7.png[]
+
    * Update project structure - _ALT_ + _F5_
+
image::images/image8.png[]

:leveloffset: 3

[[master-mrchecker.asciidoc_mac]]
=== Mac

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[Mac.asciidoc]]
= MrChecker macOS installation
On this page, you can find all the details regarding MrChecker installation on your Mac.

[[mac.asciidoc_java-installation]]
== Java installation
There is one important pre-requisite for Mr Checker installation - there has to be Java installed on the computer and an environmental variable has to be set in order to obtain optimal functioning of the framework.

1. Install Java 1.8 JDK 64bit
+
Download and install [.line-through]#http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html[Java download link]#
+
_(To download JDK 8 from Oracle you have to have an account. It is recomended to get a JDK build based on OpenJDK from https://adoptopenjdk.net/[AdoptOpenJDK])_

2. Next, verify it in the command line:
+
    &gt; java --version


[[mac.asciidoc_other-components-installation]]
== Other components installation
Install each component separately, or update the existing ones on your Mac.

1. Maven 3.5
    * https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.5.0/apache-maven-3.5.0-bin.zip[Download Maven]
    * Unzip Maven in following location /maven
    * Add Maven to PATH

        &gt; $ export PATH=$PATH:/maven/apache-maven-3.5.0/bin/

    * Verify in terminal:

        &gt; $ mvn -version

2. Eclipse IDE
    * Download an unzip https://www.eclipse.org/downloads/download.php?file=/oomph/epp/2019-06/R/eclipse-inst-mac64.dmg[Eclipse]
    * Download MrCheckerTestFramework https://github.com/devonfw/devonfw-testing/archive/develop.zip[source code]
    * Import:
+
image::images/image9.png[]
+
    * Select Projects from folders:
+
image:images/image10.png[]
+
    * Open already created projects:
+
image:images/image11.png[]
+
    * Update project structure - _ALT_ + _F5_
+
image:images/image12.png[]

:leveloffset: 3

[[master-mrchecker.asciidoc_tutorials]]
== Tutorials

In order to learn more about MrChecker structure start from Project Organisation section and then check out our fantastic tutorials:

This tutorial will guide you through the series of test which performs basic actions on webpages using MrChecker.

Make sure you have already MrChecker Test Framework installed on your PC. How to install?

Your Product Under Test will be the following website: http://the-internet.herokuapp.com/

:leveloffset: 2

[[Project-Organisation.asciidoc]]
= Project organization

[[project-organisation.asciidoc_importing-projects]]
== Importing projects

Every MrChecker project should be imported as a Maven Project.

Example from Eclipse IDE:

image::images/1.png[]

image::images/2.png[]

Enter the project path and select projects to import.

image::images/3.png[]

When the import is finished, update the project structure - ALT + F5

image::images/4.png[]

[[project-organisation.asciidoc_exporting-projects]]
== Exporting projects

In order to create a new standalone MrChecker project, you can use template-app-under-test and export it to the new folder:

image::images/5.png[]

image::images/6.png[]

Create a new folder for the project and enter its path. Select project and files to export:

image::images/7.png[]

Change project name and other properties, if necessary, in pom.xml file:

image::images/8.png[]

Then you can import the project to the workspace and create new packages and classes.

[[project-organisation.asciidoc_creating-new-packages]]
== Creating new packages

1. You will need two new packages: one for the new page classes, the other one for test classes:

* Create a package for page classes

 Open Eclipse
 Use the &quot;Project Explorer&quot; on the left
 Navigate to [your-project] &#x2192; src/main/java &#x2192; com.capgemini.mrchecker &#x2192; selenium
 Right-click on &quot;selenium&quot;
 Click on &quot;New&quot; &#x2192; New Package
 Name the new package &quot;com.capgemini.mrchecker.selenium.pages.[your-product-name]&quot;

* Create a package for test classes

 Navigate to [your-project] &#x2192; src/test/java &#x2192; com.capgemini.mrchecker &#x2192; selenium
 Right click on &quot;selenium&quot;
 Click on &quot;New&quot; &#x2192; New Package
 Name the new package &quot;com.capgemini.mrchecker.selenium.tests.[your-product-name]&quot;

Example:

image::images/9.png[]

[[project-organisation.asciidoc_creating-new-page-classes]]
== Creating new Page Classes

 Navigate to: [your-project] &#x2192; src/main/java &#x2192; com.capgemini.mrchecker &#x2192; selenium.pages.[your-product-name]
 Click on &quot;New&quot; &#x2192; New Class
 Enter the name &quot;YourPage&quot;

Every Page Class should extend BasePage class. Import all necessary packages and override all required methods:

* public boolean isLoaded() - returns true if the page is loaded and false if not
* public void load() - loads the page
* public String pageTitle() - returns page title

Example:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public class MainPage extends BasePage {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    return false;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Main Page&apos;&quot;);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>   @Override
   public String pageTitle() {
       return &quot;Main Page Title&quot;;
   }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[project-organisation.asciidoc_creating-new-test-classes]]
== Creating new Test Classes

 Navigate to  [your-project] &#x2192; src/test/java &#x2192; com.capgemini.mrchecker &#x2192; selenium.tests.[your-product-name]
 Click on &quot;New&quot; &#x2192; New Class
 Enter the name &quot;YourCaseTest&quot;

Test classes should extend BaseTest class, import all necessary packages and override all required methods:

* public void setUp() - executes before each test
* public void tearDown() - executes after each test

Optionally, it is also possible to implement the following methods:

* @BeforeClass
public static void setUpBeforeClass() - runs only once before all tests
* @AfterClass
public static void tearDownAfterClass() - runs only once after performing all tests

Every test method has to be signed with &quot;@Test&quot; parameter.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public class YourCaseTest extends BaseTest {
   private static MainPage mainPage = new MainPage();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    mainPage.load();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@AfterClass
public static void tearDownAfterClass() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void setUp() {
    if (!mainPage.isLoaded()) {
        mainPage.load();
    }
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void tearDown() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldTestRunWithoutReturningError {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>   }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[project-organisation.asciidoc_running-tests]]
== Running Tests

Run the test by right-clicking on the test method &#x2192; Run as &#x2192; JUnit test.


:leveloffset: 3

[[master-mrchecker.asciidoc_basic-tutorials]]
=== Basic Tutorials

[[master-mrchecker.asciidoc_basic-tests]]
==== Basic Tests

:leveloffset: 4

image::images/image1.png[]

The goal of this test is to open A/B Test subpage and redirect to another website.

Steps:

1. Open The Internet Main Page
2. Click A/B Testing link and go to A/B Test subpage
3. Click Elemental Selenium link and open it in new tab
4. Switch to Elemental Selenium page and check if it&apos;s loaded

image::images/image2.png[]

[[example-01-ab-test-control.asciidoc_page-class]]
===== Page Class

Create a Page class for AB Testing page. Override all required methods:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public class ABtestPage extends BasePage {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.ABTEST.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;A/B Test Control&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.ABTEST.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>   @Override
   public String pageTitle() {
       return getActualPageTitle();
   }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-01-ab-test-control.asciidoc_how-to-use-enum]]
===== How to use Enum?

Similarly, as in environmental variables case create an enum for storing values of subURLs:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public enum PageSubURLsProjectYEnum {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>BASIC_AUTH(&quot;basic_auth&quot;),
NEW_WINDOW(&quot;windows/new&quot;),
WINDOW(&quot;windows&quot;),
CHECKBOX(&quot;checkboxes&quot;),
CONTEXT_MENU(&quot;context_menu&quot;),
KEY_PRESS(&quot;key_presses&quot;),
DYNAMIC_CONTENT(&quot;dynamic_content&quot;),
HOVERS(&quot;hovers&quot;),
SORTABLE_DATA_TABLES(&quot;tables&quot;),
REDIRECT(&quot;redirector&quot;),
JAVASCRIPT_ALERTS(&quot;javascript_alerts&quot;),
CHALLENGING_DOM(&quot;challenging_dom&quot;),
STATUS_CODES(&quot;status_codes&quot;),
LOGIN(&quot;login&quot;),
ABTEST(&quot;abtest&quot;),
BROKEN_IMAGES(&quot;broken_images&quot;),
DROPDOWN(&quot;dropdown&quot;),
HORIZONTAL_SLIDER(&quot;horizontal_slider&quot;),
DOWNLOAD(&quot;download&quot;),
FORGOT_PASSWORD(&quot;forgot_password&quot;),
FORGOT_PASSWORD_EMAIL_SENT(&quot;email_sent&quot;),
EXIT_INTENT(&quot;exit_intent&quot;),
DYNAMIC_LOADING(&quot;dynamic_loading&quot;),
DISAPPEARING_ELEMENTS(&quot;disappearing_elements&quot;),
DRAG_AND_DROP(&quot;drag_and_drop&quot;),
DYNAMIC_CONTROLS(&quot;dynamic_controls&quot;),
UPLOAD(&quot;upload&quot;),
FLOATING_MENU(&quot;floating_menu&quot;),
FRAMES(&quot;frames&quot;),
GEOLOCATION(&quot;geolocation&quot;),
INFINITE_SCROLL(&quot;infinite_scroll&quot;),
JQUERY_UI(&quot;jqueryui/menu&quot;),
JAVASCRIPT_ERROR(&quot;javascript_error&quot;),
LARGE_AND_DEEP_DOM(&quot;large&quot;),
NESTED_FRAMES(&quot;nested_frames&quot;),
NOTIFICATION_MESSAGE(&quot;notification_message&quot;),
DOWNLOAD_SECURE(&quot;download_secure&quot;),
SHIFTING_CONTENT(&quot;shifting_content&quot;),
SLOW_RESOURCES(&quot;slow&quot;),
TYPOS(&quot;typos&quot;),
WYSIWYGEDITOR(&quot;tinymce&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/*
 * Sub URLs are used as real locations in test environment
 */
private String subURL;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private PageSubURLsProjectYEnum(String subURL) {
    this.subURL = subURL;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private PageSubURLsProjectYEnum() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String toString() {
    return getValue();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public String getValue() {
    return subURL;
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Instead of mapping data from an external file, you can store and access them directly from the enum class:

 PageSubURLsProjectYEnum.ABTEST.getValue()

[[example-01-ab-test-control.asciidoc_selector]]
==== Selector

In this test case you need selector for only one page element:

  private static final By elementalSeleniumLinkSelector = By.cssSelector(&quot;div &gt; div &gt; a&quot;);

[[example-01-ab-test-control.asciidoc_page-methods]]
==== Page methods

You need two methods for performing page actions:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> /**
 * Clicks &apos;Elemental Selenium&apos; link at the bottom of the page.
 *
 * @return ElementalSeleniumPage object.
 */
public ElementalSeleniumPage clickElementalSeleniumLink() {
    getDriver().findElementDynamic(elementalSeleniumLinkSelector)
            .click();
    getDriver().waitForPageLoaded();
    return new ElementalSeleniumPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Switches window to the next one - different than the current.
 */
public void switchToNextTab() {
    ArrayList&lt;String&gt; tabsList = new ArrayList&lt;String&gt;(getDriver().getWindowHandles());
    getDriver().switchTo()
            .window(tabsList.get(1));
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-01-ab-test-control.asciidoc_elemental-selenium-page-class]]
==== Elemental Selenium Page Class

To return new Elemental Selenium Page object implement its class. You only need to write basic methods to check if the page is loaded. There is no need to interact with objects on the site:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public class ElementalSeleniumPage extends BasePage {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(GetEnvironmentParam.ELEMENTAL_SELENIUM_PAGE.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Elemental Selenium&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.ELEMENTAL_SELENIUM_PAGE.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    @Override
    public String pageTitle() {
        return getActualPageTitle();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-01-ab-test-control.asciidoc_test-class]]
==== Test Class

Create a Test class and write a @Test method to execute the scenario:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> @Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class ABtestingTest extends TheInternetBaseTest {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private static ABtestPage abTestPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldOpenElementalSeleniumPageWhenClickElementalSeleniumLink() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Click Elemental Selenium link&quot;);
ElementalSeleniumPage elementalSeleniumPage = abTestPage.clickElementalSeleniumLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Switch browser&apos;s tab to newly opened one&quot;);
abTestPage.switchToNextTab();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Elemental Selenium Page is opened&quot;);
    assertTrue(&quot;Unable to open Elemental Selenium page&quot;, elementalSeleniumPage.isLoaded());
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-01-ab-test-control.asciidoc_assert]]
==== Assert

asserts methods are used for creating test passing or failure conditions. The optional first parameter is a message which will be displayed in the test failure description.

* assertTrue(boolean condition) - test passes if condition returns true
* assertFalse(boolean condition) - test passes if condition returns false

Also, add the @BeforeClass method to open the tested page:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
   public static void setUpBeforeClass() {
       abTestPage = shouldTheInternetPageBeOpened().clickABtestingLink();
       logStep(&quot;Verify if ABTest page is opened&quot;);
       assertTrue(&quot;Unable to open ABTest page&quot;, abTestPage.isLoaded());
   }</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>@BeforeClass method executes only once before all
@Test cases in the class. The is also a possibility to create a
@AfterClass method which is performed also once after all @Test cases.

You don&apos;t need to implement @setUp and @tearDown methods because they&apos;re already in TheInternetBaseTest class which you extends.

[[example-01-ab-test-control.asciidoc_categories]]
==== Categories

You can group tests in categories. It&apos;s useful when running many tests at once. Use this parameter:

 @Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })

Then create an interface representing each category. Example:</pre>
</div>
</div>
<div class="paragraph">
<p>public interface TestsSelenium {
    /* For test which are testing web pages considering UI (user interface) and using selenium webdriver */
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>To run a test from specified category create Test Suite class:</pre>
</div>
</div>
<div class="paragraph">
<p>@RunWith(WildcardPatternSuite.class) //search for test files under /src/test/java
@IncludeCategories({ TestsChrome.class }) // search all test files with category TestsChrome.class
@ExcludeCategories({ TestsLocal.class, TestsNONParallel.class }) //exclude all test files with category TestsLocal.class and TestsNONParallel.class
@SuiteClasses({ &quot;../**/*Test.class&quot; }) //search only test files, where file name ends with &lt;anyChar/s&gt;Test.class</p>
</div>
<div class="paragraph">
<p>public class _TestSuiteChrome {</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>You can run Test Suite as JUnit test.




:leveloffset: 3

:leveloffset: 4

image::images/image3.png[]

In this test case, the goal is to pass username and password authorization and login to the next page.

Steps:

1. Open The Internet Main Page
2. Click on Basic Auth link
3. Open pop-up login window
4. Enter valid username and password
5. Open next subpage and verify if the user logged successfully.

[[example-02-basic-auth-test.asciidoc_page-class]]
===== Page Class

Create a page class which represents Basic Auth subpage after proper login.

image::images/image4.png[]

Override all required methods:</pre>
</div>
</div>
<div class="paragraph">
<p>public class BasicAuthPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>public BasicAuthPage() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public BasicAuthPage(String login, String password) {
    this.enterLoginAndPasswordByUrl(login, password);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    return true;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;load&quot;);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>In order to verify a login, create a selector to access visible message.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> private static final By selectorTextMessage = By.cssSelector(&quot;#content &gt; div &gt; p&quot;);
Then create a method to get message value:</pre>
</div>
</div>
<div class="paragraph">
<p>/**
*       Returns message displayed by system after user&#x2019;s log in.
*      @return String object representing message displayed by system after user&#x2019;s log in
*/
    public String getMessageValue() {
                return getDriver().findElementDynamic(selectorTextMessage)
                    .getText();
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Also, create a method to access the pop-up login window and enter user credentials:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Authenticates user using standard simple authentication popup.
 *
 * @param login    User&apos;s login
 * @param password User&apos;s password
 * @throws AWTException
 * @throws InterruptedException
 */
public void enterLoginAndPassword(String login, String password) throws AWTException, InterruptedException {
    Robot rb = new Robot();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Thread.sleep(2000);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>StringSelection username = new StringSelection(login);
Toolkit.getDefaultToolkit()
        .getSystemClipboard()
        .setContents(username, null);
rb.keyPress(KeyEvent.VK_CONTROL);
rb.keyPress(KeyEvent.VK_V);
rb.keyRelease(KeyEvent.VK_V);
rb.keyRelease(KeyEvent.VK_CONTROL);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>rb.keyPress(KeyEvent.VK_TAB);
rb.keyRelease(KeyEvent.VK_TAB);
Thread.sleep(2000);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>StringSelection pwd = new StringSelection(password);
Toolkit.getDefaultToolkit()
        .getSystemClipboard()
        .setContents(pwd, null);
rb.keyPress(KeyEvent.VK_CONTROL);
rb.keyPress(KeyEvent.VK_V);
rb.keyRelease(KeyEvent.VK_V);
rb.keyRelease(KeyEvent.VK_CONTROL);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    rb.keyPress(KeyEvent.VK_ENTER);
    rb.keyRelease(KeyEvent.VK_ENTER);
    Thread.sleep(2000);
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-02-basic-auth-test.asciidoc_robot-class]]
==== Robot class

Creating a Robot object allows performing basic system actions such as pressing keys, moving the mouse or taking screenshots. In this case, it&apos;s used to paste login and password text from the clipboard using &apos;Ctrl + V&apos; shortcut, go to the next field using &apos;Tab&apos; key and submit by clicking &apos;Enter&apos;.

[[example-02-basic-auth-test.asciidoc_toolkit]]
=== Toolkit

Static class Toolkit can perform basic window actions such as scrolling to a specified position or moving context between components. In this case, it&apos;s used to set clipboard content to username and password value.</pre>
</div>
</div>
<div class="paragraph">
<p>Thread.sleep(long millis)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Web drivers like Selenium perform actions much faster than the normal user. This may cause unexpected consequences like some elements may not be loaded before the driver wants to access them. To avoid this problem you can use Thread.sleep(long millis) to wait given time and let browser load wanted component.

BEWARE: Using Thread.sleep(long millis) is not the recommended approach. Selenium driver gives methods to wait for a specified element to be enabled or visible with a timeout parameter. This is a more stable and effective way. Also, method waitForPageLoaded() could not solve that issue because it only waits for the ready state from the browser while some javascript actions might be performed after that.

[[example-02-basic-auth-test.asciidoc_test-class]]
==== Test Class

Create a Test class and write a @Test method to execute the scenario. Save parameters as class fields:</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsLocal.class, TestsNONParallel.class })
public class BasicAuthTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static BasicAuthPage basicAuthPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private String login    = &quot;admin&quot;;
private String password = &quot;admin&quot;;
private String message  = &quot;Congratulations! You must have the proper credentials.&quot;;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldUserLogInWithValidCredentials() throws InterruptedException, AWTException {
    basicAuthPage = shouldTheInternetPageBeOpened().clickBasicAuthLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Enter login and password&quot;);
basicAuthPage.enterLoginAndPassword(login, password);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if user logged in successfully&quot;);
    assertEquals(&quot;Unable to login user with valid credentials&quot;, message,
        basicAuthPage.getMessageValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    @Override
    public void tearDown() {
        logStep(&quot;Navigate back to The-Internet page&quot;);
        theInternetPage.load();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>assertEquals(Object expected, Object actual) - test passes if parameters are equal .

[[example-02-basic-auth-test.asciidoc_alternative-scenario]]
===== Alternative scenario:

There is also a possibility to log in with credentials as a part of URL: http://login:password@the-internet.herokuapp.com/basic_auth

Another page class method:</pre>
</div>
</div>
<div class="paragraph">
<p>/**
     * Authenticates user passing credentials into URL.
     *
     * @param login    User&#x2019;s login
     * @param password User&#x2019;s password
     */
    private void enterLoginAndPasswordByUrl(String login, String password) {
        getDriver().get(&quot;http://&quot; + login + &quot;:&quot; + password + &quot;@&quot; + &quot;the-internet.herokuapp.com/&quot;<br>
            PageSubURLsProjectYEnum.BASIC_AUTH.getValue());
    }</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Another test class method:</pre>
</div>
</div>
<div class="paragraph">
<p>@Test
    public void shouldUserLogInWithValidCredentialsSetInURL() {
        logStep(&quot;Enter user&#x2019;s credentials into URL to log in&quot;);
        basicAuthPage = new BasicAuthPage(login, password);</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if user logged in successfully&quot;);
    assertEquals(&quot;Unable to login user with valid credentials&quot;, message,
        basicAuthPage.getMessageValue());
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>After running test class as JUnit test both test cases will be performed.


:leveloffset: 3

:leveloffset: 4

This test goal is to check the dimensions of broken images on the subpage.

image::images/image1.png[]

Steps:

1. Open The Internet Main Page
2. Click Broken Image link and go to Broken Image subpage
3. Get 3 images dimensions and compare them with expected values

[[example-03-broken-images-test.asciidoc_page-class]]
==== Page Class

In this case create an array of selectors to access images by index number:</pre>
</div>
</div>
<div class="paragraph">
<p>public class BrokenImagePage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By[] selectorsImages = { By.cssSelector(&quot;div &gt; img:nth-child(2)&quot;),
        By.cssSelector(&quot;div &gt; img:nth-child(3)&quot;),
        By.cssSelector(&quot;div &gt; img:nth-child(4)&quot;) };</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.BROKEN_IMAGES.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Broken Images&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.BROKEN_IMAGES.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns an image height in pixels.
 *
 * @param imageIndex An index of given image.
 * @return Height of an image in pixels.
 */
public int getImageHeight(int imageIndex) {
    return getImageDimension(imageIndex).getHeight();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns an image width in pixels.
 *
 * @param imageIndex An index of given image.
 * @return Width of an image in pixels.
 */
public int getImageWidth(int imageIndex) {
    return getImageDimension(imageIndex).getWidth();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private Dimension getImageDimension(int imageIndex) {
    return getDriver().findElementDynamic(selectorsImages[imageIndex])
            .getSize();
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-03-broken-images-test.asciidoc_test-class]]
==== Test Class
Create @Test and @BeforeClass methods. Save expected images dimensions in class fields:</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class BrokenImagesTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static BrokenImagePage brokenImagePage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private final int expectedHeight = 90;
private final int expectedWidth  = 120;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    brokenImagePage = shouldTheInternetPageBeOpened().clickBrokenImageLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Broken Image page is opened&quot;);
    assertTrue(&quot;Unable to open Broken Image page&quot;, brokenImagePage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldImageSizesBeEqualToExpected() {
    for (int i = 0; i &lt; 3; i++) {
        logStep(&quot;Verify size of image with index: &quot; + i);
        assertEquals(&quot;Height of image with index: &quot; + i + &quot; is incorrect&quot;, expectedHeight,
               brokenImagePage.getImageHeight(i));
        assertEquals(&quot;Width of image with index: &quot; + i + &quot; is incorrect&quot;, expectedWidth,
               brokenImagePage.getImageWidth(i));
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>The test will pass if every image had the correct width and height.



:leveloffset: 3

:leveloffset: 4

This case goal is to find out how to create stable selectors.

In the browser&apos;s developer mode, you can see how the page is built. Notice, that buttons IDs change after click and values in the table haven&apos;t got unique attributes, which might be helpful in order to find them.

image::images/image1.png[]

[[example-04-challenging-dom-test.asciidoc_dom---document-object-model]]
===== DOM - Document Object Model

HTML DOM is a model of the page created by the browser. The page could be represented as the tree of objects. Read more.

To create locators you can use element attributes such as id, class name etc.

It this case since there are not unique attributes, the best approach is to use HTML document structure and identify page elements by its place in an object hierarchy.</pre>
</div>
</div>
<div class="paragraph">
<p>Page Class
public class ChallengingDomPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private final By selectorTableRows   = By.cssSelector(&quot;.large-10 &gt; table &gt; tbody &gt; tr&quot;);
private final By selectorFirstButton = By.cssSelector(&quot;.large-2.columns &gt; .button:nth-
        child(1)&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.CHALLENGING_DOM.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Challenging DOM&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.CHALLENGING_DOM.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns table text content as a list of String objects.
 *
 * @return A list of table values.
 */
public List&lt;String&gt; getTableValues() {
    return JsoupHelper.findTexts(selectorTableRows);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Clicks top button on the page from available button set.
 */
public void clickFirstButton() {
    getDriver().elementButton(selectorFirstButton)
            .click();
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-04-challenging-dom-test.asciidoc_jsoupe-helper]]
===== Jsoupe Helper
Jsoupe Helper is the tool which helps to parse HTML document and getting searched values. Especially useful when values are organized in a generic structure such as a table.

JsoupHelper.findTexts(By selector) - this method returns text content of a table as a list of Strings

[[example-04-challenging-dom-test.asciidoc_test-class]]
===== Test Class
Steps:

1. Open The Internet Main Page
2. Click Challenging DOM link and go to Challenging DOM subpage
3. Get and save table values
4. Click the first button
5. Again get table values
6. Compare table values before and after button click</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class ChallengingDomTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static ChallengingDomPage challengingDomPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    challengingDomPage = shouldTheInternetPageBeOpened().clickChallengingDomLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Challenging Dom page is opened&quot;);
    assertTrue(&quot;Unable to open Challenging Dom page&quot;, challengingDomPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldValuesInTableCellsStayUnchangedAfterClick() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Get table values (before click any button)&quot;);
List&lt;String&gt; tableValuesBeforeClick = challengingDomPage.getTableValues();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Click first button&quot;);
challengingDomPage.clickFirstButton();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Get table values (after click first button)&quot;);
List&lt;String&gt; tableValuesAfterClick = challengingDomPage.getTableValues();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify equality of table values before and after click&quot;);
    assertEquals(&quot;Values from table cells were changed after click&quot;, tableValuesBeforeClick,
            tableValuesAfterClick);
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Because values in the table don&apos;t change, the test should pass if object locators are solid.

:leveloffset: 3

:leveloffset: 4

In this example, you will learn how to test checkboxes on the page.

image::images/image7.png[]

A checkbox is a simple web element which can be selected or unselected by clicking on it.

Steps:

1. Open The Internet Main Page
2. Click Checkboxes link and go to Checkboxes page
3. Test if the first checkbox is unchecked
4. Select the first checkbox
5. Test if the first checkbox is checked
6. Test if the second checkbox is checked
7. Unselect second checkbox
8. Test if the second checkbox is unchecked

[[example-05-checkboxes.asciidoc_page-class]]
===== Page Class

Because both checkboxes are in one form it&apos;s possible to locate them by one selector and then access each one by index.

image::images/image8.png[]</pre>
</div>
</div>
<div class="paragraph">
<p>public class CheckboxesPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private final static By checkboxesFormSelector = By.cssSelector(&quot;#checkboxes&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.CHECKBOX.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Checkboxes&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.CHECKBOX.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Verifies if checkbox form is visible on the page.
 *
 * @return true if checkboxes are present and displayed on the page
 */
public boolean isElementCheckboxesFormVisible() {
    return getDriver().elementCheckbox(checkboxesFormSelector)
            .isDisplayed();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Verifies if given checkbox is selected or not.
 *
 * @param index The index of given checkbox
 * @return true if given checkbox is selected
 */
public boolean isCheckboxSelected(int index) {
    return getDriver().elementCheckbox(checkboxesFormSelector)
            .isCheckBoxSetByIndex(index);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Selects given checkbox. Unselects, if it is already selected.
 *
 * @param index The index of given checkbox
 */
public void selectCheckbox(int index) {
    CheckBox checkbox = getDriver().elementCheckbox(checkboxesFormSelector);
    if (isCheckboxSelected(index)) {
        checkbox.unsetCheckBoxByIndex(index);
    } else {
        checkbox.setCheckBoxByIndex(index);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-05-checkboxes.asciidoc_checkbox]]
===== CheckBox
CheckBox class gives method to perform actions on checkboxes such as setting and unsetting or verifying if the specified box is checked.
Use method elementCheckbox(By selector) to create CheckBox Object.

[[example-05-checkboxes.asciidoc_test-class]]
===== Test Class</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class CheckboxesTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static CheckboxesPage checkboxesPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void setUp() {
    checkboxesPage = shouldTheInternetPageBeOpened().clickCheckboxesLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Checkboxes page is opened&quot;);
    assertTrue(&quot;Unable to open Checkboxes page&quot;, checkboxesPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldCheckboxBeSelectedAfterClick() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if first checkbox is not selected&quot;);
assertFalse(&quot;The checkbox is selected&quot;, checkboxesPage.isCheckboxSelected(0));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Select first checkbox&quot;);
checkboxesPage.selectCheckbox(0);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if first checkbox is selected&quot;);
    assertTrue(&quot;The checkbox is not selected&quot;, checkboxesPage.isCheckboxSelected(0));
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldCheckboxBeUnselectedAfterClick() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if second checkbox is selected&quot;);
assertTrue(&quot;The checkbox is not selected&quot;, checkboxesPage.isCheckboxSelected(1));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Select second checkbox&quot;);
checkboxesPage.selectCheckbox(1);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if second checkbox is not selected&quot;);
    assertFalse(&quot;The checkbox is selected&quot;, checkboxesPage.isCheckboxSelected(1));
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>After running Test Class both @Test cases will be performed. Before each one overrode setUp method will be executed.

:leveloffset: 3

:leveloffset: 4

This case will show how to test changing website content.

image::images/image9.png[]

After refreshing page (F5) a few times, a new element should appear:

image::images/image10.png[]
Then after another few refreshes, it should disappear.

You can check in developer mode that Gallery element also does not exist in HTML document until appearing on the page. The element is created by Javascript.

image::images/image11.png[]
image::images/image12.png[]

Steps:

1. Load The Internet Main Page
2. Click Disappearing Elements link and go to that subpage
3. Check if Menu Buttons exist on the page
4. Refresh the page until new element appears
5. Check if Gallery Button exists
6. Check if the number of buttons equals the expected value
7. Refresh the page until element disappears
8. Check if Gallery Button does not exist
9. Check if the number of buttons is lesser than before

[[example-06-disappearing-elements.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class DisappearingElementsPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By selectorGalleryMenuButton = By.cssSelector(&quot;li &gt; a[href*=gallery]&quot;);
private static final By selectorMenuButtons       = By.cssSelector(&quot;li&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.DISAPPEARING_ELEMENTS.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Disappearing Elements&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.DISAPPEARING_ELEMENTS.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns a number of WebElements representing menu buttons.
 *
 * @return A number of WebElements.
 */
public int getNumberOfMenuButtons() {
    return getDriver().findElementDynamics(selectorMenuButtons)
            .size();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns WebElement representing disappearing element of menu.
 *
 * @return Disappearing WebElement if visible, null otherwise.
 */
public WebElement getGalleryMenuElement() {
    return getDriver().findElementQuietly(selectorGalleryMenuButton);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Refreshes web page as many times as it is required to appear/disappear menu button
 * WebElement.
 *
 * @param shouldAppear Determines if element should appear (true) or disappear (false).
 */
public void refreshPageUntilWebElementAppears(boolean shouldAppear) {
    int numberOfAttempts = 5;
    int counter = 0;
    while (!isVisibilityAsExpected(shouldAppear) || isMaxNumberOfAttemptsReached(counter++,
            numberOfAttempts)) {
        refreshPage();
    }
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Verify if visibility of Gallery button is the same as expected
 *
 * @param expected Determines if element should be visible (true) or not visible (false).
 */
private boolean isVisibilityAsExpected(boolean expected) {
    boolean isVisibilityDifferentThanExpected = isGalleryMenuElementVisible() ^ expected;
    return !isVisibilityDifferentThanExpected;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private boolean isGalleryMenuElementVisible() {
    boolean result = false;
    WebElement gallery = getGalleryMenuElement();
    if (gallery != null)
        result = gallery.isDisplayed();
    return result;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private boolean isMaxNumberOfAttemptsReached(int attemptNo, int maxNumberOfAttempts) {
    return attemptNo == maxNumberOfAttempts;
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>findElementQuietly(By selector) works similar as findElementDynamics(By selector) but won&apos;t throw expectation if an element wasn&apos;t found. In that case, searched WebElement will have a NULL value.

[[example-06-disappearing-elements.asciidoc_test-class]]
===== Test Class</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class DisappearingElementsTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final int totalNumberOfMenuButtons = 5;
private static DisappearingElementsPage disappearingElementsPage;
private static       int numberOfMenuButtons      = 0;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    disappearingElementsPage = shouldTheInternetPageBeOpened().clickDisappearingElementsLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if Disappearing Elements page is opened&quot;);
assertTrue(&quot;Unable to open Disappearing Elements page&quot;,
        disappearingElementsPage.isLoaded());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if menu button elements are visible&quot;);
    numberOfMenuButtons = disappearingElementsPage.getNumberOfMenuButtons();
    assertTrue(&quot;Unable to display menu&quot;, numberOfMenuButtons &gt; 0);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldMenuButtonElementAppearAndDisappearAfterRefreshTest() {
    logStep(&quot;Click refresh button until menu button appears&quot;);
    disappearingElementsPage.refreshPageUntilWebElementAppears(true);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if menu button element appeared&quot;);
assertNotNull(&quot;Unable to disappear menu button element&quot;,
        disappearingElementsPage.getGalleryMenuElement());
assertEquals(&quot;The number of button elements after refresh is incorrect&quot;,
        totalNumberOfMenuButtons, disappearingElementsPage.getNumberOfMenuButtons());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Click refresh button until menu button disappears&quot;);
disappearingElementsPage.refreshPageUntilWebElementAppears(false);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if menu button element disappeared&quot;);
    assertNull(&quot;Unable to appear menu button element&quot;,
            disappearingElementsPage.getGalleryMenuElement());
    assertTrue(&quot;The number of button elements after refresh is incorrect&quot;,
            totalNumberOfMenuButtons &gt; disappearingElementsPage.getNumberOfMenuButtons());
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>assertNull(Objetc object) - test passes if Object returns NULL
assertNotNull(Objetc object) - test passes if Object does not return NULL

:leveloffset: 3

:leveloffset: 4

This case shows how to move draggable elements on the page.
image::images/image13.png[]

Try to move A to B position and see what happens. Also, open browser developer mode and see how the DOM is changing.

image::images/image14.png[]

Page can be easily broken. You can try to do so and check how the page structure changed in browser developer mode.

image::images/image15.png[]

Steps:

1. Open The Internet Main Page
2. Click Drag and Drop link and open subpage
3. Check if Drag and Drop message is visible
4. Check if element A is in container A and B in container B
5. Move element A to position B
6. Check if element A is in container B and B in container A
7. Move element B to position A
8. Again check if element A is in container A and B in container B

[[example-07-drag-and-drop.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class DragAndDropPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By selectorDragAndDropText    = By.cssSelector(&quot;div#content h3&quot;);
private static final By selectorAElementContainer  = By.cssSelector(&quot;div#column-a&quot;);
private static final By selectorBElementContainer  = By.cssSelector(&quot;div#column-b&quot;);
private static final By selectorDescriptionElement = By.cssSelector(&quot;header&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final String dndHelperPath = &quot;src/test/resources/js/drag_and_drop_helper.js&quot;;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.DRAG_AND_DROP.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Drag and Drop&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() + PageSubURLsProjectYEnum.DRAG_AND_DROP.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns information if drag and drop message is visible or not.
 *
 * @return true if exit drag and drop message was found on web page.
 */
public boolean isDragAndDropMessageVisible() {
    return getDriver().findElementDynamic(selectorDragAndDropText)
            .isDisplayed();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Verifies if specified element is placed in designated container.
 *
 * @param element WebElement to be verified.
 * @return true if element described as A exists in container A or element B exists in container B, false otherwise.
 */
public boolean isElementPlacedInCorrectContainer(String element) {
    return getDescriptionElement(findElementByDescription(element)).getText()
            .equals(element);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private WebElement findElementByDescription(String element) {
    WebElement result;
    switch (element) {
        case &quot;A&quot;:
            result = getContainerElement(selectorAElementContainer);
            break;
        case &quot;B&quot;:
            result = getContainerElement(selectorBElementContainer);
            break;
        default:
            result = null;
            BFLogger.logDebug(&quot;Chosen element doesn&apos;t exist on web page&quot;);
    }
    return result;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private WebElement getContainerElement(By container) {
    return getDriver().findElementDynamic(container);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private WebElement getDescriptionElement(WebElement container) {
    return container.findElement(selectorDescriptionElement);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Drags element to designated container and drops it.
 *
 * @param element         String describing WebElement expected to be dragged.
 * @param from            String describing WebElement representing container of element expected to be dragged.
 * @param destinationDesc String describing WebElement representing destination container where other element will be dragged.
 */
public void dragElementToPosition(String element, String from, String destinationDesc) {
    WebElement source = findElementByDescription(from);
    WebElement description = getDescriptionElement(source);
    WebElement destination = findElementByDescription(destinationDesc);
    if (description.getText()
            .equals(element))
        dragElement(source, destination);
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Because since HTML5 normal Selenium drag-and-drop action stopped working it&apos;s necessary to execute Javascript which performs drag-and-drop. To do so create a JavascriptExecutor object, then read the script from a file drag_and_drop_helper.js and execute it with additional arguments using method executeScript(String script).

Example drag-and-drop solution:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Drags and drops given WebElement to it&apos;s destination location.
 * &lt;p&gt;
 * Since HTML5 all Selenium Actions performing drag and drop operations stopped working as expected, e.g.
 * original implementation, which was:
 * &lt;code&gt;
 * BasePage.getAction()
 * .clickAndHold(draggable)
 * .moveToElement(target)
 * .release()
 * .build()
 * .perform();
 * &lt;/code&gt;
 * had finished with no effect. For this reason, there is javaScript function used, to make sure that
 * drag and drop operation will be successful.
 * JavaScript function is stored under following path: &apos;src/test/resources/js/drag_and_drop_helper.js&apos;.
 * Original source of the script:
 * &lt;a href=&quot;https://gist.github.com/rcorreia/2362544&quot;&gt;drag_and_drop_helper&lt;/a&gt;
 * &lt;/p&gt;
 *
 * @param draggable A WebElement to be dragged and dropped.
 * @param target    A destination, where element will be dropped.
 * @see JavascriptExecutor
 * @see Actions
 */
private void dragElement(WebElement draggable, WebElement target) {
    JavascriptExecutor js;
    INewWebDriver driver = getDriver();
    List&lt;String&gt; fileContent;
    String draggableId = draggable.getAttribute(&quot;id&quot;);
    String targetId = target.getAttribute(&quot;id&quot;);
    String script = null;
    if (draggable.getAttribute(&quot;draggable&quot;)
            .contains(&quot;true&quot;)) {
        if (driver instanceof JavascriptExecutor) {
            js = (JavascriptExecutor) driver;
            Path path = Paths.get(dndHelperPath);
            try {
                fileContent = Files.readAllLines(path);
                script = fileContent.stream()
                        .collect(Collectors.joining());
            } catch (IOException e) {
                BFLogger.logDebug(&quot;Unable to read file content: &quot; + e.getMessage());
            }
            if (script != null &amp;&amp; !script.isEmpty()) {
                String arguments = &quot;$(&apos;#%s&apos;).simulateDragDrop({ dropTarget: &apos;#%s&apos;});&quot;;
                js.executeScript(script + String.format(arguments, draggableId, targetId));
            }
        }
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Drag and Drop helper file:</pre>
</div>
</div>
<div class="paragraph">
<p>(function( $ ) {
        $.fn.simulateDragDrop = function(options) {
                return this.each(function() {
                        new $.simulateDragDrop(this, options);
                });
        };
        $.simulateDragDrop = function(elem, options) {
                this.options = options;
                this.simulateEvent(elem, options);
        };
        $.extend($.simulateDragDrop.prototype, {
                simulateEvent: function(elem, options) {
                        /<strong>Simulating drag start</strong>/
                        var type = &apos;dragstart&apos;;
                        var event = this.createEvent(type);
                        this.dispatchEvent(elem, type, event);</p>
</div>
<div class="literalblock">
<div class="content">
<pre>/*Simulating drop*/
type = &apos;drop&apos;;
var dropEvent = this.createEvent(type, {});
dropEvent.dataTransfer = event.dataTransfer;
this.dispatchEvent($(options.dropTarget)[0], type, dropEvent);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>                        /*Simulating drag end*/
                        type = &apos;dragend&apos;;
                        var dragEndEvent = this.createEvent(type, {});
                        dragEndEvent.dataTransfer = event.dataTransfer;
                        this.dispatchEvent(elem, type, dragEndEvent);
                },
                createEvent: function(type) {
                        var event = document.createEvent(&quot;CustomEvent&quot;);
                        event.initCustomEvent(type, true, true, null);
                        event.dataTransfer = {
                                data: {
                                },
                                setData: function(type, val){
                                        this.data[type] = val;
                                },
                                getData: function(type){
                                        return this.data[type];
                                }
                        };
                        return event;
                },
                dispatchEvent: function(elem, type, event) {
                        if(elem.dispatchEvent) {
                                elem.dispatchEvent(event);
                        }else if( elem.fireEvent ) {
                                elem.fireEvent(&quot;on&quot;+type, event);
                        }
                }
        });
})(jQuery);</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-07-drag-and-drop.asciidoc_test-class]]
===== Test Class</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class DragAndDropTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final String ELEMENT_A   = &quot;A&quot;;
private static final String CONTAINER_A = &quot;A&quot;;
private static final String ELEMENT_B   = &quot;B&quot;;
private static final String CONTAINER_B = &quot;B&quot;;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private static DragAndDropPage dragAndDropPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    dragAndDropPage = shouldTheInternetPageBeOpened().clickDragAndDropLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if Drag And Drop page is opened&quot;);
assertTrue(&quot;Unable to open Drag And Drop page&quot;, dragAndDropPage.isLoaded());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Drag And Drop message is visible&quot;);
    assertTrue(&quot;Drag And Drop message is not visible&quot;, dragAndDropPage.isDragAndDropMessageVisible());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldDraggableElementBeMovedAndDropped() {
    logStep(&quot;Verify if elements are placed in proper containers&quot;);
    assertTrue(&quot;Element A doesn&apos;t exist in container A&quot;, dragAndDropPage.isElementPlacedInCorrectContainer(ELEMENT_A));
    assertTrue(&quot;Element B doesn&apos;t exist in container B&quot;, dragAndDropPage.isElementPlacedInCorrectContainer(ELEMENT_B));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Step 7: Drag and drop element A into container B&quot;);
dragAndDropPage.dragElementToPosition(ELEMENT_A, CONTAINER_A, CONTAINER_B);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Step 8: Verify if elements are placed in improper containers&quot;);
assertFalse(&quot;Element A doesn&apos;t exist in container B&quot;, dragAndDropPage.isElementPlacedInCorrectContainer(ELEMENT_A));
assertFalse(&quot;Element B doesn&apos;t exist in container A&quot;, dragAndDropPage.isElementPlacedInCorrectContainer(ELEMENT_B));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Drag and drop element B back into container B&quot;);
dragAndDropPage.dragElementToPosition(ELEMENT_A, CONTAINER_B, CONTAINER_A);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if elements are placed in proper containers&quot;);
    assertTrue(&quot;Element A doesn&apos;t exist in container A&quot;, dragAndDropPage.isElementPlacedInCorrectContainer(ELEMENT_A));
    assertTrue(&quot;Element B doesn&apos;t exist in container B&quot;, dragAndDropPage.isElementPlacedInCorrectContainer(ELEMENT_B));
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 4

This example shows how to select an element from the dropdown list.

image::images/image16.png[]

Check in the developer mode how a Dropdown List&apos;s content has been organized.

image::images/image17.png[]

Notice, that the Dropdown Options have different attributes, such as &quot;disabled&quot; or &quot;selected&quot;.

Steps:

1. Open The Internet Main Page
2. Click the Dropdown link and go to the subpage
3. Select first dropdown Option
4. Check if Option 1 is selected
5. Select second dropdown Option
6. Check if Option 2 is selected

[[example-08-dropdown-list.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class DropdownPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By dropdownListSelector = By.cssSelector(&quot;#dropdown&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.DROPDOWN.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Dropdown List&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.DROPDOWN.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Selects doropdown&apos;s value by given index.
 *
 * @param index Index of option to be selected
 */
public void selectDropdownValueByIndex(int index) {
    getDriver().elementDropdownList(dropdownListSelector)
            .selectDropdownByIndex(index);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    /**
     * Returns text value of first selected dropdown&apos;s option.
     *
     * @return String object representing value of dropdown&apos;s option
     */
    public String getSelectedDropdownValue() {
        return getDriver().elementDropdownList(dropdownListSelector)
                .getFirstSelectedOptionText();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-08-dropdown-list.asciidoc_dropdownlistelement-class]]
===== DropdownListElement class

DropdownListElement is MrChecker&apos;s class, which gives methods for performing the dropdown list of actions:</pre>
</div>
</div>
<div class="paragraph">
<p>elementDropdownList() - returns DropdownListElement Object</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-08-dropdown-list.asciidoc_test-class]]
===== Test Class</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class DropdownTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final String expectedFirstOptionValue  = &quot;Option 1&quot;;
private static final String expectedSecondOptionValue = &quot;Option 2&quot;;
private static DropdownPage dropdownPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    dropdownPage = shouldTheInternetPageBeOpened().clickDropdownLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Dropdown page is opened&quot;);
    assertTrue(&quot;Unable to open Dropdown page&quot;, dropdownPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldGetExpectedDropdownTextOptionAfterSelection() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Select first drodown option&quot;);
dropdownPage.selectDropdownValueByIndex(1);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if selected option text is equal to expected one&quot;);
assertEquals(&quot;Selected value is different than expected&quot;, expectedFirstOptionValue,
        dropdownPage.getSelectedDropdownValue());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Select first drodown option&quot;);
dropdownPage.selectDropdownValueByIndex(2);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if selected option text is equal to expected one&quot;);
    assertEquals(&quot;Selected value is different than expected&quot;, expectedSecondOptionValue,
            dropdownPage.getSelectedDropdownValue());
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 4

This case shows how to compare dynamic content.

image::images/image18.png[]
Note, that after site refresh, some of the content is different. You can see in the browser&apos;s developer mode how the text and image sources are being changed.

image::images/image19.png[]

Steps:

1. Open The Internet Main Page
2. Click Dynamic Content link and load subpage
3. Save page images sources and it&apos;s descriptions before the refresh
4. Refresh page
5. Save page images sources and it&apos;s descriptions after refresh
6. Compare page content before and after refresh and verify if it&apos;s different

[[example-09-dynamic-content.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class DynamicContentPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By imagesLinksSelector        = By.cssSelector(&quot;div#content &gt; div.row img&quot;);
private static final By imagesDescriptionsSelector = By.cssSelector(&quot;div#content &gt; div.row div.large-10&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.DYNAMIC_CONTENT.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Dynamic Content&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.DYNAMIC_CONTENT.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns list of picture descriptions being present on the web page.
 *
 * @return List of String objects representing descriptions
 */
public List&lt;String&gt; getDescriptions() {
    return new ListElements(imagesDescriptionsSelector).getTextList();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    /**
     * Returns a list of image links being present on the web page.
     *
     * @return List of String objects representing paths to pictures
     */
    public List&lt;String&gt; getImageLinks() {
        return new ListElements(imagesLinksSelector)
                .getList()
                .stream()
                .map(element -&gt; element.getAttribute(&quot;src&quot;))
                .collect(Collectors.toList());
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-09-dynamic-content.asciidoc_listelements]]
===== ListElements

ListElements is MrChecker collection which can store WebElement Objects. Constructing ListElements with cssSelector allows to store every element on the page which fits to the selector. Example methods:</pre>
</div>
</div>
<div class="paragraph">
<p>getList() -  returns WebElements list,
getTextList() - returns list of content of each Element,
getSize() - returns amount of stored Elements
In getImageLinks() example it&#x2019;s showed how to get list of specified Elements&apos; attributes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-09-dynamic-content.asciidoc_test-class]]
===== Test Class</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class DynamicContentTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static DynamicContentPage dynamicContentPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    dynamicContentPage = shouldTheInternetPageBeOpened().clickDynamicContentLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Dynamic Content page is opened&quot;);
    assertTrue(&quot;Unable to open Dynamic Content page&quot;, dynamicContentPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldImagesAndDescriptionsDifferAfterRefresh() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Read images and descriptions before refresh&quot;);
List&lt;String&gt; descriptionsBeforeRefresh = dynamicContentPage.getDescriptions();
List&lt;String&gt; imagesBeforeRefresh = dynamicContentPage.getImageLinks();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Refres page&quot;);
dynamicContentPage.refreshPage();
assertTrue(&quot;The Dynamic Content page hasn&apos;t been refreshed&quot;, dynamicContentPage.isLoaded());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Read images and descriptions after refresh&quot;);
List&lt;String&gt; descriptionsAfterRefresh = dynamicContentPage.getDescriptions();
List&lt;String&gt; imagesAfterRefresh = dynamicContentPage.getImageLinks();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if descriptions are different after refresh&quot;);
assertEquals(&quot;Different number of descriptions before and after refresh&quot;,
        descriptionsAfterRefresh.size(), descriptionsBeforeRefresh.size());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>boolean diversity = false;
for (int i = 0; i &lt; descriptionsAfterRefresh.size(); i++) {
    if (!descriptionsAfterRefresh.get(i)
            .equals(descriptionsBeforeRefresh.get(i))) {
        diversity = true;
        break;
    }
}
assertTrue(&quot;There are no differences between descriptions before and after refresh&quot;,
        diversity);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if images are different after refresh&quot;);
assertEquals(&quot;Different number of descriptions before and after refresh&quot;,
        imagesAfterRefresh.size(), imagesBeforeRefresh.size());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        diversity = false;
        for (int i = 0; i &lt; imagesAfterRefresh.size(); i++) {
            if (!imagesAfterRefresh.get(i)
                    .equals(imagesBeforeRefresh.get(i))) {
                diversity = true;
                break;
            }
        }
        assertTrue(&quot;There are no differences between images before and after refresh&quot;, diversity);
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>In the test method, during differences verification, the goal is to compare every element from the first and second list and find first diversity.

:leveloffset: 3

Unresolved directive in mrchecker.wiki/master-mrchecker.asciidoc - include::Who-Is-MrChecker/Tutorials/Basic-Tutorials/Basic-Tests/Example-10-Dynamically-loaded-elemets.asciidoc[leveloffset=4]

:leveloffset: 4

image::images/image32.png[]

This case shows how to perform mouse actions and test modal windows.

After you move the mouse cursor out of the website, you should see a new window appearing:

image::images/image33.png[]

Check in the browser&apos;s developer mode if this window exists in Page DOM

image::images/image34.png[]

Before you move the mouse out, the window exists, but it&apos;s not displayed.

When the mouse is moved, JavaScript changes display attribute. It also hides window after clicking &quot;Close&quot;.

image::images/image35.png[]

[[example-11-exit-intent.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class ExitIntentPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final String MODAL_WINDOW_HIDDEN           = &quot;display: none;&quot;;
private static final String MODAL_WINDOW_DISPLAYED        = &quot;display: block;&quot;;
private static final String MODAL_WINDOW_STYLE_ATTRIBUTTE = &quot;style&quot;;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By selectorModalWindow            = By.cssSelector(&quot;div#ouibounce-modal&quot;);
private static final By selectorExitIntentText         = By.cssSelector(&quot;div#content h3&quot;);
private static final By selectorModalWindowTitle       = By.cssSelector(&quot;h3&quot;);
private static final By selectorModalWindowCloseButton = By.cssSelector(&quot;div.modal-footer &gt; p&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.EXIT_INTENT.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Exit Intent&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.EXIT_INTENT.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns information if exit intent message is visible or not.
 *
 * @return true if exit intent message was found on web page.
 */
public boolean isIntentMessageVisible() {
    return getDriver().findElementDynamic(selectorExitIntentText)
            .isDisplayed();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns information if modal window is hidden.
 *
 * @return true if modal window is hidden.
 */
public boolean isModalWindowHidden() {
    return getDriver().findElementDynamic(selectorModalWindow)
            .getAttribute(MODAL_WINDOW_STYLE_ATTRIBUTTE)
            .equals(MODAL_WINDOW_HIDDEN);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns information if modal window is showed on web page.
 *
 * @return true if modal window is displayed.
 */
public boolean isModalWindowVisible() {
    return getDriver().findElementDynamic(selectorModalWindow)
            .getAttribute(MODAL_WINDOW_STYLE_ATTRIBUTTE)
            .equals(MODAL_WINDOW_DISPLAYED);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns information if modal window title is shown and correct.
 *
 * @param expectedValue String representing expected value of modal window&apos;s title.
 * @return true if modal window&apos;s title is equal to expected value.
 */
public boolean verifyModalWindowTitle(String expectedValue) {
    return getDriver().elementLabel(new ByChained(selectorModalWindow,
            selectorModalWindowTitle))
            .getText()
            .equals(expectedValue);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Closes modal window by pressing &apos;close&apos; button.
 */
public void closeModalWindow() {
    getDriver().elementButton(new ByChained(selectorModalWindow,
            selectorModalWindowCloseButton))
            .click();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Moves mouse pointer to the middle of screen at the top, then to the middle of screen and
 * again to the top.
 * &lt;p&gt;
 * This move simulates leave of the viewport and encourages the modal to show up. There is
 * java.awt.Robot used
 * to move mouse pointer out of viewport. There are timeouts used to let the browser detect
 * mouse move.
 * &lt;/p&gt;
 *
 * @see java.awt.Robot
 */
public void moveMouseOutOfViewport() {
    Robot robot;
    Dimension screenSize = getDriver().manage()
            .window()
            .getSize();
    int halfWidth = new BigDecimal(screenSize.getWidth() / 2).intValue();
    int halfHeight = new BigDecimal(screenSize.getHeight() / 2).intValue();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        try {
            robot = new Robot();
            robot.mouseMove(halfWidth, 1);
            getDriver().manage()
                    .timeouts()
                    .implicitlyWait(1, TimeUnit.SECONDS);
            robot.mouseMove(halfWidth, halfHeight);
            getDriver().manage()
                    .timeouts()
                    .implicitlyWait(1, TimeUnit.SECONDS);
            robot.mouseMove(halfWidth, 1);
        } catch (AWTException e) {
            BFLogger.logError(&quot;Unable to connect with remote mouse&quot;);
            e.printStackTrace();
        }
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-11-exit-intent.asciidoc_attributes]]
===== Attributes

Elements on pages have attributes like &quot;id&quot;, &quot;class&quot;, &quot;name&quot;, &quot;style&quot; etc. In order to check them, use method `getAttribute(String name)`. In this case attribute &quot;style&quot; determinates if the element is displayed.

[[example-11-exit-intent.asciidoc_robot]]
===== Robot

Robot class can perform mouse movement. Method `mouseMove(int x, int y)` moves the remote mouse to given coordinates.

[[example-11-exit-intent.asciidoc_manage-timeouts]]
===== Manage Timeouts

`manage().timeouts()` methods allow to change WebDriver timeouts values such as:

* `pageLoadTimeout(long time, TimeUnit unit)` - the amount of time to wait for a page to load before throwing an exception
* `setScriptTimeout(long time, TimeUnit unit)` - the amount of time to wait for finish execution of script before throwing an exception
* `implicitlyWait(long time, TimeUnit unit)` - the amount of time the driver should wait when searching for an element if it is not immediately present. After that time throws an exception.

Changing timeouts can improve test stability but can also make run time slower.

[[example-11-exit-intent.asciidoc_test-class]]
===== Test Class

Steps:

1. Open The Internet Main Page
2. Click Exit Intent link and load subpage
3. Check if the page is loaded and &quot;Exit Intent&quot; message is visible
4. Verify if Modal Window is hidden
5. Move mouse out of the viewport
6. Check if Modal Window is visible
7. Verify if Modal Window title is correct
8. Click close button
9. Again verify if Modal Window is hidden</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsLocal.class, TestsNONParallel.class })
public class ExitIntentTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final String MODAL_WINDOW_TITLE = &quot;This is a modal window&quot;;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private static ExitIntentPage exitIntentPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    exitIntentPage = shouldTheInternetPageBeOpened().clickExitIntentLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if Exit Intent page is opened&quot;);
assertTrue(&quot;Unable to open Exit Intent page&quot;, exitIntentPage.isLoaded());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if exit intent message is visible&quot;);
    assertTrue(&quot;Exit intent message is not visible&quot;, exitIntentPage.isIntentMessageVisible());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldModalWindowAppearWhenMouseMovedOutOfViewportTest() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if modal window is hidden&quot;);
assertTrue(&quot;Fail to hide modal window&quot;, exitIntentPage.isModalWindowHidden());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Move mouse pointer out of viewport&quot;);
exitIntentPage.moveMouseOutOfViewport();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if modal window showed up&quot;);
assertTrue(&quot;Fail to show up modal window&quot;, exitIntentPage.isModalWindowVisible());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if modal window title displays properly&quot;);
assertTrue(&quot;Fail to display modal window&apos;s title&quot;,
        exitIntentPage.verifyModalWindowTitle(MODAL_WINDOW_TITLE.toUpperCase()));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Close modal window&quot;);
exitIntentPage.closeModalWindow();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        logStep(&quot;Verify if modal window is hidden again&quot;);
        assertTrue(&quot;Fail to hide modal window&quot;, exitIntentPage.isModalWindowHidden());
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>*Remember not to move mouse manually during test execution.*

:leveloffset: 3

:leveloffset: 4

image::images/image36.png[]

This example shows how to check if file downloads properly.

After click on one of these links specific file should be downloaded on your computer.

Steps:

1. Open The Internet Main Page
2. Click on the File Download link and open subpage
3. Click on &quot;some-file.txt&quot; download link and download file
4. Check if the file exists in the appropriate folder
5. Delete the file
6. Check if the file doesn&apos;t exist in the folder

[[example-12-file-download-test.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class FileDownloadPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By selectorSomeFileTxt = By.cssSelector(&quot;a[href*=some-file]&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private final String DOWNLOAD_DIR = System.getProperty(&quot;java.io.tmpdir&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.DOWNLOAD.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;File Downloader&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.DOWNLOAD.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Verifies if chosen file is already downloaded and downloads it if not.
 * Throws RuntimeException otherwise.
 *
 * @return Downloaded file
 */
public File downloadTextFile() {
    String nameOfDownloadFile = getNameOfDownloadFile();
    File fileToDownload = new File(DOWNLOAD_DIR + nameOfDownloadFile);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>if (fileToDownload.exists()) {
    throw new RuntimeException(&quot;File that you want to download already exists. &quot;
            + &quot;Please remove it manually. Path to this file: &quot; + fileToDownload.getPath());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>getDriver().elementButton(selectorSomeFileTxt)
        .click();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    waitForFileDownload(2000, fileToDownload);
    return fileToDownload;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private void waitForFileDownload(int totalTimeoutInMillis, File expectedFile) {
    FluentWait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(getDriver())
            .withTimeout(totalTimeoutInMillis, TimeUnit.MILLISECONDS)
            .pollingEvery(200, TimeUnit.MILLISECONDS);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    wait.until((WebDriver wd) -&gt; expectedFile.exists());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    private String getNameOfDownloadFile() {
        String urlToDownload = getDriver().findElementDynamic(selectorSomeFileTxt)
                .getAttribute(&quot;href&quot;);
        String[] urlHierachy = urlToDownload.split(&quot;/&quot;);
        return urlHierachy[urlHierachy.length - 1];
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Use FluentWait class and create expected condition using a lambda expression to wait until file downloads.

To perform operations on files use java File class. To get file name find it in download URL.

[[example-12-file-download-test.asciidoc_test-class]]
===== Test Class</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsLocal.class, TestsNONParallel.class })
public class FileDownloadTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static FileDownloadPage fileDownloadPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    fileDownloadPage = shouldTheInternetPageBeOpened().clickFileDownloadLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if File Download page is opened&quot;);
    assertTrue(&quot;Unable to open File Download page&quot;, fileDownloadPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldfileBeDownloaded() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Download the some-file.txt&quot;);
File downloadedFile = fileDownloadPage.downloadTextFile();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if downloaded file exists&quot;);
assertTrue(&quot;Downloaded file does not exist&quot;, downloadedFile.exists());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Remove downloaded file&quot;);
downloadedFile.delete();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        logStep(&quot;Verify if downloaded file has been removed&quot;);
        assertFalse(&quot;Downloaded file still exists&quot;, downloadedFile.exists());
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 4

image::images/image37.png[]

This case shows how to pass through the standard authentication page.

When you enter the correct credentials, you should see the next page:

image::images/image38.png[]

If user data is wrong, appropriate message appears:

image::images/image39.png[]

[[example-13-form-authentication-test.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class FormAuthenticationPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private final static By selectorInputUsername     = By.cssSelector(&quot;#username&quot;);
private final static By selectorInputUserPassword = By.cssSelector(&quot;#password&quot;);
private final static By selectorLoginMessage      = By.cssSelector(&quot;#flash&quot;);
private final static By selectorLoginButton       = By.cssSelector(&quot;#login &gt; button &gt; i&quot;);
private final static By selectorLogoutButton      = By.cssSelector(&quot;#content &gt; div &gt; a &quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.LOGIN.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Login Page&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() + PageSubURLsProjectYEnum.LOGIN.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Sets user name to designated form&apos;s field.
 *
 * @param username String representing user&apos;s name
 * @return FormAuthenticationPage object with user name set to given one
 */
public FormAuthenticationPage setUsername(String username) {
    InputTextElement elementInputUsername = new InputTextElement(selectorInputUsername);
    elementInputUsername.clearInputText();
    elementInputUsername.setInputText(username);
    return this;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Sets user password to designated form&apos;s field.
 *
 * @param userPassword String representing user&apos;s password
 * @return FormAuthenticationPage object with user&apos;s password set to given one
 */
public FormAuthenticationPage setUserPassword(String userPassword) {
    InputTextElement elementInputPassword = new InputTextElement(selectorInputUserPassword);
    elementInputPassword.clearInputText();
    elementInputPassword.setInputText(userPassword);
    return this;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns login message.
 *
 * @return String object representing message returned after login operation is performed
 */
public String getLoginMessageText() {
    return new LabelElement(selectorLoginMessage).getText();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Clicks &apos;Login&apos; button.
 */
public void clickLoginButton() {
    new Button(selectorLoginButton).click();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    /**
     * Clicks &apos;Logout&apos; button.
     */
    public void clickLogoutButton() {
        new Button(selectorLogoutButton).click();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-13-form-authentication-test.asciidoc_inputtextelement]]
====== InputTextElement

Use methods from this class to perform actions on text fields:

* `clearInputText()` - remove all text from selected input field
* `setInputText(String text)` - enter given text

[[example-13-form-authentication-test.asciidoc_labelelement]]
====== LabelElement

* String `getText()` method returns visible text from label

[[example-13-form-authentication-test.asciidoc_testclass]]
===== TestClass

Prepare six test cases:

1. Try to login with empty user data and check if the error message will appear
2. Try to login with empty username and valid password and check if the error message will appear
3. Try to login with a valid username and empty password and check if the error message will appear
4. Try to login with invalid username and invalid password and check if the error message will appear
5. Try to login with a valid username and valid password and check if success login message will appear, then log out
6. Try to login with a valid username and valid password and check if success login message will appear, then log out and check if success logout message is displayed

Before all test: Open The Internet Main Page

Before each case: Click on the Form Authentication link and open login page

After each case: Go back to The Internet Main Page</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsLocal.class, TestsNONParallel.class })
public class FormAuthenticationTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static FormAuthenticationPage formAuthenticationPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private String errorUsernameMessage = &quot;Your username is invalid!\n&quot; + &quot;&#xD7;&quot;;
private String errorPasswordMessage = &quot;Your password is invalid!\n&quot; + &quot;&#xD7;&quot;;
private String loginMessage         = &quot;You logged into a secure area!\n&quot; + &quot;&#xD7;&quot;;
private String logoutMessage        = &quot;You logged out of the secure area!\n&quot; + &quot;&#xD7;&quot;;
private String emptyUsername        = &quot;&quot;;
private String emptyUserPassword    = &quot;&quot;;
private String validUsername        = &quot;tomsmith&quot;;
private String validPassword        = &quot;SuperSecretPassword!&quot;;
private String randomUsername       = UUID.randomUUID()
        .toString();
private String randomUserPassword   = UUID.randomUUID()
        .toString();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    logStep(&quot;Open the Url http://the-internet.herokuapp.com/&quot;);
    theInternetPage = new TheInternetPage();
    theInternetPage.load();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Url http://the-internet.herokuapp.com/ is opened&quot;);
    assertTrue(&quot;Unable to load The Internet Page&quot;, theInternetPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void setUp() {
    logStep(&quot;Click subpage link&quot;);
    formAuthenticationPage = theInternetPage.clickFormAuthenticationLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if subpage is opened&quot;);
    assertTrue(&quot;The Internet subpage: FormAuthenticationPage was not open&quot;, formAuthenticationPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldErrorMessageBeDisplayedWhenUserLogsWithEmptyData() {
    logStep(&quot;Log user with empty username and password&quot;);
    formAuthenticationPage.setUsername(emptyUsername)
            .setUserPassword(emptyUserPassword)
            .clickLoginButton();
    assertEquals(&quot;Unexpectedly user logged in with empty data&quot;, errorUsernameMessage,
            formAuthenticationPage.getLoginMessageText());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldErrorMessageBeDisplayedWhenUserLogsWithEmptyUsernameAndValidPassword() {
    logStep(&quot;Log user with empty username and valid password&quot;);
    formAuthenticationPage.setUsername(emptyUsername)
            .setUserPassword(validPassword)
            .clickLoginButton();
    assertEquals(&quot;Unexpectedly user logged in with empty username&quot;, errorUsernameMessage,
            formAuthenticationPage.getLoginMessageText());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldErrorMessageBeDisplayedWhenUserLogsWithValidUsernameAndEmptyPassword() {
    logStep(&quot;Log user with valid username and empty password&quot;);
    formAuthenticationPage.setUsername(validUsername)
            .setUserPassword(emptyUserPassword)
            .clickLoginButton();
    assertEquals(&quot;Unexpectedly user logged in with empty password&quot;, errorPasswordMessage,
            formAuthenticationPage.getLoginMessageText());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldErrorMessageBeDisplayedWhenUserLogsWithInvalidUsernameAndInvalidPassword() {
    logStep(&quot;Log user with invalid username and invalid password&quot;);
    formAuthenticationPage.setUsername(randomUsername)
            .setUserPassword(randomUserPassword)
            .clickLoginButton();
    assertEquals(&quot;Unexpectedly user logged in with random credentials&quot;, errorUsernameMessage,
            formAuthenticationPage.getLoginMessageText());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldUserLogInWithValidCredentials() {
    logStep(&quot;Log user with valid username and valid password&quot;);
    formAuthenticationPage.setUsername(validUsername)
            .setUserPassword(validPassword)
            .clickLoginButton();
    assertEquals(&quot;Unable to login user with valid credentials&quot;, loginMessage,
            formAuthenticationPage.getLoginMessageText());
    logStep(&quot;Log out user&quot;);
    formAuthenticationPage.clickLogoutButton();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldUserLogOutAfterProperLogInAndClickLogoutButon() {
    logStep(&quot;Log user with valid username and valid password&quot;);
    formAuthenticationPage.setUsername(validUsername)
            .setUserPassword(validPassword)
            .clickLoginButton();
    assertEquals(&quot;Unable to login user with valid credentials&quot;, loginMessage,
            formAuthenticationPage.getLoginMessageText());
    logStep(&quot;Log out user&quot;);
    formAuthenticationPage.clickLogoutButton();
    assertEquals(&quot;User cannot log out after prper log in&quot;, logoutMessage,
            formAuthenticationPage.getLoginMessageText());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    @Override
    public void tearDown() {
        logStep(&quot;Navigate back to The-Internet page&quot;);
        theInternetPage.load();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>After running Test Class, cases might be performed in a different order.

:leveloffset: 3

:leveloffset: 4

image::images/image40.png[]

This example shows how to approach elements dynamically appearing after the user&apos;s action.

Move the mouse over an image to see the additional label.

image::images/image41.png[]

Labels exist in page DOM all the time but they display attributes change. In this case, there is no JavaScript. Elements&apos; visibility is managed by CSS.

image::images/image42.png[]

[[example-14-hovers-test.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class HoversPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private final static By selectorImages = By.cssSelector(&quot;div.figure &gt; img&quot;);
private final static By selectorNames  = By.cssSelector(&quot;div.figcaption h5&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.HOVERS.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Hovers&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.HOVERS.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Moves mouse pointer over an image with given index.
 *
 * @param index An index of the picture, where mouse pointer should be moved
 */
public void hoverOverAvatar(int index) {
    Actions action = new Actions(getDriver());
    WebElement avatarImage = getDriver().findElementDynamics(selectorImages)
            .get(index);
    action.moveToElement(avatarImage)
            .perform();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    /**
     * Returns an information displayed under a picture given index.
     *
     * @param index An index of the picture, where information should be read
     * @return String object representing picture&apos;s information
     */
    public String getAvatarsInformation(int index) {
        return getDriver().findElementDynamics(selectorNames)
                .get(index)
                .getText();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-14-hovers-test.asciidoc_actions]]
====== Actions

Actions class contains methods used to execute basic user actions such as mouse moving and clicking or keys sending. Action or actions series will be performed after calling `perform()` method.

[[example-14-hovers-test.asciidoc_test-class]]
===== Test Class

Steps:

1. Open The Internet Main Page
2. Go to Hovers page
3. Move mouse over random image
4. Check if displayed text is equal to expected.</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class HoversTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static HoversPage    hoversPage;
private final String        names[]    = { &quot;name: user1&quot;, &quot;name: user2&quot;, &quot;name: user3&quot; };</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    hoversPage = shouldTheInternetPageBeOpened().clickHoversLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Hovers page is opened&quot;);
    assertTrue(&quot;Unable to open Hovers page&quot;, hoversPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    @Test
    public void shouldProperInformationBeDisplayedWhenMousePointerHoveredOverRandomElement() {
        logStep(&quot;Hover mouse pointer over random element&quot;);
        int randomIndex = new Random().nextInt(names.length);
        hoversPage.hoverOverAvatar(randomIndex);
        assertEquals(&quot;Picture&apos;s information is different than expected&quot;, names[randomIndex],
                hoversPage.getAvatarsInformation(randomIndex));
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Because in this case tested content is being chosen randomly, each test run could check different element.

:leveloffset: 3

:leveloffset: 4

image::images/image43.png[]

This case shows how to test pop-up JS alerts.

After clicking one of the buttons adequate alert should appear.

image::images/image44.png[]

Performed action will be displayed under &quot;Result&quot; label.

In developer mode, you can view JavaScript which creates alerts.

image::images/image45.png[]

[[example-15-javascript-alerts.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class JavaScriptAlertsPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By selectorAlertButton   = By.cssSelector(&quot;button[onclick*=jsAlert]&quot;);
private static final By selectorConfirmButton = By.cssSelector(&quot;button[onclick*=jsConfirm]&quot;);
private static final By selectorPromptButton  = By.cssSelector(&quot;button[onclick*=jsPrompt]&quot;);
private static final By resultLabelSelector   = By.cssSelector(&quot;p#result&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.JAVASCRIPT_ALERTS.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;JavaScript Alerts&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.JAVASCRIPT_ALERTS.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Clicks &apos;JS alert&apos; button.
 */
public void clickAlertButton() {
    new Button(selectorAlertButton).click();
    WebDriverWait wait = new WebDriverWait(getDriver(), 2);
    wait.until(ExpectedConditions.alertIsPresent());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Clicks &apos;JS confirm&apos; button.
 */
public void clickConfirmButton() {
    new Button(selectorConfirmButton).click();
    WebDriverWait wait = new WebDriverWait(getDriver(), 2);
    wait.until(ExpectedConditions.alertIsPresent());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Clicks &apos;JS prompt&apos; button.
 */
public void clickPromptButton() {
    new Button(selectorPromptButton).click();
    WebDriverWait wait = new WebDriverWait(getDriver(), 2);
    wait.until(ExpectedConditions.alertIsPresent());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns message displayed by popup.
 *
 * @return String object representing message displayed by popup
 */
public String readResultLabel() {
    return new LabelElement(resultLabelSelector).getText();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Clicks alert&apos;s &apos;OK&apos; button.
 */
public void clickAlertAccept() {
    getDriver().switchTo()
            .alert()
            .accept();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Clicks alert&apos;s &apos;Cancel&apos; button.
 */
public void clickAlertDismiss() {
    getDriver().switchTo()
            .alert()
            .dismiss();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    /**
     * Types text into alert&apos;s text field.
     *
     * @param text String object sent into alert&apos;s text field
     */
    public void writeTextInAlert(String text) {
        getDriver().switchTo()
                .alert()
                .sendKeys(text);
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-15-javascript-alerts.asciidoc_alert]]
====== alert()

Using `switchTo()` method you can change processed content. `switchTo().alert()` allows performing actions on appearing alerts such as accepting, dismissing or entering keys.

[[example-15-javascript-alerts.asciidoc_test-class]]
===== Test Class

Before all tests: Open The Internet Main Page and go to JavaScript Alert page

1. Click JS Alert button, accept alert and check if Result message returns performed an action
2. Click JS Confirm button, accept alert and check if Result message returns performed action
3. Click JS Confirm button, dismiss alert and check if Result message returns performed action
4. Click JS Prompt button, write random text, accept alert and check if Result message returns performed action with written text
5. Click JS Prompt button, dismiss the alert and check if Result message returns performed action

After each case: Refresh Page

After all tests:  Navigate back to The Internet Main Page</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class JavaScriptAlertsTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static JavaScriptAlertsPage javaScriptAlertsPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private final String jsAlertCofirmMessage    = &quot;You successfuly clicked an alert&quot;;
private final String jsConfirmConfirmMessage = &quot;You clicked: Ok&quot;;
private final String jsConfirmCancelMessage  = &quot;You clicked: Cancel&quot;;
private final String jsPromptConfirmMessage  = &quot;You entered: &quot;;
private final String jsPromptCancelMessage   = &quot;You entered: null&quot;;
private final String randomString            = &quot;random&quot;;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    javaScriptAlertsPage = shouldTheInternetPageBeOpened().clickJavaScriptAlertLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if JavaScript Alerts page is opened&quot;);
    assertTrue(&quot;Unable to open JavaScript Alerts page&quot;, javaScriptAlertsPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@AfterClass
public static void tearDownAfterClass() {
    logStep(&quot;Navigate back to The-Internet page&quot;);
    BasePage.navigateBack();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldJSAlertCloseWithProperMessageAfterPressOkButton() {
    logStep(&quot;Click Alert button&quot;);
    javaScriptAlertsPage.clickAlertButton();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Click &apos;OK&apos; button on alert&quot;);
javaScriptAlertsPage.clickAlertAccept();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify returned message&quot;);
    assertEquals(&quot;Incorrect message returned after click&quot;,
            jsAlertCofirmMessage, javaScriptAlertsPage.readResultLabel());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldJSConfirmCloseWithProperMessageAfterPressOkButton() {
    logStep(&quot;Click Confirm button&quot;);
    javaScriptAlertsPage.clickConfirmButton();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Click &apos;OK&apos; button on alert&quot;);
javaScriptAlertsPage.clickAlertAccept();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify returned message&quot;);
    assertEquals(&quot;Incorrect message returned after click&quot;,
            jsConfirmConfirmMessage, javaScriptAlertsPage.readResultLabel());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldJSConfirmCloseWithProperMessageAfterPressCancelButton() {
    logStep(&quot;Click Confirm button&quot;);
    javaScriptAlertsPage.clickConfirmButton();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Click &apos;Cancel&apos; button on alert&quot;);
javaScriptAlertsPage.clickAlertDismiss();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify returned message&quot;);
    assertEquals(&quot;Incorrect message returned after click&quot;,
            jsConfirmCancelMessage, javaScriptAlertsPage.readResultLabel());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldJSPromptCloseWithProperMessageAfterPressOKButton() {
    logStep(&quot;Click Prompt button&quot;);
    javaScriptAlertsPage.clickPromptButton();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Insert text to alert: &quot; + randomString);
javaScriptAlertsPage.writeTextInAlert(randomString);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Click &apos;OK&apos; button on alert&quot;);
javaScriptAlertsPage.clickAlertAccept();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify returned message&quot;);
    assertEquals(&quot;Incorrect message returned after click&quot;,
            jsPromptConfirmMessage + randomString, javaScriptAlertsPage.readResultLabel());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldJSPromptCloseWithProperMessageAfterPressCancelButton() {
    logStep(&quot;Click Prompt button&quot;);
    javaScriptAlertsPage.clickPromptButton();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Click &apos;Cancel&apos; button on alert&quot;);
javaScriptAlertsPage.clickAlertDismiss();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify returned message&quot;);
    assertEquals(&quot;Incorrect message returned after click&quot;,
            jsPromptCancelMessage, javaScriptAlertsPage.readResultLabel());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void tearDown() {
    logStep(&quot;Refresh JavaScriptAlersPage&quot;);
    javaScriptAlertsPage.refreshPage();
}</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 4

image::images/image46.png[]

This simple case shows how to test key pressing

This site uses JavaScript to read pressed key and display its value.

image::images/image47.png[]

[[example-16-key-presses-test.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class KeyPressesPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By selectorResult = By.cssSelector(&quot;#result&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.KEY_PRESS.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Key Presses&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.KEY_PRESS.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Presses given keyboard key.
 *
 * @param keyToPress Key to be pressed on keyboard
 */
public void pressKey(String keyToPress) {
    getAction().sendKeys(keyToPress)
            .perform();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    /**
     * Returns information from web page about pressed keyboard key.
     *
     * @return Information from web page about pressed key
     */
    public String getPressedKeyInformation() {
        return getDriver().findElementDynamic(selectorResult)
                .getText();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-16-key-presses-test.asciidoc_test-class]]
===== Test Class

Steps:

1. Open The Internet Main Page
2. Go to Key Presses site
3. Press some key
4. Check if a displayed message contains pressed key</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class KeyPressesTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static KeyPressesPage keyPressesPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private final String keyToBePressed  = &quot;Q&quot;;
private final String expectedMessage = &quot;You entered: Q&quot;;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    keyPressesPage = shouldTheInternetPageBeOpened().clickKeyPressesLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Key Presses page is opened&quot;);
    assertTrue(&quot;Unable to open Key Presses page&quot;, keyPressesPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldWebsiteReturnInformationAboutPressedKey() {
    logStep(&quot;Press keyboard key&quot;);
    keyPressesPage.pressKey(keyToBePressed);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        logStep(&quot;Verify if website give valid information about pressed keyboard key&quot;);
        assertEquals(&quot;Information about pressed key is invalid&quot;, expectedMessage,
                keyPressesPage.getPressedKeyInformation());
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 4

image::images/image48.png[]

This simple example shows how operate on many browser tabs

When you click the link, a new website will be opened in the second tab.

image::images/image49.png[]

[[example-17-multiple-windows.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class MultipleWindowsPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private final static By selectorLink = By.cssSelector(&quot;#content &gt; div &gt; a&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.WINDOW.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Opening a new window&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.WINDOW.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    /**
     * Clicks &apos;click here&apos; link.
     *
     * @return NewWindowPage object
     */
    public NewWindowPage clickHereLink() {
        getDriver().findElementDynamic(selectorLink)
                .click();
        getDriver().waitForPageLoaded();
        return new NewWindowPage();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>You also need second page class for New Window Page. Implement only required methods.</pre>
</div>
</div>
<div class="paragraph">
<p>public class NewWindowPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.NEW_WINDOW.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;New window&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.NEW_WINDOW.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    @Override
    public String pageTitle() {
        return getActualPageTitle();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-17-multiple-windows.asciidoc_test-class]]
===== Test Class

Steps:

1. Open The Internet Main Page
2. Go to Multiple Windows Page
3. Click the link
4. Check if a new page is opened in the second tab</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class MultipleWindowsTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static MultipleWindowsPage    multipleWindowsPage;
private static NewWindowPage        newWindowPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    multipleWindowsPage = shouldTheInternetPageBeOpened().clickmultipleWindowsLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Multiple Windows page is opened&quot;);
    assertTrue(&quot;Unable to open Multiple Windows page&quot;, multipleWindowsPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void verifyIfNewBrowserWindowOpen() {
    logStep(&quot;Click &apos;Click here&apos; link&quot;);
    newWindowPage = multipleWindowsPage.clickHereLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        logStep(&quot;Verify if &apos;New window page&apos; is opened&quot;);
        assertTrue(&quot;Unable to open new browser&apos;s window&quot;, newWindowPage.isLoaded());
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 4

image::images/image50.png[]

This simple case shows how to approach redirecting links.

After clicking the link you will be redirected to Status Codes Page.

image::images/image51.png[]

[[example-18-redirection.asciidoc_page-class]]
===== Page Class

[[example-18-redirection.asciidoc_redirect-link-page]]
====== Redirect Link Page</pre>
</div>
</div>
<div class="paragraph">
<p>public class RedirectLinkPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By selectorRedirectHere = By.cssSelector(&quot;a#redirect&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.REDIRECT.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Redirection&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.REDIRECT.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    /**
     * Clicks &apos;Redirect here&apos; link.
     *
     * @return StatusCodesHomePage object
     */
    public StatusCodesHomePage clickRedirectHereLink() {
        new Button(selectorRedirectHere).click();
        return new StatusCodesHomePage();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-18-redirection.asciidoc_status-codes-page]]
====== Status Codes Page</pre>
</div>
</div>
<div class="paragraph">
<p>public class StatusCodesHomePage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By selectorLink200Code = By.linkText(&quot;200&quot;);
private static final By selectorLink301Code = By.linkText(&quot;301&quot;);
private static final By selectorLink404Code = By.linkText(&quot;404&quot;);
private static final By selectorLink500Code = By.linkText(&quot;500&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.STATUS_CODES.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Status Codes&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.STATUS_CODES.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    @Override
    public String pageTitle() {
        return getActualPageTitle();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-18-redirection.asciidoc_test-class]]
===== Test Class

Steps:

1. Open The Internet Main Page
2. Go to Redirection Page
3. Click the link
4. Check if Status Codes Page is loaded</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class RedirectLinkTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static RedirectLinkPage    redirectLinkPage;
private static StatusCodesHomePage statusCodesHomePage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    redirectLinkPage = shouldTheInternetPageBeOpened().clickRedirectLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Redirect Link page is opened&quot;);
    assertTrue(&quot;Unable to open Redirect Link page&quot;, redirectLinkPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldUserBeRedirectedToStatusCodePage() {
    logStep(&quot;Click &apos;Redirect here&apos; link&quot;);
    statusCodesHomePage = redirectLinkPage.clickRedirectHereLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        logStep(&quot;Verify redirection to Status Code page&quot;);
        assertTrue(&quot;User hasn&apos;t been redirected to expected website&quot;,
                statusCodesHomePage.isLoaded());
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 4

image::images/image52.png[]

This case shows how to move horizontal slider.

You can move the slider by dragging it with a mouse or using arrow keys. The page uses a simple script to get slider position and display set value.

image::images/image53.png[]

[[example-19-slider-test.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class HorizontalSliderPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By selectorHorizontalSlider = By.cssSelector(&quot;div.sliderContainer&quot;);
private static final By sliderSelector           = By.cssSelector(&quot;input&quot;);
private static final By valueSelector            = By.cssSelector(&quot;#range&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private HorizontalSliderElement horizontalSlider;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public HorizontalSliderPage() {
    horizontalSlider = getDriver().elementHorizontalSlider(selectorHorizontalSlider,
            sliderSelector, valueSelector, BigDecimal.ZERO, new BigDecimal(5),
            new BigDecimal(0.5));
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.HORIZONTAL_SLIDER.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Horizontal Slider&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.HORIZONTAL_SLIDER.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Validates if WebElement representing horizontal slider is visible on the page.
 *
 * @return true if horizontal slider is visible, false otherwise.
 */
public boolean isElementHorizontalSliderVisible() {
    return getDriver().elementHorizontalSlider(selectorHorizontalSlider)
            .isDisplayed();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns the value of slider&apos;s start position.
 *
 * @return BigDecimal representing the lowest possible value of slider.
 */
public BigDecimal getStartPosition() {
    return horizontalSlider.getMinRange();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns the value of slider&apos;s middle position.
 *
 * @return BigDecimal representing the average value between start and end position.
 */
public BigDecimal getMiddlePosition() {
    return horizontalSlider.getMaxRange()
            .subtract(horizontalSlider.getMinRange())
            .divide(new BigDecimal(2));
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns the value of slider&apos;s end position.
 *
 * @return BigDecimal representing the highest possible value of slider.
 */
public BigDecimal getEndPosition() {
    return horizontalSlider.getMaxRange();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns current value of slider&apos;s position.
 *
 * @return BigDecimal representing current value of slider.
 */
public BigDecimal getCurrentPosition() {
    return horizontalSlider.getCurrentSliderValue();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Sets horizontal slider to given position using one of available methods: using keyboard
 * or using mouse move.
 *
 * @param position
 * @param method
 */
public void setSliderPositionTo(BigDecimal position, int method) {
    horizontalSlider.setSliderPositionTo(position, method);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    /**
     * Verifies the correctness of given position value and round it when necessary.
     *
     * @param position
     * @return Correct value of horizontal slider&apos;s position.
     */
    public BigDecimal verifyAndCorrectPositionValue(BigDecimal position) {
        return horizontalSlider.verifyAndCorrectPositionValue(position);
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-19-slider-test.asciidoc_horizontal-slider-element]]
====== Horizontal Slider Element

This class implements methods wich can perform actions on slider:

Create Slider Object using method:

* `getDriver().elementHorizontalSlider(By sliderContainerSelector, By sliderSelector, By valueSelector, BigDecimal minRange, BigDecimal maxRange, BigDecimal step)`

And use:

* `BigDecimal getMaxRange()`
* `BigDecimal getMinRange()`
* `BigDecimal getCurrentSliderValue()`
* `setSliderPositionTo(BigDecimal position, int method)` - moves slider to given position. If position is not valid changes it to nearest proper value. Second parameter determinates movement method: 0 - Keyboard, 1 - Mouse
* `BigDecimal verifyAndCorrectPositionValue(BigDecimal position)` - returns nearest correct position

[[example-19-slider-test.asciidoc_test-class]]
===== Test Class

Before all tests: Open The Internet Main Page

Before each case:

1. Go to Horizontal Slider Page
2. Check if the slider is visible
3. Save start, middle and end position

Case 1 - Moving with the keyboard:

1. Move slider to start position, and check if current position equals begin value
2. Move the slider to middle position, and check if current position equals middle value
3. Move slider to end position, and check if current position equals end value
4. Try to move slider before start position, and check if current position equals begin value
5. Try to move slider after end position, and check if the current position equals end value
6. Try to move the slider to improperly defined position between start and middle, and check if the current position equals corrected value
7. Try to move the slider to improperly defined random position, and check if current position equals corrected value
8. Move the slider back to start position, and check if current position equals begin value

Case 2 - Moving with a mouse: Repeat each Case 1 step using a mouse instead of the keyboard</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class SliderTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static HorizontalSliderPage horizontalSliderPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>BigDecimal startPosition;
BigDecimal middlePosition;
BigDecimal endPosition;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    logStep(&quot;Open the Url http://the-internet.herokuapp.com/&quot;);
    theInternetPage = new TheInternetPage();
    theInternetPage.load();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Url http://the-internet.herokuapp.com/ is opened&quot;);
    assertTrue(&quot;Unable to load The Internet Page&quot;, theInternetPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void setUp() {
    logStep(&quot;Click Horizontal Slider link&quot;);
    horizontalSliderPage = theInternetPage.clickHorizontalSliderLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if Horizontal Slider page is opened&quot;);
assertTrue(&quot;Unable to load Horizontal Slider page&quot;, horizontalSliderPage.isLoaded());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if horizontal slider element is visible&quot;);
assertTrue(&quot;Horizontal slider is not visible&quot;,
        horizontalSliderPage.isElementHorizontalSliderVisible());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    startPosition = horizontalSliderPage.getStartPosition();
    middlePosition = horizontalSliderPage.getMiddlePosition();
    endPosition = horizontalSliderPage.getEndPosition();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldHorizontalSliderMoveWhenKeyboardArrowButtonsArePressed() {
    BigDecimal position;
    logStep(&quot;Move slider to start position: &quot; + startPosition);
    horizontalSliderPage.setSliderPositionTo(startPosition, HorizontalSliderElement.KEYBOARD);
    assertEquals(&quot;Fail to set horizontal sliders position&quot;, startPosition,
            horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Move slider to middle position: &quot; + middlePosition);
horizontalSliderPage.setSliderPositionTo(middlePosition, HorizontalSliderElement.KEYBOARD);
assertEquals(&quot;Fail to set horizontal sliders position&quot;,
        horizontalSliderPage.verifyAndCorrectPositionValue(middlePosition),
        horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Move slider to end position: &quot; + endPosition);
horizontalSliderPage.setSliderPositionTo(endPosition, HorizontalSliderElement.KEYBOARD);
assertEquals(&quot;Fail to set horizontal sliders position&quot;, endPosition,
        horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>position = startPosition.subtract(BigDecimal.ONE);
logStep(&quot;Move slider to position before start position: &quot; + position);
horizontalSliderPage.setSliderPositionTo(position, HorizontalSliderElement.KEYBOARD);
assertEquals(&quot;Fail to set horizontal sliders position&quot;, startPosition,
        horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>position = endPosition.add(BigDecimal.ONE);
logStep(&quot;Move slider to position after end position: &quot; + position);
horizontalSliderPage.setSliderPositionTo(position, HorizontalSliderElement.KEYBOARD);
assertEquals(&quot;Fail to set horizontal sliders position&quot;, endPosition,
        horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>position = middlePosition.divide(new BigDecimal(2));
logStep(&quot;Move slider to improperly defined position: &quot; + position);
horizontalSliderPage.setSliderPositionTo(position, HorizontalSliderElement.KEYBOARD);
assertEquals(&quot;Fail to set horizontal sliders position&quot;,
        horizontalSliderPage.verifyAndCorrectPositionValue(position),
        horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>position = new BigDecimal(new BigInteger(&quot;233234&quot;), 5);
logStep(&quot;Move slider to improperly defined random position: &quot; + position);
horizontalSliderPage.setSliderPositionTo(position, HorizontalSliderElement.KEYBOARD);
assertEquals(&quot;Fail to set horizontal sliders position&quot;,
        horizontalSliderPage.verifyAndCorrectPositionValue(position),
        horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Move slider back to start position: &quot; + startPosition);
    horizontalSliderPage.setSliderPositionTo(startPosition, HorizontalSliderElement.KEYBOARD);
    assertEquals(&quot;Fail to set horizontal sliders position&quot;, startPosition,
            horizontalSliderPage.getCurrentPosition());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldHorizontalSliderMoveWhenMouseButtonIsPressedAndMouseIsMoving() {
    BigDecimal position;
    logStep(&quot;Move slider to start position: &quot; + startPosition);
    horizontalSliderPage.setSliderPositionTo(startPosition, HorizontalSliderElement.MOUSE);
    assertEquals(&quot;Fail to set horizontal sliders position&quot;, startPosition,
            horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Move slider to middle position: &quot; + middlePosition);
horizontalSliderPage.setSliderPositionTo(middlePosition, HorizontalSliderElement.MOUSE);
assertEquals(&quot;Fail to set horizontal sliders position&quot;,
        horizontalSliderPage.verifyAndCorrectPositionValue(middlePosition),
        horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Move slider to end position: &quot; + endPosition);
horizontalSliderPage.setSliderPositionTo(endPosition, HorizontalSliderElement.MOUSE);
assertEquals(&quot;Fail to set horizontal sliders position&quot;, endPosition,
        horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>position = startPosition.subtract(BigDecimal.ONE);
logStep(&quot;Move slider to position before start position: &quot; + position);
horizontalSliderPage.setSliderPositionTo(position, HorizontalSliderElement.MOUSE);
assertEquals(&quot;Fail to set horizontal sliders position&quot;, startPosition,
        horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>position = endPosition.add(BigDecimal.ONE);
logStep(&quot;Move slider to position after end position: &quot; + position);
horizontalSliderPage.setSliderPositionTo(position, HorizontalSliderElement.MOUSE);
assertEquals(&quot;Fail to set horizontal sliders position&quot;, endPosition,
        horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>position = middlePosition.divide(new BigDecimal(2));
logStep(&quot;Move slider to improperly defined position: &quot; + position);
horizontalSliderPage.setSliderPositionTo(position, HorizontalSliderElement.MOUSE);
assertEquals(&quot;Fail to set horizontal sliders position&quot;,
        horizontalSliderPage.verifyAndCorrectPositionValue(position),
        horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>position = new BigDecimal(new BigInteger(&quot;212348&quot;), 5);
logStep(&quot;Move slider to improperly defined random position: &quot; + position);
horizontalSliderPage.setSliderPositionTo(position, HorizontalSliderElement.MOUSE);
assertEquals(&quot;Fail to set horizontal sliders position&quot;,
        horizontalSliderPage.verifyAndCorrectPositionValue(position),
        horizontalSliderPage.getCurrentPosition());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        logStep(&quot;Move slider back to start position: &quot; + startPosition);
        horizontalSliderPage.setSliderPositionTo(startPosition, HorizontalSliderElement.MOUSE);
        assertEquals(&quot;Fail to set horizontal sliders position&quot;, startPosition,
                horizontalSliderPage.getCurrentPosition());
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 4

image::images/image54.png[]

This example shows how to sort and read data from tables.

After click on column header data will be sorted down and after another click sorted up by selected attribute. Watch how both tables content changes on page DOM. Sorting is performed by JavaScript functions.

image::images/image55.png[]

[[example-20-sortable-data-tables.asciidoc_page-class]]
===== Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class SortableDataTablesPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By selectorTable  = By.cssSelector(&quot;table.tablesorter&quot;);
private static final By selectorHeader = By.cssSelector(&quot;th&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.SORTABLE_DATA_TABLES.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Data Tables&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.SORTABLE_DATA_TABLES.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Sorts data in given column using ascending order.
 *
 * @param columnNumber The number of column where data should be sorted
 * @param tableNumber  The number of table where data should be sorted
 */
public void sortColumnAscending(int columnNumber, int tableNumber) {
    WebElement header = this.getTableHeaders(columnNumber, tableNumber);
    String className = header.getAttribute(&quot;class&quot;);
    if (className.contains(&quot;headerSortUp&quot;) || !className.contains(&quot;headerSortDown&quot;)) {
        header.click();
    }
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Sorts data in given column using descending order.
 *
 * @param columnNumber The number of column where data should be sorted
 * @param tableNumber  The number of table where data should be sorted
 */
public void sortColumnDescending(int columnNumber, int tableNumber) {
    WebElement header = this.getTableHeaders(columnNumber, tableNumber);
    String className = header.getAttribute(&quot;class&quot;);
    if (!className.contains(&quot;headerSortUp&quot;)) {
        header.click();
        if (!className.contains(&quot;headerSortDown&quot;)) {
            header.click();
        }
    }
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Return given column values from chosen table.
 *
 * @param columnNumber The number of column where data should be retrieved from
 * @param tableNumber  The number of table where data should be retrieved from
 * @return list of values from given column
 */
public List&lt;String&gt; getColumnValues(int columnNumber, int tableNumber) {
    WebElement table = getTable(tableNumber);
    return JsoupHelper.findTexts(table, By.cssSelector(&quot;tr &gt; td:nth-child(&quot; + (columnNumber + 1)
            + &quot;)&quot;));
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns column&apos;s class name.
 *
 * @param columnNumber The number of column to get class number
 * @param tableNumber  The number of table to get column class name
 * @return String object representing column&apos;s class name
 */
public String readColumnClass(int columnNumber, int tableNumber) {
    return this.getTableHeaders(columnNumber, tableNumber)
            .getAttribute(&quot;class&quot;);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private WebElement getTable(int tableNumber) {
    return new ListElements(selectorTable).getList()
            .get(tableNumber);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    private WebElement getTableHeaders(int columnNumber, int tableNumber) {
        return getTable(tableNumber).findElements(selectorHeader)
                .get(columnNumber);
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-20-sortable-data-tables.asciidoc_finding-values]]
====== Finding values

Using proper selectors save elements such as tables and it&apos;s columns&apos; headers as Web Element Lists. Then you can get wanted element finding it by index (e. g. table or column number). To get column values to use `JsoupHelper` and to check if the column is sorted get its class attribute.

[[example-20-sortable-data-tables.asciidoc_test-class]]
===== Test Class

Before all tests: Open The Internet Main Page

Before each case: Go to Sortable Data Tables Page

Case 1:

1. Choose a random table
2. Sort first column &quot;Last Name&quot; in ascending order
3. Check if column header class contains &quot;headerSortDown&quot;
4. Save column content to the List
5. Create List copy and sort it
6. Compare sorted values and values from the table

Case 2:

1. Choose a random table
2. Sort second column &quot;First Name&quot; in descending order
3. Check if column header class contains &quot;headerSortUp&quot;
4. Save column content to the List
5. Create List copy and sort it then reverse it
6. Compare reversed sorted values and values from the table</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class SortableDataTablesTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static SortableDataTablesPage sortableDataTablesPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private List&lt;String&gt; actualValues;
private List&lt;String&gt; expectedValues;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    logStep(&quot;Open the Url http://the-internet.herokuapp.com/&quot;);
    theInternetPage = new TheInternetPage();
    theInternetPage.load();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Url http://the-internet.herokuapp.com/ is opened&quot;);
    assertTrue(&quot;Unable to load The Internet Page&quot;, theInternetPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void setUp() {
    logStep(&quot;Click subpage link&quot;);
    sortableDataTablesPage = theInternetPage.clickSortableDataTablesLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if subpage is opened&quot;);
    assertTrue(&quot;Unable to open Sortable Data Tables page&quot;, sortableDataTablesPage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldLastNameColumnBeOrderedAscendingAfterSort() {
    int columnNumber = 0;
    int tableNumber = new Random().nextInt(2);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Sort &apos;Last Name&apos; column&quot;);
sortableDataTablesPage.sortColumnAscending(columnNumber, tableNumber);
assertTrue(&quot;Unable to set ascending order for &apos;Last Name&apos; column&quot;,
        sortableDataTablesPage.readColumnClass(columnNumber, tableNumber)
                .contains(&quot;headerSortDown&quot;));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify data order for &apos;Last Name&apos; column&quot;);
    actualValues = sortableDataTablesPage.getColumnValues(columnNumber, tableNumber);
    expectedValues = new ArrayList&lt;String&gt;(actualValues);
    Collections.sort(expectedValues);
    assertEquals(&quot;&apos;Last Name&apos; column is not sorted by ascending order&quot;,
            expectedValues, actualValues);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldFirstNameColumnBeOrderedDescendingAfterSort() {
    int columnNumber = 1;
    int tableNumber = new Random().nextInt(2);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Sort &apos;First Name&apos; column&quot;);
sortableDataTablesPage.sortColumnDescending(columnNumber, tableNumber);
assertTrue(&quot;Unable to set descending order for &apos;First Name&apos; column&quot;,
        sortableDataTablesPage.readColumnClass(columnNumber, tableNumber)
                .contains(&quot;headerSortUp&quot;));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        logStep(&quot;Verify data order for &apos;First Name&apos; column&quot;);
        actualValues = sortableDataTablesPage.getColumnValues(columnNumber, tableNumber);
        expectedValues = new ArrayList&lt;String&gt;(actualValues);
        Collections.sort(expectedValues);
        Collections.reverse(expectedValues);
        assertEquals(&quot;&apos;First Name&apos; column is not sorted by descending order&quot;,
                expectedValues, actualValues);
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 4

image::images/image56.png[]

This example shows how to process HTTP status codes returned by page

When you click status code link, you will be redirected to the subpage which returns proper HTTP status code. In order to check what code was returned:

1. Open developer tools
2. Go to Network tab
3. Click request name
4. Find code number in Headers section

image::images/image57.png[]

[[example-21-status-codes.asciidoc_page-class]]
===== Page Class

Add new methods to existing Status Codes Home Page Class</pre>
</div>
</div>
<div class="paragraph">
<p>public class StatusCodesHomePage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By selectorLink200Code = By.linkText(&quot;200&quot;);
private static final By selectorLink301Code = By.linkText(&quot;301&quot;);
private static final By selectorLink404Code = By.linkText(&quot;404&quot;);
private static final By selectorLink500Code = By.linkText(&quot;500&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.STATUS_CODES.getValue());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Status Codes&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.STATUS_CODES.getValue());
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Verifies if given link is displayed.
 *
 * @param selector Selector of given link
 * @return true if link is displayed
 */
public boolean isLinkCodeDisplayed(By selector) {
    return getDriver().findElementDynamic(selector)
            .isDisplayed();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Clicks &apos;200&apos; link.
 *
 * @return StatusCodesCodePage object
 */
public StatusCodesCodePage clickCode200Link() {
    return clickCodeLink(selectorLink200Code);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Clicks &apos;301&apos; link.
 *
 * @return StatusCodesCodePage object
 */
public StatusCodesCodePage clickCode301Link() {
    return clickCodeLink(selectorLink301Code);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Clicks &apos;404&apos; link.
 *
 * @return StatusCodesCodePage object
 */
public StatusCodesCodePage clickCode404Link() {
    return clickCodeLink(selectorLink404Code);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Clicks &apos;500&apos; link.
 *
 * @return StatusCodesCodePage object
 */
public StatusCodesCodePage clickCode500Link() {
    return clickCodeLink(selectorLink500Code);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Clicks code link according to given code number.
 *
 * @param code Given code
 * @return StatusCodesCodePage object
 */
public StatusCodesCodePage clickCodeLink(String code) {
    return clickCodeLink(By.linkText(code));
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private StatusCodesCodePage clickCodeLink(By selector) {
    String codeNumber = getCodeNumberToCheck(selector);
    getDriver().findElementDynamic(selector)
            .click();
    return new StatusCodesCodePage(codeNumber);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    private String getCodeNumberToCheck(By selector) {
        return getDriver().findElementDynamic(selector)
                .getText();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Also create page class for status codes subpages. In class constructor specify which code number should be returned.</pre>
</div>
</div>
<div class="paragraph">
<p>public class StatusCodesCodePage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static final By selectorDisplayedText   = By.cssSelector(&quot;#content &gt; div &gt; p&quot;);
private static final By selectorLinkToCodesPage = By.cssSelector(&quot;#content &gt; div &gt; p &gt; a&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private String codeNumber;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public StatusCodesCodePage(String codeNumber) {
    this.codeNumber = codeNumber;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded();
    return getDriver().getCurrentUrl()
            .contains(PageSubURLsProjectYEnum.STATUS_CODES.getValue() + &apos;/&apos;);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    BFLogger.logDebug(&quot;Load &apos;Status Codes&apos; page.&quot;);
    getDriver().get(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.STATUS_CODES.getValue() + &apos;/&apos; + codeNumber);
    getDriver().waitForPageLoaded();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return getActualPageTitle();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public String getCodeNumber() {
    return codeNumber;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Verifies if page is loaded with given code number.
 *
 * @param codeNumber Expected code number
 * @return true if expected code number is loaded with web page
 */
public boolean isLoadedWithStatusCode(String codeNumber) {
    return getDriver().getCurrentUrl()
            .equals(GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue() +
            PageSubURLsProjectYEnum.STATUS_CODES.getValue() + &quot;/&quot; + codeNumber);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Returns displayed code number.
 * &lt;p&gt;
 * Code number is retrieved from following text displayed on the page:&lt;b&gt;
 * &apos;This page returned a *** status code.&apos;, where *** are representing code number to be
 * returned.
 * &lt;/p&gt;
 *
 * @return String object representing displayed code number retrieved from specific sentence.
 */
public String getDisplayedCodeNumber() {
    return getDriver().findElementDynamic(selectorDisplayedText)
            .getText()
            .substring(21, 24);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    /**
     * Clicks link to return to &apos;Code Page&apos;.
     *
     * @return StatusCodesHomePage object
     */
    public StatusCodesHomePage clickLinkToCodePage() {
        getDriver().findElementDynamic(selectorLinkToCodesPage)
                .click();
        return new StatusCodesHomePage();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[example-21-status-codes.asciidoc_test-class]]
===== Test Class

Before all tests: Open The Internet Main Page, go to Status Codes page

Steps:

For each status code

1. Click code link
2. Check if the page is loaded with an expected code number
3. Check if displayed code number equals expected number
4. Go back to Status Codes Home Page</pre>
</div>
</div>
<div class="paragraph">
<p>@Category({ TestsSelenium.class, TestsChrome.class, TestsFirefox.class, TestsIE.class })
public class StatusCodeTest extends TheInternetBaseTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>private static StatusCodesHomePage statusCodesHomePage;
private        StatusCodesCodePage statusCodesCodePage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>private String[] codes = { &quot;200&quot;, &quot;301&quot;, &quot;404&quot;, &quot;500&quot; };</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    statusCodesHomePage = shouldTheInternetPageBeOpened().clickStatusCodesLink();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    logStep(&quot;Verify if Status Codes Home page is opened&quot;);
    assertTrue(&quot;Unable to open Status Codes Home page&quot;, statusCodesHomePage.isLoaded());
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void shouldProperCodeBeDisplayedAfterClickCodeLink() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>for (String code : codes) {
    logStep(&quot;Click link to &quot; + code + &quot; code&quot;);
    statusCodesCodePage = statusCodesHomePage.clickCodeLink(code);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if proper web page corresponding to code is opened&quot;);
assertTrue(&quot;Unable to open proper web page&quot;,
        statusCodesCodePage.isLoadedWithStatusCode(code));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if displayed code is equal to expected one&quot;);
assertEquals(code, statusCodesCodePage.getDisplayedCodeNumber());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>            logStep(&quot;Click link to come back to &apos;Status Codes&apos; page&quot;);
            statusCodesCodePage.clickLinkToCodePage();
        }
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

[[master-mrchecker.asciidoc_first-steps]]
==== First Steps

Unresolved directive in mrchecker.wiki/master-mrchecker.asciidoc - include::Who-Is-MrChecker/Tutorials/Basic-Tutorials/First-Steps/Page-objects.asciidoc[leveloffset=4]

:leveloffset: 4

[[environment-variables.asciidoc_environment-variables]]
== Environment Variables

In Page classes, when you load/start web, it is uncommon to save fixed main URL.

Instead of _hardcoded_ main URL variable, you build your Page class with a dynamic variable.

[[environment-variables.asciidoc_how-to-create--update-system-environment]]
=== How to create / update system environment

Dynamic variable values are stored under path _\src\resources\enviroments\environments.csv_.

image::images/image1.png[]

By default, the environment takes value from DEV column.

[[environment-variables.asciidoc_access-to-the-external-file-variables]]
==== Access to the external file variables

Create a class _GetEnvironmentParam_ to map values from an external file with Page class:</pre>
</div>
</div>
<div class="paragraph">
<p>public enum GetEnvironmentParam {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>// Name if enum must be in line with cell name in /src/resources/environments/environment.csv
WWW_FONT_URL,
TOOLS_QA,
WEB_SERVICE,
THE_INTERNET_MAIN_PAGE,
ELEMENTAL_SELENIUM_PAGE;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public String getValue() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>if (null == BaseTest.getEnvironmentService()) {
    throw new BFInputDataException(&quot;Environment Parameters class wasn&apos;t initialized properly&quot;);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>return BaseTest.getEnvironmentService()
        .getValue(this.name());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String toString() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>return this.getValue();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>When you add a new row to _environments.csv_ also add a new variable to _GetEnvironmentParam_ class.

In Page class access environmental variable using this method:</pre>
</div>
</div>
<div class="paragraph">
<p>GetEnvironmentParam.THE_INTERNET_MAIN_PAGE.getValue();</p>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 4

[[selectors.asciidoc_selectors]]
== Selectors

[[selectors.asciidoc_create-selectors]]
=== Create selectors

Create a selector for every interactable element on a webpage using By type. Find elements and it&apos;s attributes using browser developer mode (F12).

image::images/image2.png[]</pre>
</div>
</div>
<div class="paragraph">
<p>private static final By abTestLinkSelector               = By.cssSelector(&quot;li &gt;
            a[href*=&apos;abtest&apos;]&quot;);
    private static final By basicAuthLinkSelector            = By.cssSelector(&quot;li &gt;
            a[href*=&apos;basic_auth&apos;]&quot;);
    private static final By brokenImageLinkSelector          = By.cssSelector(&quot;li &gt;
            a[href*=&apos;broken_images&apos;]&quot;);
    private static final By challengingDomLinkSelector       = By.cssSelector(&quot;li &gt;
            a[href*=&apos;challenging_dom&apos;]&quot;);
    private static final By checkboxesLinkSelector           = By.cssSelector(&quot;li &gt;
            a[href*=&apos;checkboxes&apos;]&quot;);
    private static final By contextMenuLinkSelector          = By.cssSelector(&quot;li &gt;
            a[href*=&apos;context_menu&apos;]&quot;);
    private static final By disappearingElementsLinkSelector = By.cssSelector(&quot;li &gt;
            a[href*=&apos;disappearing_elements&apos;]&quot;);
    private static final By dragAndDropLinkSelector          = By.cssSelector(&quot;li &gt;
            a[href*=&apos;drag_and_drop&apos;]&quot;);
    private static final By dropdownLinkSelector             = By.cssSelector(&quot;li &gt;
            a[href*=&apos;dropdown&apos;]&quot;);
    private static final By dynamicContentLinkSelector       = By.cssSelector(&quot;li &gt;
            a[href*=&apos;dynamic_content&apos;]&quot;);
    private static final By dynamicControlsLinkSelector      = By.cssSelector(&quot;li &gt;
            a[href*=&apos;dynamic_controls&apos;]&quot;);
    private static final By dynamicLoadingLinkSelector       = By.cssSelector(&quot;li &gt;
            a[href*=&apos;dynamic_loading&apos;]&quot;);
    private static final By exitIntentLinkSelector           = By.cssSelector(&quot;li &gt;
            a[href*=&apos;exit_intent&apos;]&quot;);
    private static final By fileDownloadLinkSelector         = By.cssSelector(&quot;li &gt;
            a[href$=&apos;download&apos;]&quot;);
    private static final By fileUploadLinkSelector           = By.cssSelector(&quot;li &gt;
           a[href*=&apos;upload&apos;]&quot;);
    private static final By floatingMenuLinkSelector         = By.cssSelector(&quot;li &gt;
           a[href*=&apos;floating_menu&apos;]&quot;);
    private static final By forgotPasswordLinkSelector       = By.cssSelector(&quot;li &gt;
           a[href*=&apos;forgot_password&apos;]&quot;);
    private static final By formAuthenticationLinkSelector   = By.cssSelector(&quot;li &gt;
           a[href*=&apos;login&apos;]&quot;);
    private static final By framesLinkSelector               = By.cssSelector(&quot;li &gt;
           a[href*=&apos;frames&apos;]&quot;);
    private static final By geolocationLinkSelector          = By.cssSelector(&quot;li &gt;
           a[href*=&apos;geolocation&apos;]&quot;);
    private static final By horizontalSliderLinkSelector     = By.cssSelector(&quot;li &gt;
           a[href*=&apos;horizontal_slider&apos;]&quot;);
    private static final By hoversLinkSelector               = By.cssSelector(&quot;li &gt;
           a[href*=&apos;hovers&apos;]&quot;);
    private static final By infiniteScrollLinkSelector       = By.cssSelector(&quot;li &gt;
           a[href*=&apos;infinite_scroll&apos;]&quot;);
    private static final By javaScriptAlertLinkSelector      = By.cssSelector(&quot;li &gt;
           a[href*=&apos;javascript_alerts&apos;]&quot;);
    private static final By javaScriptErrorLinkSelector      = By.cssSelector(&quot;li &gt;
           a[href*=&apos;javascript_error&apos;]&quot;);
    private static final By jQueryUIMenuLinkSelector         = By.cssSelector(&quot;li &gt;
           a[href*=&apos;jqueryui/menu&apos;]&quot;);
    private static final By keyPressesLinkSelector           = By.cssSelector(&quot;li &gt;
           a[href*=&apos;key_presses&apos;]&quot;);
    private static final By largeAndDeepDOMLinkSelector      = By.cssSelector(&quot;li &gt;
           a[href*=&apos;large&apos;]&quot;);
    private static final By multipleWindowsLinkSelector      = By.cssSelector(&quot;li &gt;
           a[href*=&apos;windows&apos;]&quot;);
    private static final By nestedFramesLinkSelector         = By.cssSelector(&quot;li &gt;
           a[href*=&apos;nested_frames&apos;]&quot;);
    private static final By notificationMessagesLinkSelector = By.cssSelector(&quot;li &gt;
           a[href*=&apos;notification_message&apos;]&quot;);
    private static final By redirectLinkSelector             = By.cssSelector(&quot;li &gt;
           a[href*=&apos;redirector&apos;]&quot;);
    private static final By secureFileDownloadLinkSelector   = By.cssSelector(&quot;li &gt;
           a[href*=&apos;download_secure&apos;]&quot;);
    private static final By shiftingContentLinkSelector      = By.cssSelector(&quot;li &gt;
           a[href*=&apos;shifting_content&apos;]&quot;);
    private static final By slowResourcesLinkSelector        = By.cssSelector(&quot;li &gt;
           a[href*=&apos;slow&apos;]&quot;);
    private static final By sortableDataTablesLinkSelector   = By.cssSelector(&quot;li &gt;
           a[href*=&apos;tables&apos;]&quot;);
    private static final By statusCodesLinkSelector          = By.cssSelector(&quot;li &gt;
           a[href*=&apos;status_codes&apos;]&quot;);
    private static final By typosLinkSelector                = By.cssSelector(&quot;li &gt;
           a[href*=&apos;typos&apos;]&quot;);
    private static final By wYSIWYGEditorLinkSelector        = By.cssSelector(&quot;li &gt;
           a[href*=&apos;tinymce&apos;]&quot;);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[selectors.asciidoc_implement-methods]]
=== Implement methods

Then use these selectors to create Objects and perform actions on page elements:</pre>
</div>
</div>
<div class="paragraph">
<p>public ABtestPage clickABtestingLink() {
        new Button(abTestLinkSelector).click();
        return new ABtestPage();
    }</p>
</div>
<div class="literalblock">
<div class="content">
<pre>public BasicAuthPage clickBasicAuthLink() {
    getDriver().waitForPageLoaded();
    WebElement link = getDriver().findElementDynamic(basicAuthLinkSelector);
    JavascriptExecutor executor = (JavascriptExecutor) getDriver();
    executor.executeScript(&quot;var elem=arguments[0]; setTimeout(function() {elem.click();}, 100)&quot;,
            link);
    return new BasicAuthPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public BrokenImagePage clickBrokenImageLink() {
    new Button(brokenImageLinkSelector).click();
    return new BrokenImagePage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public ChallengingDomPage clickChallengingDomLink() {
    new Button(challengingDomLinkSelector).click();
    return new ChallengingDomPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public CheckboxesPage clickCheckboxesLink() {
    new Button(checkboxesLinkSelector).click();
    return new CheckboxesPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public ContextMenuPage clickContextMenuLink() {
    new Button(contextMenuLinkSelector).click();
    return new ContextMenuPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public DisappearingElementsPage clickDisappearingElementsLink() {
    new Button(disappearingElementsLinkSelector).click();
    return new DisappearingElementsPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public DragAndDropPage clickDragAndDropLink() {
    new Button(dragAndDropLinkSelector).click();
    return new DragAndDropPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public DropdownPage clickDropdownLink() {
    new Button(dropdownLinkSelector).click();
    return new DropdownPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public DynamicContentPage clickDynamicContentLink() {
    new Button(dynamicContentLinkSelector).click();
    return new DynamicContentPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public DynamicControlsPage clickDynamicControlsLink() {
    new Button(dynamicControlsLinkSelector).click();
    return new DynamicControlsPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public DynamicLoadingPage clickDynamicLoadingLink() {
    new Button(dynamicLoadingLinkSelector).click();
    return new DynamicLoadingPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public ExitIntentPage clickExitIntentLink() {
    new Button(exitIntentLinkSelector).click();
    return new ExitIntentPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public FileDownloadPage clickFileDownloadLink() {
    new Button(fileDownloadLinkSelector).click();
    return new FileDownloadPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public FileUploadPage clickFileUploadLink() {
    new Button(fileUploadLinkSelector).click();
    return new FileUploadPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public FloatingMenuPage clickFloatingMenuLink() {
    new Button(floatingMenuLinkSelector).click();
    return new FloatingMenuPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public ForgotPasswordPage clickForgotPasswordLink() {
    new Button(forgotPasswordLinkSelector).click();
    return new ForgotPasswordPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public FormAuthenticationPage clickFormAuthenticationLink() {
    new Button(formAuthenticationLinkSelector).click();
    return new FormAuthenticationPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public FramesPage clickFramesLink() {
    new Button(framesLinkSelector).click();
    return new FramesPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public GeolocationPage clickGeolocationLink() {
    new Button(geolocationLinkSelector).click();
    return new GeolocationPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public HorizontalSliderPage clickHorizontalSliderLink() {
    new Button(horizontalSliderLinkSelector).click();
    return new HorizontalSliderPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public HoversPage clickHoversLink() {
    new Button(hoversLinkSelector).click();
    return new HoversPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public InfiniteScrollPage clickInfiniteScrollLink() {
    new Button(infiniteScrollLinkSelector).click();
    return new InfiniteScrollPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public JavaScriptAlertsPage clickJavaScriptAlertLink() {
    new Button(javaScriptAlertLinkSelector).click();
    return new JavaScriptAlertsPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public JavaScriptErrorPage clickJavaScriptErrorLink() {
    new Button(javaScriptErrorLinkSelector).click();
    return new JavaScriptErrorPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public JQueryUIMenuPage clickJQueryUIMenuLink() {
    new Button(jQueryUIMenuLinkSelector).click();
    return new JQueryUIMenuPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public KeyPressesPage clickKeyPressesLink() {
    new Button(keyPressesLinkSelector).click();
    return new KeyPressesPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public LargeAndDeepDOMPage clickLargeAndDeepDOMLink() {
    new Button(largeAndDeepDOMLinkSelector).click();
    return new LargeAndDeepDOMPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public MultipleWindowsPage clickmultipleWindowsLink() {
    new Button(multipleWindowsLinkSelector).click();
    return new MultipleWindowsPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public NestedFramesPage clickNestedFramesLink() {
    new Button(nestedFramesLinkSelector).click();
    return new NestedFramesPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public NotificationMessagesPage clickNotificationMessagesLink() {
    new Button(notificationMessagesLinkSelector).click();
    return new NotificationMessagesPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public RedirectLinkPage clickRedirectLink() {
    new Button(redirectLinkSelector).click();
    return new RedirectLinkPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public SecureFileDownloadPage clickSecureFileDownloadLink() {
    new Button(secureFileDownloadLinkSelector).click();
    return new SecureFileDownloadPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public ShiftingContentPage clickShiftingContentLink() {
    new Button(shiftingContentLinkSelector).click();
    return new ShiftingContentPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public SlowResourcesPage clickSlowResourcesLink() {
    new Button(slowResourcesLinkSelector).click();
    return new SlowResourcesPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public SortableDataTablesPage clickSortableDataTablesLink() {
    new Button(sortableDataTablesLinkSelector).click();
    return new SortableDataTablesPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public StatusCodesHomePage clickStatusCodesLink() {
    new Button(statusCodesLinkSelector).click();
    return new StatusCodesHomePage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public TyposPage clickTyposLink() {
    new Button(typosLinkSelector).click();
    return new TyposPage();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public WYSIWYGEditorPage clickWYSIWYGEditorLink() {
    new Button(wYSIWYGEditorLinkSelector).click();
    return new WYSIWYGEditorPage();
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>These methods create a Button object for every link on The Internet Page and click it to redirect on a different subpage.

:leveloffset: 3

:leveloffset: 4

[[elements-types.asciidoc_elements-types]]
== Elements types

MrChecker includes Object types for various elements existing on webpages such as Button, TextBox etc. There is also WebElement class and `getDriver().findElementDynamic(By selector)` method for creating webpage objects dynamically and performing basic actions:

Instead of using static types you can use:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public TyposPage clickTyposLink() {
    WebElement checkboxesLink = getDriver().findElementDynamic(checkboxesLinkSelector);
    checkboxesLink.click();
    return new TyposPage();
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Or perform actions without creating a variable:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public TyposPage clickTyposLink() {
    getDriver().findElementDynamic(checkboxesLinkSelector).click();
    return new TyposPage();
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 4

[[the-internet-base-test.asciidoc_the-internet-base-test]]
== The Internet Base Test

[[the-internet-base-test.asciidoc_test-class]]
=== Test Class

Create Test class and override methods:

* `public void setUp()` - executes before each test
* `public void tearDown()` - executes after each test</pre>
</div>
</div>
<div class="paragraph">
<p>public class TheInternetBaseTest extends BaseTest {
    @Override
    public void setUp() {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    @Override
    public void tearDown() {
        logStep(&quot;Navigate back to The-Internet page&quot;);
        BasePage.navigateBack();
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>`logStep(String message)` method doesn&apos;t exist yet so you should create it:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>protected static int             step = 0;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> /**
 * Logs test step including step number calculated individually for each test.
 *
 * @param message Text message representing step description.
 */
public static void logStep(String message) {
    BFLogger.logInfo(&quot;Step &quot; + ++step + &quot;: &quot; + message);
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Write a method for loading The Internet Page and checking if it is properly opened:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>protected static TheInternetPage theInternetPage;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Performs operations required for verifying if The Internet Page is properly opened.
 *
 * @return TheInternetPage
 */
public static TheInternetPage shouldTheInternetPageBeOpened() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Open the Url http://the-internet.herokuapp.com/&quot;);
theInternetPage = new TheInternetPage();
theInternetPage.load();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>logStep(&quot;Verify if Url http://the-internet.herokuapp.com/ is opened&quot;);
assertTrue(&quot;Unable to load The Internet Page&quot;, theInternetPage.isLoaded());</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    return theInternetPage;
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>This Test class can&apos;t be launched because it doesn&apos;t contain any @Test methods. It&apos;s been created only for supporting other Test classes.

:leveloffset: 3

:leveloffset: 4

[[bflogger.asciidoc_bflogger]]
== BFLogger

BFLogger is a default MrChecker logging tool. Use it to communicate important information from test execution. There are three basic logging methods:

* `logInfo(String message)` - used for test steps
* `logDebug(String message)` - used for non-official information, either during the test build process or in Page Object files
* `logError(String message)` - used to emphasize critical information

Logs will be visible in the console and in the log file under path: MrChecker_Test_Framework\workspace\project-folder\logs

:leveloffset: 3

[[master-mrchecker.asciidoc_e2e-tutorials]]
=== E2E Tutorials

:leveloffset: 3

:toc: macro


toc::[]
:idprefix:
:idseparator: -
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[Tutorial1.asciidoc]]
= MrChecker E2E tutorials

In order to learn more about MrChecker structure start from Project Organisation section and then check out our fantastic tutorials:

[[tutorial1.asciidoc_how-to-create-a-basic-test-in-mrchecker]]
== How to create a basic test in MrChecker

[[tutorial1.asciidoc_example-booking-a-table]]
=== Example: Booking a table
As an example to test we will use http://de-mucdevondepl01:8090/bookTable[MyThaiStar] booking page. +
In order to book a table do the following steps:

1. Open MyThaiStar Book Table Page
2. ter booking data: Date and time, Name, Email and number of Table guests
3. Click Accept terms
4. Click Book table
5. Display confirmation box and send booking
6. Check if the booking was successful.

image::images/image1.png[]

image::images/image2.png[]

You can go through these steps manually and doublecheck the result.

[[tutorial1.asciidoc_how-to-prepare-a-test]]
=== How to prepare a test

[[tutorial1.asciidoc_1.-create-booktablepage-class]]
==== 1. Create BookTablePage class

You will need a class which will represent MyThaiStart booking page. +
Fill required methods with the following code:</pre>
</div>
</div>
<div class="paragraph">
<p>public class BookTablePage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    getDriver().waitForPageLoaded(); //waits untli the page is loaded
    return getDriver().getCurrentUrl()
            .equals(&quot;http://de-mucdevondepl01:8090/bookTable&quot;); //checks if current page address equals MyThaiStar booking page adress
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void load() {
    getDriver().get(&quot;http://de-mucdevondepl01:8090/bookTable&quot;); //loads page under specified adress
    getDriver().waitForPageLoaded(); //waits untli the page is loaded
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    @Override
    public String pageTitle() {
        return &quot;My Thai Star&quot;; //returns page title
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>`getDriver()` method allows accessing selenium web driver which perform actions on the webpage.

As this page class represents the MyThaiStar booking page, you have to set up selectors for web elements required in the test case. In the example you have to create selectors for elements which we&#x2019;ll interact with:

* Date and time input field
* Name input field
* Email input field
* Table guests input field
* Accept terms checkbox
* Book table button

Selectors will be implemented as fields.

Example of the selector for Date and time input field:</pre>
</div>
</div>
<div class="paragraph">
<p>/** Date field search criteria */
private static final By dateSearch = By.cssSelector(&quot;input[formcontrolname=&apos;bookingDate&apos;]&quot;);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>The input field&apos;s name &quot;bookingDate&quot; was found by using the developer console in Google Chrome. https://github.com/devonfw/devonfw-testing/wiki/documentation/cssSelector.docx[How to prepare the everlasting selector?]

image::images/image3.png[]

This selector can be used to create a WebElement object of the said input field. Therefore, you will create a new method and call it &quot;enterTimeAndDate&quot;.</pre>
</div>
</div>
<div class="paragraph">
<p>public void enterTimeAndDate(String date) {
    WebElement dateInput = getDriver().findElementDynamic(dateSearch); //creates new WebElement to access Date and time input field
    dateInput.sendKeys(date); //enters date value
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Now you can create other selectors and objects and methods for every element on the webpage:</pre>
</div>
</div>
<div class="paragraph">
<p>/** Name input field search criteria */
private static final By nameSearch = By.cssSelector(&quot;input[formcontrolname=&apos;name&apos;]&quot;);</p>
</div>
<div class="paragraph">
<p>/** Email input field search criteria */
private static final By emailSearch = By.cssSelector(&quot;input[formcontrolname=&apos;email&apos;]&quot;);</p>
</div>
<div class="paragraph">
<p>/** Number of guests search criteria */
private static final By guestsSearch = By.cssSelector(&quot;input[formcontrolname=&apos;assistants&apos;]&quot;);</p>
</div>
<div class="paragraph">
<p>/** Check box search criteria */
private static final By checkboxSearch = By.cssSelector(&quot;mat-checkbox[data-name=&apos;bookTableTerms&apos;]&quot;);</p>
</div>
<div class="paragraph">
<p>/** Book table button search criteria */
private static By bookTableSearch = By.name(&quot;bookTableSubmit&quot;);</p>
</div>
<div class="listingblock">
<div class="content">
<pre></pre>
</div>
</div>
<div class="paragraph">
<p>public void enterName(String name) {
    WebElement nameInput = getDriver().findElementDynamic(nameSearch); //creates new WebElement to access name input field
    nameInput.sendKeys(name); //enters name value
}</p>
</div>
<div class="paragraph">
<p>public void enterEmail(String email) {
    WebElement emailInput = getDriver().findElementDynamic(emailSearch); //creates new WebElement to access email input field
    emailInput.sendKeys(email); //enters email value
}</p>
</div>
<div class="paragraph">
<p>public void enterGuests(int amountOfGuests) {
    WebElement guestsInput = getDriver().findElementDynamic(guestsSearch); //creates new WebElement to access amount of guests input field
    guestsInput.sendKeys(Integer.toString(amountOfGuests)); //enters amount of guests value converted from integer to string
}</p>
</div>
<div class="paragraph">
<p>public void acceptTerms() {
    WebElement checkbox = getDriver().findElementDynamic(checkboxSearch); //creates new WebElement to access accept terms checkbox
    WebElement square = checkbox.findElement(By.className(&quot;mat-checkbox-inner-container&quot;)); //creates new WebElement to access inner square
    JavascriptExecutor js = (JavascriptExecutor) getDriver(); //creates Javascript executor object
    js.executeScript(&quot;arguments[0].click()&quot;, square); //executes script which clicks the square</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>public void clickBookTable() {
    WebElement buttonbutton = getDriver().findElementDynamic(bookTableSearch); //creates new WebElement to access book table button
    getDriver().waitUntilElementIsClickable(bookTableSearch); //waits until button might be clicked
    buttonbutton.click(); //clicks the button
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>You can use those methods in order to create a new method to go through the whole booking process:</pre>
</div>
</div>
<div class="paragraph">
<p>public ConfirmBookPage enterBookingData(String date, String name, String email, int guests) {
    enterTimeAndDate(date);
    enterName(name);
    enterEmail(email);
    enterGuests(guests);
    acceptTerms();</p>
</div>
<div class="literalblock">
<div class="content">
<pre>clickBookTable();</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    return new ConfirmBookPage();
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[tutorial1.asciidoc_2.-create-confirmbookpage-class]]
==== 2. Create ConfirmBookPage class

As you can see, this method returns another page object that was not created yet. This step is required, as the booking information that you would like to check is on another webpage. This means that you will have to create another page class, and call it ConfirmBookPage:</pre>
</div>
</div>
<div class="paragraph">
<p>public class ConfirmBookPage extends BasePage {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>/** Confirmation dialog search criteria */
private static final By confirmationDialogSearch = By.className(&quot;mat-dialog-container&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/** Send confirmation button search criteria */
private static final By sendButtonSearch = By.name(&quot;bookTableConfirm&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>/** Cancel confirmation button search criteria */
private static final By cancelButtonSearch = By.name(&quot;bookTableCancel&quot;);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public boolean isLoaded() {
    //creates new WebElement to access confirmation dialog box
    WebElement confirmationDialog = getDriver().findElementDynamic(confirmationDialogSearch);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    return confirmationDialog.isDisplayed(); //checks if the box is displayed
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>//this method won&apos;t be called because the page is loaded only after clicking book table button
@Override
public void load() {
    BFLogger.logError(&quot;MyThaiStar booking confirmation page was not loaded.&quot;); //logs error
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public String pageTitle() {
    return &quot;My Thai Star&quot;;
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>public void confirmBookingData() {
    WebElement sendButton = getDriver().findElementDynamic(sendButtonSearch); //creates new WebElement to access confirmation button
    sendButton.click(); //clicks send button
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    public void cancelBookingData() {
        WebElement cancelButton = getDriver().findElementDynamic(cancelButtonSearch); //creates new WebElement to access resignation button
        cancelButton.click(); //clicks cancel button
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>image::images/image4.png[]

After click on Send button - the green confirmation dialogue appears with the message &quot;Table successfully booked&quot;:

image::images/image5.png[]

To be able to check if the booking was successful, you should go back to the BookTablePage class and add one more methods in order to check if the green box was displayed:</pre>
</div>
</div>
<div class="paragraph">
<p>/** Dialog search criteria */
private static final By dialogSearch = By.className(&quot;bgc-green-600&quot;);</p>
</div>
<div class="paragraph">
<p>public boolean checkConfirmationDialog() {
    WebElement greenConfirmationDialog = getDriver().findElementDynamic(dialogSearch); //creates new WebElement to access confirmation dialog</p>
</div>
<div class="literalblock">
<div class="content">
<pre>    return greenConfirmationDialog.isDisplayed(); //checks if the dialog is displayed
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[tutorial1.asciidoc_3.-create-booktabletest-class]]
==== 3. Create BookTableTest class

At this point you can start creating a test class:</pre>
</div>
</div>
<div class="paragraph">
<p>import static org.junit.Assert.assertTrue;</p>
</div>
<div class="paragraph">
<p>public class BookTableTest extends BaseTest {
    private static BookTablePage bookTablePage = new BookTablePage(); //field contains book table page object</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@BeforeClass
public static void setUpBeforeClass() {
    bookTablePage.load(); //loads book table page
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@AfterClass
public static void tearDownAfterClass() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void setUp() {
    if (!bookTablePage.isLoaded()) {
        bookTablePage.load(); //if page is not loaded loads it
    }
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public void tearDown() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[tutorial1.asciidoc_4.-write-the-first-test]]
==== 4. Write the first test

You can prepare our first test method using methods from page classes</pre>
</div>
</div>
<div class="paragraph">
<p>@Test
public void Test_BookTableAndCheckConfirmation() {
    String date = &quot;07/23/2019 1:00 PM&quot;; //replace with tommorow date in format &quot;MM/dd/yyyy hh:mm a&quot;
    String name = &quot;Smith&quot;; //name field
    String email = &quot;<a href="mailto:smith@somemail.com">smith@somemail.com</a>&quot;; //email field
    int guests = 3; //amount of guests</p>
</div>
<div class="literalblock">
<div class="content">
<pre>//enters booking data and returns new confirmation page
ConfirmBookPage confirmBookPage = bookTablePage.enterBookingData(date, name, email, guests);
confirmBookPage.confirmBookingData(); //confirms booking</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    //checks if green dialog box appears, if it does test passed, if not test failed and display message given in first argument
    assertTrue(&quot;Test failed: Table not booked&quot;, bookTablePage.checkConfirmationDialog()); //returns true if dialog box appears and false if not
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[tutorial1.asciidoc_5.-run-the-test]]
==== 5. Run the test

Run the test by right-clicking on the test method -&gt; Run as -&gt; JUnit test.

image::images/image6.png[]

:leveloffset: 3

[[master-mrchecker.asciidoc_faq]]
== FAQ

Here you can find the most frequently asked questions regarding working with MrChecker and installation problems.

[[master-mrchecker.asciidoc_common-problems]]
=== Common problems

:leveloffset: 3

[[I-cannot-find.asciidoc]]
= I can&apos;t find the boilerplate module. Has it been removed?

The _boilerplate_ module has been removed from a GitHub project on purpose.

There were problems with naming and communication, not everybody was aware of the meaning of the word _boilerplate_.

The name of the folder has been changed into the _template_. It can be found on the GitHub project.

:leveloffset: 3

:leveloffset: 3

[[It-is-possible.asciidoc]]
= Is it possible to use Docker with MrChecker?

MrChecker works seamlessly with Docker.

A direct example of how to use it can be found in following JenkinsFile https://github.com/devonfw/devonfw-testing/blob/develop/mrchecker-app-under-test/pipelines/CI/Jenkinsfile_node.groovy

Note that the structure of the folders can be changed. if that happens - search in repo _/pipeline/CI/Jenkinsfile_node.groovy_

:leveloffset: 3

:leveloffset: 3

[[Tests-are-not-stable.asciidoc]]
= Tests are not stable

Selenium tests perform actions much faster than normal user. Because pages contain dynamically changing content, some web elements can be not loaded when Selenium driver tries to access them.

`getDriver().waitForPageLoaded()` method checks ready state in the browser, that&apos;s why stability problems may happen in advanced frontend projects.

To improve test stability you can:

* add waiting methods before dynamically loading elements e.g. `getDriver().waitForElement(By selector)`
* add timeout parameter in `method getDriver().findElementDynamic(By selector, int timeOut)`
* change global waiting timeout value using method `getDriver().manage().timeouts().implicitlyWait(long time, TimeUnit unit)`

Also if page displays visible loading bars or spinners create FluentWait method to wait until they disappear.

Notice that by increasing timeouts you may improve stability but too long waiting time makes a test run slower.

Learn more from tutorials: +
https://capgemini.sharepoint.com/sites/Mr-Checker/SitePages/Example-10--Dynamicly-Loading-Elements.aspx[Example 10: Dynamically loaded Elements] +
https://capgemini.sharepoint.com/sites/Mr-Checker/SitePages/Example-11--Exit-intent.aspx[Example 11: Exit intent] +
https://capgemini.sharepoint.com/sites/Mr-Checker/SitePages/Example-12-.aspx[Example 12: File download test]

:leveloffset: 3

[[master-mrchecker.asciidoc_how-to]]
=== How to

:leveloffset: 3

[[Change-timeouts.asciidoc]]
= How to: Change timeouts?

If you would like to change timeouts - you don&apos;t have to change it globally.
It is possible to add waiting time parameter to searching methods, such as:

`getDriver().findElementDynamic(By selector, int timeOut)` +
timeout - in seconds

It is recommended to use methods, that significantly level up the repetitive of the code:</pre>
</div>
</div>
<div class="paragraph">
<p>getDriver().waitForElement(By selector);</p>
</div>
<div class="paragraph">
<p>getDriver().waitForElementVisible(By selector);</p>
</div>
<div class="paragraph">
<p>getDriver().waitForPageLoaded();</p>
</div>
<div class="paragraph">
<p>getDriver().waitUntilElementIsClickable(By selector);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Or Fluent Wait methods with changed timeout and interval:</pre>
</div>
</div>
<div class="paragraph">
<p>FluentWait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(getDriver())
        .withTimeout(long duration, TimeUnit unit)
        .pollingEvery(long duration, TimeUnit unit);
wait.untilWebDriver wd) &#x2192; expectedCondition.isTrue(;
getWebDriverWait().withTimeout(millis, TimeUnit.MILLISECONDS)
        .withTimeout(long duration, TimeUnit unit)
        .pollingEvery(long duration, TimeUnit unit)
        .untilWebDriver wd) &#x2192; expectedCondition.isTrue(;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>These methods allow to change WebDriver timeouts values such as:

`getDriver().manage().timeouts().pageLoadTimeout(long time, TimeUnit unit)` +
the amount of time to wait for a page to load before throwing an exception. This is the default timeout for `method getDriver().waitForPageLoaded()`

`getDriver().manage().timeouts().setScriptTimeout(long time, TimeUnit unit)` +
the amount of time to wait for finish execution of script before throwing an exception

`getDriver().manage().timeouts().implicitlyWait(long time, TimeUnit unit)`
the amount of time the driver should wait when searching for an element if it is not immediately present. After that time throws an exception. This the default timeout for methods such as `getDriver().findElementDynamic(By selector)` or `getDriver().waitForElement(By selector)`

Changing timeouts can improve test stability but can also make run time slower.


:leveloffset: 3

:leveloffset: 3

[[Start-a-browser.asciidoc]]
= How to: Start a browser in Incognito/Private mode?

In MrChecker there is a functionality &#x2013; options for browser during runtime execution.

To run the browser in incognito mode:

1. In Eclipse open Run Configurations window:
+
image:images/ht_image1.png[]
+
2. Select a test which you want to run and switch to arguments tab:
+
image:images/ht_image2.png[]
+
3. Add VM argument:
    * for the incognito mode in chrome:
+
image:images/ht_image3.png[]

Read more about browsers options: https://github.com/devonfw/devonfw-testing/wiki/Run-with-different-browser-options

:leveloffset: 3

[[master-mrchecker.asciidoc_installation-problems]]
=== Installation problems

:leveloffset: 3

[[Chromedriver-version.asciidoc]]
= Chromedriver version is not compatible with Chrome browser

*Problem:*

During the tests your web browser window opens and immediately closes, all your tests are broken.

Following error message is visible in the test description:</pre>
</div>
</div>
<div class="paragraph">
<p>session not created: This version of ChromeDriver only supports Chrome version 76
Build info: version: &apos;&lt;build_version&gt;&apos;, revision: &apos;&lt;build_revision&gt;&apos;, time: &apos;&lt;time&gt;&apos;
System info: host: &apos;&lt;your_computer_name&gt;&apos;, ip: &apos;&lt;your_ip_address&gt;&apos;, os.name: &apos;&lt;your_os_name&gt;&apos;, os.arch: &apos;&lt;your_os_architecture&gt;&apos;, os.version: &apos;&lt;your_os_version&gt;&apos;, java.version: &apos;&lt;java_version_installed&gt;&apos;
Driver info: driver.version: NewChromeDriver</p>
</div>
<div class="listingblock">
<div class="content">
<pre>*Solution:*

1. Make a change in following files:
    * `MrChecker_Test_Framework\workspace\devonfw-testing\src\resources\settings.properties`
    * For project template-app-under-test: `MrChecker_Test_Framework\workspace\devonfw-testing\template\src\resources\settings.properties`
    * For project example-app-under-test: `MrChecker_Test_Framework\workspace\devonfw-testing\example\src\resources\settings.properties`
+
Change the value of `selenium.driverAutoUpdate` field form `true` to `false`

2. Replace in the following
`MrChecker_Test_Framework\workspace\devonfw-testing\example\lib\webdrivers\chrome\chromedriver.exe` file with a version compatible with your browser.

:leveloffset: 3

:leveloffset: 3

[[My-browser-opens-up.asciidoc]]
= My browser opens up by default in German

*Problem:*

I would like my browser to use the English language, but the default language for the browser is German. How can I change the settings?

*Solution:*

There is a Properties file installed together with MrCheker installation. It is possible to set the language in _Properties &gt; Selenium configuration_, in which a browser could be opened for testing purposes.

:leveloffset: 3

:leveloffset!:

:leveloffset: 0

:toc: macro
toc::[]

[[master-my-thai-star.asciidoc]]
= MyThaiStar

:leveloffset: 1

[[agile.asciidoc]]
= 1.	My Thai Star &#x2013; Agile Framework

[[agile.asciidoc_1.1-team-setup]]
== 1.1 Team Setup

The team working on the development of the My Thai Star app and the documentation beside the technical development works distributed in various locations across Germany, the Netherlands, Spain and Poland. For the communication part the team uses the two channels Skype and Mail and for the documentation part the team makes usage mainly of GitHub and Jira.

[[agile.asciidoc_1.2-scrum-events]]
== 1.2 Scrum events

[[agile.asciidoc_sprint-planning]]
=== Sprint Planning

Within the My Thai Star project we decided on having one hour Sprint Planning meetings for a four-week Sprints. This decision is based on the fact that this project is not the main project of the team members. As the backlog refinement is done during the Sprint Planning we make usage of the planningpoker.com tool for the estimation of the tasks.

.Screenshot of planningpoker.com during Sprint 1 Planning
image::images/methodology_1.png[Screenshot of planningpoker.com, width=&quot;450&quot;, link=&quot;images/methodology_01.png&quot;]

During the Sprint Planning meeting the team receives support from Devon colleagues outside the development. This feedback helps the team to focus on important functionalities and task by keeping the eyes on the overall aim which is to have a working application by the end of June 2017.


[[agile.asciidoc_sprint-review]]
=== Sprint Review

The Sprint Review meetings are time boxed to one hour for the four week Sprint. Within the Sprint Review meeting the team plans to do a retrospective of the finished Sprint. As well as it is done during the Sprint Planning the team receives support from Devon colleagues.

[[agile.asciidoc_sprint-retrospective]]
=== Sprint Retrospective

For this project the team aligned on not having a specific Sprint Retrospective meeting. The team is going to have a retrospective of a finished Sprint during the Sprint Review.

[[agile.asciidoc_daily-standups]]
=== Daily Standups

The team aligned on having two weekly Standup meetings instead of a Daily Standup meeting. In comparison with the time boxed length of 15mins described in the CAF for this project the team extended the Standup meeting to 30mins. The content of the meetings remains the same.

[[agile.asciidoc_backlog-refinement]]
=== Backlog refinement

The team decided that the backlog refinement meeting is part of the Sprint Planning meeting.

[[agile.asciidoc_1.3-establish-product-backlog]]
== 1.3 Establish Product Backlog

For the My Thai Stair project the team decided on using the Jira agile documentation which is one of the widely used agile tools. Jira is equipped with several of useful tools regarding the agile software development (e.g. Scrum-Board). One of the big advantages of Jira are the extensive configuration and personalization possibilities.
With having a list of the Epics and User Stories for the My Thai Star development in GitHub, the team transferred the User Stories into the Jira backlog as it is shown in the screenshot below. All User Stories are labeled colorfully with the related Epic which shapes the backlog in clearly manner.

.Screenshot of the Jira backlog during Sprint 2
image::images/methodology_2.png[Screenshot of planningpoker.com, width=&quot;450&quot;, link=&quot;images/methodology_02.png&quot;]

We decided on working with Subtask as a single user story comprised a number of single and separated tasks. Another benefit of working with subtask is that every single subtask can be assigned to a single team member whereas a user story can only be assigned to one team member. By picking single subtask the whole process of a user story is better organized.

.Screenshots of Subtasks during Sprint 2
image::images/methodology_3.png[Screenshot of Subtasks, width=&quot;450&quot;, link=&quot;images/methodology_03.png&quot;]

[[agile.asciidoc]]
= 2.	My Thai Star &#x2013; Agile Diary

In parallel to the Diary Ideation we use this Agile Diary to document our Scrum events. The target of this diary is to describe the differences to the Scrum methodology as well as specific characteristics of the project. We also document the process on how we approach the Scrum methodology over the length of the project.

[[agile.asciidoc_24.03.2017-sprint-1-planning]]
== 24.03.2017 Sprint 1 Planning

Within the Sprint 1 Planning we used planning poker.com for the estimation of the user stories. The estimation process usually is part of the backlog refinement meeting. Regarding the project circumstances we decided to estimate the user stories during the Sprint Planning. Starting the estimation process we noticed that we had to align our interpretation of the estimation effort as these story points are not equivalent to a certain time interval. The story points are relative values to compare the effort of the user stories. With this in mind we proceeded with the estimation of the user stories. We decided to start Sprint 1 with the following user stories and the total amount of 37 story points:
&#x2022;	ICSDSHOW-2	Create invite for friends	(8  Story Points)
&#x2022;	ICSDSHOW-4	Create reservation		(3)
&#x2022;	ICSDSHOW-5	Handle invite			(3)
&#x2022;	ICSDSHOW-6	Revoke accepted invite 	(5)
&#x2022;	ICSDSHOW-9	Cancel invite			(3)
&#x2022;	ICSDSHOW-11	Filter menu			(5)
&#x2022;	ICSDSHOW-12	Define order			(5)
&#x2022;	ICSDSHOW-13	Order the order		(5)
As the Sprint Planning is time boxed to one hour we managed to hold this meeting within this time window.

[[agile.asciidoc_27.04.2017-sprint-1-review]]
== 27.04.2017 Sprint 1 Review

During the Sprint 1 Review we had a discussion about the data model proposal. For the discussion we extended this particular Review meeting to 90min. As this discussion took almost 2/3 of the Review meeting we only had a short time left for our review of Sprint 1. For the following scrum events we decided to focus on the primary target of these events and have discussions needed for alignments in separate meetings.
Regarding the topic of splitting user stories we had the example of a certain user story which included a functionality of a twitter integration (ICSDSHOW-17 User Profile and Twitter integration). As the twitter functionality could not have been implemented at this early point of time we thought about cutting the user story into two user stories. We aligned on mocking the twitter functionality until the dependencies are developed in order to test the components. As this user story is estimated with 13 story points it is a good example for the question whether to cut a user story into multiple user stories or not.
Unfortunately not all user stories of Sprint 1 could have been completed. Due this situation we discussed on whether pushing all unfinished user stories into the status done or moving them to Sprint 2. We aligned on transferring the unfinished user stories into the next Sprint. During the Sprint 1 the team underestimated that a lot of holidays crossed the Sprint 1 goals. As taking holidays and absences of team members into consideration is part of a Sprint Planning we have a learning effect on setting a Sprint Scope.

[[agile.asciidoc_03.05.2017-sprint-2-planning]]
== 03.05.2017 Sprint 2 Planning

As we aligned during the Sprint 1 Review on transferring unfinished user stories into Sprint 2 the focus for Sprint 2 was on finishing these transferred user stories. During our discussion on how many user stories we could work on in Sprint 2 we needed to remind ourselves that the overall target is to develop an example application for the DevonFW. Considering this we aligned on a clear target for Sprint 2: To focus on finishing User Stories as we need to aim for a practicable and realizable solution. Everybody aligned on the aim of having a working application at the end of Sprint 2.
For the estimation process of user stories we make again usage of planningpoker.com as the team prefers this &#x201C;easy-to-use&#x201D; tool. During our second estimation process we had the situation in which the estimated story points differs strongly from one team member to another. In this case the team members shortly explains how the understood and interpreted the user story. It turned out that team members misinterpreted the user stories. With having this discussion all team members got the same understanding of the specific functionality and scope of a user story. After the alignment the team members adjusted their estimations.
Beside this need for discussion the team estimated most of the user stories with very similar story points. This fact shows the increase within the effort estimation for each team member in comparison to Sprint 1 planning. Over the short time of two Sprint planning the team received a better understanding and feeling for the estimation with story points.

[[agile.asciidoc_01.06.2017-sprint-2-review]]
== 01.06.2017 Sprint 2 Review

As our Sprint 1 Review four weeks ago was not completely structured like a Sprint Review meeting we focused on the actual intention of a Sprint Review meeting during Sprint 2 Review. This means we demonstrated the completed and implemented functionalities with screen sharing and the product owner accepted the completed tasks.
Within the User Story ICSDSHOW-22 &#x201C;See all orders/reservations&#x201D; the functionality &#x201C;filtering the list by date&#x201D; could have not been implemented during Sprint 2. The team was unsure on how to proceed with this task. One team member added that especially in regards of having a coherent release, implementing less but working functionalities is much better than implementing more but not working functionalities. For this the team reminded itself focusing on completing functionalities and not working straight to a working application.


:leveloffset: 3

:leveloffset: 1

:toc:
toc::[]

[[User-Stories.asciidoc]]
= User Stories

The list of user stories, exported from JIRA, can be downloaded from xref:resources/us_export_jira.xlsx[here].

[[user-stories.asciidoc_epic-invite-friends]]
== Epic: Invite friends
[[user-stories.asciidoc_us-create-invite-for-friends]]
=== US: create invite for friends

Epic: Invite friends

As a guest I want to create an dinner event by entering date and time and adding potential guests by their emails so that each potential guests receives a email in order to confirm or decline my invite.

[[user-stories.asciidoc_acceptance-criteria]]
===== Acceptance criteria
 . only date and time in future possible and both required
 . only valid email addresses: text@text.xx, one entered email-address is required
 . if AGB are not checked, an error message is shown
 . after the invite is done
 .. I see the confirmation screen of my invite (see wireframe)
 .. I receive a confirmation email about my invite containing date, time and invited guests
 .. all guests receive a mail with my invite

[[user-stories.asciidoc_us-create-reservation]]
=== US: create reservation

Epic: Invite friends

As a guest I want to create a reservation by entering date and time and number of adults and kids

[[user-stories.asciidoc_acceptance-criteria]]
===== Acceptance criteria
. only date and time in future possible and both required
. only valid email addresses: text@text.xx, one entered email-address is required
. if AGB are not checked, an error message is shown
. after the reservation is done
.. I see a confirmation screen of my reservation with datetime, number of persons and kids
.. I receive a confirmation email about my reservation


[[user-stories.asciidoc_wireframes]]
===== Wireframes
see realtimeboard

[[user-stories.asciidoc_us-handle-invite]]
=== US: handle invite

As an invited guest I would like to receive an email - after somebody as invited me - with the option to accept or decline the invite so that the system knows about my participation

[[user-stories.asciidoc_ac]]
===== AC:
. the mail contains the following information about the invite
  .. who has invited
  .. who else is invited
  .. date and time of the invite
  .. button to accept or decline
  .. after pressing the buttons the system will store the status (yes/no) of my invite

[[user-stories.asciidoc_us-revoke-accepted-invite]]
=== US: revoke accepted invite

As an invited guest I would like to revoke my previous answer in order to inform the system and the inviter about my no showup

[[user-stories.asciidoc_ac]]
==== AC:
 . the inviter and myself receives an email about my cancellation
 . the system sets my status of my invite to no
 . in case I have placed an order, the order is also removed from the system.
 . the cancellation is only possible 10 minutes before the event takes place. The system shows a message that cancellation is not possible anymore.

[[user-stories.asciidoc_us-calculate-best-table]]
=== US: calculate best table

As a guest I would like the system to check (1 hour before my invite) all my invites and to reserve a table fitting the number of accepted users

[[user-stories.asciidoc_details]]
===== Details
Pseudo-algorithm for reservation:
Find table for given date and time where seats of guests &gt;= Count of invited guests plus one. In case no results, decline request and show error message to user. In case of any result, make a reservation for table....
For each decline of a guest remove guest and search with reduced number for new table. In case table is found, reserve it and remove reservation from previous table. In case not, do not change reservations.

[[user-stories.asciidoc_us-find-table-by-reservation-info]]
=== US: find table by reservation info

As a waiter I would like to search by reference number or email address for the reserved table in order to know the table for my visit. (when arriving at the restaurant)

[[user-stories.asciidoc_ac]]
===== AC:
. After entering the email the systems shows the number of the table. In case no reservation found, a message is shown.
. Entered email address could be email of inviter or any invited guest.

[[user-stories.asciidoc_us-cancel-invite]]
=== US: cancel invite
Epic: Invite friends

As a guests who has sent an invite I want to be able to cancel my previous invite in order to inform the restaurant and my invited guests that I will not show up

[[user-stories.asciidoc_ac]]
===== AC:
 . the option to cancel the invite is available in the confirmation-mail about my invite
 . after my cancellation all invited guests receives a mail about the cancelation
 . I see a confirmation that my invite was cancelled successfully
 . after my cancelation my invite and reservation and all orders related to it are deleted from the system and no one can accept or decline any invite for it
 . the cancellation is only possible one hour before the invite takes place. After that I am not allowed to cancel it any more.

[[user-stories.asciidoc_epic-digital-menu]]
== Epic: Digital Menu
[[user-stories.asciidoc_us-filter-menu]]
=== US: filter menu

As a guest I want to filter the menu so that I only see the dishes I am interested in

[[user-stories.asciidoc_ac]]
===== AC:
. the guest can filter by
 .. type: starter | main dish | dessert; XOR; if nothing is selected all are shown (default value)
 .. veggy (yes|no|does not matter (default))
 .. vegan (yes|no|does not matter (default))
 .. rice (yes|no|does not matter (default))
 .. curry (yes|no|does not matter (default))
 .. noodle (yes|no|does not matter (default))
 .. price (range)
 .. ratings (range)
 .. my favorite (yes|no|does not matter (default))
 -- free text (search in title and description)
. the guest can sort by price asc, rating asc
. after setting the filter only dishes are shown which fulfills those criteria
. by pressing the button reset filter all filter are reset to the initial value
. by pressing the filter button the filter is applied [or is it triggered after each change?]

[[user-stories.asciidoc_us-define-order]]
=== US: Define order

As a guest I want to define my order by selecting dishes from the menu

[[user-stories.asciidoc_ac]]
===== AC:
- The guest can add each dish to the order
- In case the guest adds the same dish multiple times, a counter in the order for this dish is increased for this dish
- The guest can remove the dish from the order
- The guest can add for each main dish the type of meat (pork, chicken, tofu)
- The guest can add for each dish a free-text-comment
- After adding/removing any dish the price is calculated including VAT

[[user-stories.asciidoc_us-order-the-order]]
=== US: Order the order

As a guest I want to order my selected dishes (order)

AC:

.  I receive a mail containing my order with all dishes and the final price
.  precondition for ordering:
.. Each order must be associated with a reservation / invite. Without any reference no order could be placed. The reference could be obtained from a previous reservation/invite (created during same session) or by the previous accepted invite (link in email) or by entering the reference id when asked by the system.
... In case precondition is not fulfilled, the guest is asked
.... whether he/she would like to create a reservation/invite and is forwarded to US Invite Friends. Only after finalizing the reservation the order is accepted.
.... or he/she would enter previous created reservation-id he/she knows in order to associate his/her order with this reservation

[[user-stories.asciidoc_us-cancel-order]]
=== US: Cancel order

As a guest I want to cancel my order.

AC:

. in my received confirmation mail I have the option to cancel my order
. the cancelation is only possible one hour before my reservation takes place
. my order is deleted from the system

Remark: Changing the order is not possible. For that the order must be canceled and created from scratch again

[[user-stories.asciidoc_us-read-twitter-rating-for-dishes]]
=== US: Read twitter rating for dishes

As a guest I want to read for all dishes the rating done be twitter because I would like to know the opinion of others

AC:

 . For each dish I see the latest 3 comments done by twitter for this vote (text, username, avatar)
 . For each dish I see the number of likes done by twitter

[[user-stories.asciidoc_epic-user-profile]]
== Epic: User Profile

[[user-stories.asciidoc_us-user-profile]]
=== US: User Profile

As a guest I want to have a user profile to associate it with my twitter account to be able to like/rate dishes

AC:

 . Username of my profile is my email address
 . My profile is protected by password
 . I can log in and log out to my profile
 . I can reset my password by triggering the reset by mail
 . I can associate my profile with my twitter account in order to rate dishes and store my favorites by liking posts associated to dishes

[[user-stories.asciidoc_epic-rate-by-twitter]]
== Epic: Rate by twitter

[[user-stories.asciidoc_us-receive-mail-to-rate-your-dish]]
=== US: Receive mail to rate your dish

As a guest I want to receive a mail by the system in order to rate my dish

[[user-stories.asciidoc_us-rate-your-dish]]
=== US: Rate your dish


As a guest I want to add a comment or a like via my twitter account for a dish

AC:

 . Before I write my rate I would like to be able to read all tweets of other users for this dish
 . I would like to see the number of likes for a dish


[[user-stories.asciidoc_epic-waiter-cockpit]]
== Epic: Waiter Cockpit

[[user-stories.asciidoc_us-see-all-ordersreservations]]
=== US: See all orders/reservations

As a waiter I want to see all orders/reservation in order to know what is going on in my restaurant

AC:

 . all orders/reservations are shown in a list view (read-only). Those list can be filtered and sorted (similar to excel-data-filters)
 . orders/reservations are shown in separate lists.
 . for each order the dish, meat, comment, item, reservation-id, reservation datetime, creation-datetime is shown
 . for each reservation the inviters email, the guests-emails, the number of accepts and declines, calculated table number, the reservation-id, reservation date-time and creation-datetime are shown
 . the default filter for all lists is the todays date for reservation datetime. this filter can be deleted.
 . only reservations and orders with reservation date in the future shall be available in this view. All other orders and reservation shall not be deleted; for data analytics those orders and reservation shall still exist in the system.







checklist:

talk about:

 - who?
 - what?
 - why (purpose)
 - why (objective)
 - what happens outside the software
 - what might go wrong
 - any question or assumptions (write them down) , DoR should check that those sections are empty.
 - is there any better solution?
 - how (technical perspective)
 - do a rough estimate
 - check INVEST

:leveloffset: 3

[[master-my-thai-star.asciidoc_technical-design]]
== Technical design

[[master-my-thai-star.asciidoc_data-model]]
=== Data Model

:leveloffset: 3

:toc:
toc::[]

[[My-Thai-Star-data-model.asciidoc]]
= Data Model

image::images/mts_datamodel.png[, link=&quot;images/mts_datamodel.png&quot;]

:leveloffset: 3

:leveloffset: 3

:toc:
toc::[]

[[my-thai-star-nosql-data-model.asciidoc]]
= NoSQL Data Model

image::images/nodejs/dynamodb-data-model-1.4.1.png[, link=&quot;images/nodejs/dynamodb-data-model-1.4.1.png&quot;]

:leveloffset: 3

[[master-my-thai-star.asciidoc_server-side]]
=== Server Side

:leveloffset: 3

:toc: macro
toc::[]

[[java-design.asciidoc]]
= Java design

[[java-design.asciidoc_introduction]]
== Introduction

The Java backend for My Thai Star application is going to be based on:

- *DEVON4J* as the Java framework
- *Devonfw* as the Development environment
- *Cobigen* as code generation tool

To know more details about the above technologies please visit the following documentation:

- https://github.com/devonfw/devon4j/wiki[DEVON4J]

- https://github.com/devonfw/devon/wiki[Devonfw]

- https://github.com/devonfw/cobigen/wiki[Cobigen]

[[java-design.asciidoc_basic-architecture-details]]
== Basic architecture details

Following the DEVON4J conventions the Java My Thai Star backend is going to be developed dividing the application in _Components_ and using a three layers architecture.

[[java-design.asciidoc_project-modules]]
=== Project modules

Using the DEVON4J approach for the Java backend project we will have a structure of a _Maven_ project formed by three projects

image::images/java/project_modules.png[, link=&quot;images/java/project_modules.png&quot;]

- _api_: Stores all the REST interfaces and corresponding Request/Response objects.

- _core_: Stores all the logic and functionality of the application.

- _server_: Configures the packaging of the application.

We can automatically generate this project structure https://github.com/devonfw/devon/wiki/getting-started-creating-new-devonfw-application#running-the-archetype[using the DEVON4J _Maven_ archetype]

[[java-design.asciidoc_components]]
=== Components

The application is going to be divided in different components to encapsulate the different domains of the application functionalities.

image::images/java/mtsj_components.png[, link=&quot;images/java/mtsj_components.png&quot;]

As _main components_ we will find:

- _Bookingmanagement_: Manages the bookings part of the application. With this component the users (anonymous/logged in) can create new bookings or cancel an existing booking. The users with waiter role can see all scheduled bookings.

- _Ordermanagement_: This component handles the process to order dishes (related to bookings). A user (as a host or as a guest) can create orders (that contain dishes) or cancel an existing one. The users with waiter role can see all ordered orders.

- _Dishmanagement_: This component groups the logic related to the menu (dishes) view. Its main feature is to provide the client with the data of the available dishes but also can be used by other components (Ordermanagement) as a data provider in some processes.

- _Usermanagement_: Takes care of the User Profile management, allowing to create and update the data profiles.

As _common components_ (that don&apos;t exactly represent an application&apos;s area but provide functionalities that can be used by the _main components_):

- _Imagemanagement_: Manages the images of the application. In a first approach the _Dishmanagement_ component and the _Usermanagement_ component will have an image as part of its data. The _Imagemanagement_ component will expose the functionality to store and retrieve this kind of data.

- _Mailservice_: with this service we will provide the functionality for sending email notifications. This is a shared service between different app components such as _bookingmanagement_ or _ordercomponent_.

Other components:

- Security (will manage the access to the _private_ part of the application using a https://jwt.io/[jwt] implementation).

- Twitter integration: planned as a _Microservice_ will provide the twitter integration needed for some specific functionalities of the application.


[[java-design.asciidoc_layers]]
=== Layers

- https://github.com/devonfw/devon4j/wiki/guide-service-layer[Service Layer]: this layer will expose the REST api to exchange information with the client applications.

- https://github.com/devonfw/devon4j/wiki/guide-logic-layer[Logic Layer]: the layer in charge of hosting the business logic of the application.

- https://github.com/devonfw/devon4j/wiki/guide-dataaccess-layer[Data Access Layer]: the layer to communicate with the data base.

This architecture is going to be reflected dividing each component of the application in different packages to match those three layers.

[[java-design.asciidoc_component-structure]]
=== Component structure

Each one of the components defined previously are going to be structured using the _three-layers_ architecture. In each case we will have a _service_ package, a _logic_ package and a _dataaccess_ package to fit the layers definition.

image::images/java/component_structure.png[, link=&quot;images/java/component_structure.png&quot;]

[[java-design.asciidoc_dependency-injection]]
=== Dependency injection

As it is explained in the https://github.com/devonfw/devon4j/wiki/guide-dependency-injection[devonfw documentation] we are going to implement the _dependency injection_ pattern basing our solution on _Spring_ and the Java standards: _java.inject_ (JSR330) combined with JSR250.

image::images/java/dependency_injection.png[, link=&quot;images/java/dependency_injection.png&quot;]

- Separation of API and implementation: Inside each layer we will separate the elements in different packages: _api_ and _impl_. The _api_ will store the _interface_ with the methods definition and inside the _impl_ we will store the class that implements the _interface_.

image::images/java/layer_api_impl.png[, link=&quot;images/java/layer_api_impl.png&quot;]

- Usage of JSR330: The Java standard set of annotations for _dependency injection_ (`@Named`, `@Inject`, `@PostConstruct`, `@PreDestroy`, etc.) provides us with all the needed annotations to define our beans and inject them.

[source, java]</pre>
</div>
</div>
<div class="paragraph">
<p>@Named
public class MyBeanImpl implements MyBean {
  @Inject
  private MyOtherBean myOtherBean;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@PostConstruct
public void init() {
  // initialization if required (otherwise omit this method)
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>  @PreDestroy
  public void dispose() {
    // shutdown bean, free resources if required (otherwise omit this method)
  }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[java-design.asciidoc_layers-communication]]
=== Layers communication

The connection between layers, to access to the functionalities of each one, will be solved using the _dependency injection_ and the JSR330 annotations.

image::images/java/layers_impl.png[, link=&quot;images/java/layers_impl.png&quot;]

*Connection Service - Logic*
[source,java]</pre>
</div>
</div>
<div class="paragraph">
<p>@Named(&quot;DishmanagementRestService&quot;)
public class DishmanagementRestServiceImpl implements DishmanagementRestService {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@Inject
private Dishmanagement dishmanagement;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// use the &apos;this.dishmanagement&apos; object to access to the functionalities of the logic layer of the component</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>...</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>*Connection Logic - Data Access*

[source,java]</pre>
</div>
</div>
<div class="paragraph">
<p>@Named
public class DishmanagementImpl extends AbstractComponentFacade implements Dishmanagement {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@Inject
private DishDao dishDao;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// use the &apos;this.dishDao&apos; to access to the functionalities of the data access layer of the component
...</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[java-design.asciidoc_service-layer]]
== Service layer

The services layer will be solved using REST services with the https://github.com/devonfw/devon4j/wiki/guide-rest#jax-rs[JAX-RS implementation].

To give service to the defined _User Stories_ we will need to implement the following services:

- provide all available dishes.

- save a booking.

- save an order.

- provide a list of bookings (only for waiters) and allow filtering.

- provide a list of orders (only for waiters) and allow filtering.

- login service (see the _Security_ section).

- provide the _current user_ data (see the _Security_ section)


Following the https://github.com/devonfw/devon4j/wiki/guide-rest[naming conventions] proposed for _Devon4j_ applications we will define the following _end points_ for the listed services.

- (POST) `/mythaistar/services/rest/dishmanagement/v1/dish/search`.

- (POST) `/mythaistar/services/rest/bookingmanagement/v1/booking`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order`.

- (POST) `/mythaistar/services/rest/bookingmanagement/v1/booking/search`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order/search`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order/filter` (to filter with fields that does not belong to the Order entity).

- (POST) `/mythaistar/login`.

- (GET) `/mythaistar/services/rest/security/v1/currentuser/`.


You can find all the details for the services implementation in the https://github.com/devonfw/my-thai-star/blob/develop/swagger/mythaistar.yaml[Swagger definition] included in the My Thai Star project on Github.

[[java-design.asciidoc_service-api]]
=== Service api

The _api.rest_ package in the _service_ layer of a _component_ will store the definition of the service by a  _Java interface_. In this definition of the service we will set-up the _endpoints_ of the service, the type of data expected and returned, the _HTTP_ method for each endpoint of the service and other configurations if needed.

[source, java]</pre>
</div>
</div>
<div class="paragraph">
<p>@Path(&quot;/dishmanagement/v1&quot;)
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public interface DishmanagementRestService {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@GET
@Path(&quot;/dish/{id}/&quot;)
public DishCto getDish(@PathParam(&quot;id&quot;) long id);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>...</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[java-design.asciidoc_service-impl]]
=== Service impl

Once the service _api_ is defined we need to implement it using the _Java interface_ as reference. We will add the _service implementation_ class to the _impl.rest_ package and implement the _RestService interface_.

[source, java]</pre>
</div>
</div>
<div class="paragraph">
<p>@Named(&quot;DishmanagementRestService&quot;)
public class DishmanagementRestServiceImpl implements DishmanagementRestService {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@Inject
private Dishmanagement dishmanagement;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public DishCto getDish(long id) {
  return this.dishmanagement.findDish(id);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>...</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[NOTE]
====
You can see the Devon4j conventions for REST services https://github.com/devonfw/devon4j/wiki/guide-rest[here]. And the My Thai Star services definition https://github.com/devonfw/my-thai-star/blob/develop/swagger/mythaistar.yaml[here] as part of the https://github.com/devonfw/my-thai-star[My Thai Star] project.
====

[[java-design.asciidoc_logic-layer]]
== Logic layer

In the _logic_ layer we will locate all the _business logic_ of the application. We will keep the same schema as we have done for the _service_ layer, having an _api_ package with the definition of the methods and a _impl_ package for the implementation.

Also, inside the _api_ package, a _to_ package will be the place to store the https://github.com/devonfw/devon4j/wiki/guide-transferobject[_transfer objects_] needed to pass data through the layers of the component.

image::images/java/logic_layer.png[, link=&quot;images/java/logic_layer.png&quot;]

The logic _api_ definition:
[source, java]</pre>
</div>
</div>
<div class="paragraph">
<p>public interface Dishmanagement {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>DishCto findDish(Long id);</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>  ...
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>The logic _impl_ class:

[source, java]</pre>
</div>
</div>
<div class="paragraph">
<p>@Named
public class DishmanagementImpl extends AbstractComponentFacade implements Dishmanagement {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@Inject
private DishDao dishDao;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Override
public DishCto findDish(Long id) {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>  return getBeanMapper().map(this.dishDao.findOne(id), DishCto.class);
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>...</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>The _BeanMapper_ will provide the needed transformations between _entity_ and _transfer objects_.

Also, the _logic_ layer is the place to add validation for _Authorization_ based on _roles_ as we will see later.

[[java-design.asciidoc_data-access-layer]]
== Data Access layer

The data-access layer is responsible for managing the connections to access and process data. The mapping between java objects to a relational database is done in _Devon4j_ with the https://spring.io/projects/spring-data-jpa[spring-data-jpa].

As in the previous layers, the _data-access_ layer will have both _api_ and _impl_ packages. However, in this case, the implementation will be slightly different. The _api_ package will store the _component_ main _entities and, inside the _api_ package, another _api.repo_ package will store the Repositories. The _repository_ interface will extend `DefaultRepository` interface (located in `com.devonfw.module.jpa.dataaccess.api.data` package of http://repo1.maven.org/maven2/com/devonfw/java/starters/devon4j-starter-spring-data-jpa/3.0.0/[devon4j-starter-spring-data-jpa] ).

For queries we will differentiate between _static queries_ (that will be located in a mapped file) and _dynamic queries_ (implemented with http://www.querydsl.com/[QueryDsl]). You can find all the details about how to manage queries with _Devon4j_ https://github.com/devonfw/devon4j/wiki/guide-jpa-query[here].

The default data base included in the project will be the http://www.h2database.com/html/main.html[H2] instance included with the _Devon4j_ projects.

To get more details about _pagination_, _data base security, _concurrency control_, _inheritance_ or how to solve the different _relationships_ between entities visit the official https://github.com/devonfw/devon4j/wiki/guide-dataaccess-layer[devon4j dataaccess documentation].

[[java-design.asciidoc_security-with-json-web-token]]
== Security with Json Web Token

For the _Authentication_ and _Authorization_ the app will implement the https://jwt.io/[json web token] protocol.

[[java-design.asciidoc_jwt-basics]]
=== Jwt basics

- A user will provide a username / password combination to our auth server.

- The auth server will try to identify the user and, if the credentials match, will issue a token.

- The user will send the token as the _Authorization_ header to access resources on server protected by JWT Authentication.

image::images/java/jwt_schema.png[, link=&quot;images/java/jwt_schema.png&quot;]

[[java-design.asciidoc_jwt-implementation-details]]
=== Jwt implementation details

The _Json Web Token_ pattern will be implemented based on the https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/[_Spring Security_] framework that is provided by default in the _Devon4j_ projects.

[[java-design.asciidoc_authentication]]
==== Authentication

Based on the _Spring Security_ approach, we will implement a class extending _WebSecurityConfigurerAdapter_ (_Devon4j_ already provides the _BaseWebSecurityConfig_ class) to define the security _entry point_ and filters. Also, as _My Thai Star_ is a mainly _public_ application, we will define here the resources that won&apos;t be secured.

List of _unsecured resources_:

- _/services/rest/dishmanagement/**_: to allow anonymous users to see the dishes info in the _menu_ section.
- _/services/rest/ordermanagement/v1/order_: to allow anonymous users to save an order. They will need a _booking token_ but they won&apos;t be authenticated to do this task.
- _/services/rest/bookingmanagement/v1/booking_: to allow anonymous users to create a booking. Only a _booking token_ is necessary to accomplish this task.
- _/services/rest/bookingmanagement/v1/booking/cancel/**_: to allow cancelling a booking from an email. Only the _booking token_ is needed.
- _/services/rest/bookingmanagement/v1/invitedguest/accept/**_: to allow guests to accept an invite. Only a _guest token_ is needed.
- _/services/rest/bookingmanagement/v1/invitedguest/decline/**_: to allow guests to reject an invite. Only a _guest token_ is needed.

To configure the _login_ we will set up the _HttpSecurity_ object in the _configure_ method of the class. We will define a _JWTLoginFilter_ class that will handle the requests to the `/login` _endpoint_.

[source, java]</pre>
</div>
</div>
<div class="paragraph">
<p>http.[&#x2026;&#x200B;].antMatchers(HttpMethod.POST, &quot;/login&quot;).permitAll().[&#x2026;&#x200B;].addFilterBefore(new JWTLoginFilter(&quot;/login&quot;, authenticationManager()), UsernamePasswordAuthenticationFilter.class);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>In the same _HttpSecurity_ object we will set up the filter for the rest of the requests, to check the presence of the JWT token in the header. First we will need to create a _JWTAuthenticationFilter_ class extending the _GenericFilterBean_ class. Then we can add the filter to the _HttpSecurity_ object

[source, java]</pre>
</div>
</div>
<div class="paragraph">
<p>http.[&#x2026;&#x200B;].addFilterBefore(new JWTAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Finally, as default users to start using the _My Thai Star_ app we are going to define two profiles using the _inMemoryAuthentication_ of the _Spring Security_ framework. In the `configure(AuthenticationManagerBuilder auth)` method we will create:

- user: _waiter_
- password: _waiter_
- role: _Waiter_

- user: _user0_
- password: _password_
- role: _Customer_

[source, java]</pre>
</div>
</div>
<div class="paragraph">
<p>auth.inMemoryAuthentication().withUser(&quot;waiter&quot;).password(&quot;waiter&quot;).roles(&quot;Waiter&quot;).and().withUser(&quot;user0&quot;).password(&quot;password&quot;).roles(&quot;Customer&quot;);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[java-design.asciidoc_token-set-up]]
==== Token set up

Following the https://jwt.io/introduction/[official documentation] the implementation details for the MyThaiStar&apos;s jwt will be:

* _Secret_: Used as part of the signature of the token, acting as a private key. For the showcase purposes we will use simply &quot;ThisIsASecret&quot;.

* _Token Prefix_ schema: Bearer. The token will look like `Bearer &lt;token&gt;`

* _Header_: Authorization. The response header where the token will be included. Also, in the requests, when checking the token it will be expected to be in the same header.

* The _Authorization_ header should be part of the `Access-Control-Expose-Headers` header to allow clients access to the _Authorization_ header content (the token);

* The _claims_ are the content of the _payload_ of the token. The _claims_ are statements about the user, so we will include the user info in this section.

  ** _subject_: &quot;sub&quot;. The username.
  ** _issuer_: &quot;iss&quot;. Who creates the token. We could use the _url_ of our service but, as this is a showcase app, we simply will use &quot;MyThaiStarApp&quot;
  ** _expiration date_: &quot;exp&quot;. Defines when the token expires.
  ** _creation date_: &quot;iat&quot;. Defines when the token has been created.
  ** _scope_: &quot;scope&quot;. Array of strings to store the user roles.

* Signature Algorithm: To encrypt the token we will use the default algorithm HS512.

An example of a token claims before encryption would be:

`{sub=waiter, scope=[ROLE_Waiter], iss=MyThaiStarApp, exp=1496920280, iat=1496916680}`


[[java-design.asciidoc_current-user-request]]
==== Current User request

To provide to the client with the current user data our application should expose a service to return the user details. In _Devon4j_ applications the `/general/service/impl/rest/SecurityRestServiceImpl.java` class is ready to do that.

[source, java]</pre>
</div>
</div>
<div class="paragraph">
<p>@Path(&quot;/security/v1&quot;)
@Named(&quot;SecurityRestService&quot;)
public class SecurityRestServiceImpl {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@Produces(MediaType.APPLICATION_JSON)
@GET
@Path(&quot;/currentuser/&quot;)
public UserDetailsClientTo getCurrentUserDetails(@Context HttpServletRequest request) {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>  }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>we only will need to implement the `getCurrentUserDetails` method.

[[java-design.asciidoc_authorization]]
==== Authorization

We need to secure three services, that only should be accessible for users with role _Waiter_:

- (POST) `/mythaistar/services/rest/bookingmanagement/v1/booking/search`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order/search`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order/filter`.


As part of the token we are providing the user _Role_. So, when validating the token, we can obtain that same information and build a `UsernamePasswordAuthenticationToken` with username and the roles as collection of _Granted Authorities_.

Doing so, afterwards, in the implementation class of the _logic_ layer we can set up the related methods with the _java security_ &apos;@RolesAllowed&apos; annotation to block the access to the resource to users that does not match the expected roles.

[source,java]</pre>
</div>
</div>
<div class="paragraph">
<p>@RolesAllowed(Roles.WAITER)
public PaginatedListTo&lt;BookingEto&gt; findBookings(BookingSearchCriteriaTo criteria) {
  return findBookings(criteria);
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 3

:toc:
toc::[]

[[net-design.asciidoc]]
= .NET design

TODO

:leveloffset: 3

:leveloffset: 3

:toc: macro
toc::[]

[[nodejs-design.asciidoc]]
= Node.js design (deprecated)

[[nodejs-design.asciidoc_introduction]]
== Introduction

The Node.js backend for My Thai Star application is going to be based on:

 - *Express.js* as the web application framework
 - *OASP4Fn* as data access layer framework
 - *DynamoDB* as NoSQL Database

To know more details about the above technologies please visit the following documentation:

 - https://expressjs.com[Express.js]
 - https://github.com/oasp/oasp4fn/wiki[OASP4Fn]
 - https://aws.amazon.com/dynamodb/developer-resources/[DynamoDB]

[[nodejs-design.asciidoc_basic-architecture-details]]
== Basic architecture details

This structure can be shown in the following example image:

image::images/nodejs/folder_organization.png[, link=&quot;images/nodejs/folder_organization.png&quot;]

* public - All files which be exposed on the server directly
* src
** database folder - Folder with scripts to create/delete/seed the database
** model - Folder with all data model
** routes - Folder with all Express.js routers
** utils - Folder with all utils like classes and functions
** _app.ts_ - File with Express.js declaration
** _config.ts_ - File with server configs
** _logic.ts_ - File with the business logic
* test - Folder with all tests

[[nodejs-design.asciidoc_layers]]
== Layers

- Service Layer: this layer will expose the REST api to exchange information with the client applications.
- Logic Layer: the layer in charge of hosting the business logic of the application.
- Data Access Layer: the layer to communicate with the data base.

[[nodejs-design.asciidoc_service-layer]]
=== Service layer

The services layer will be solved using REST services with https://expressjs.com[Express.js]

To give service to the defined _User Stories_ we will need to implement the following services:

- provide all available dishes.

- save a booking.

- save an order.

- provide a list of bookings (only for waiters) and allow filtering.

- provide a list of orders (only for waiters) and allow filtering.

- login service (see the _Security_ section).

- provide the _current user_ data (see the _Security_ section)


In order to be compatible with the other backend implementations, we must follow the https://github.com/devonfw/devon4j/wiki/guide-rest[naming conventions] proposed for _Devon4j_ applications. We will define the following _end points_ for the listed services.

- (POST) `/mythaistar/services/rest/dishmanagement/v1/dish/search`.

- (POST) `/mythaistar/services/rest/bookingmanagement/v1/booking`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order`.

- (POST) `/mythaistar/services/rest/bookingmanagement/v1/booking/search`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order/search`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order/filter` (to filter with fields that does not belong to the Order entity).

- (POST) `/mythaistar/login`.

- (GET) `/mythaistar/services/rest/security/v1/currentuser/`.


You can find all the details for the services implementation in the https://github.com/devonfw/my-thai-star/blob/develop/swagger/mythaistar.yaml[Swagger definition] included in the My Thai Star project on Github.

To treat these services separately, the following routers were created:

- bookingmanagement: will answer all requests with the prefix `/mythaistar/services/rest/bookingmanagement/v1`
- dishmanagement: will answer all requests with the prefix `/mythaistar/services/rest/dishmanagement/v1`
- ordermanagement: will answer all requests with the prefix `/mythaistar/services/rest/ordermanagement/v1`

These routers will define the behavior for each service and use the logical layer.

An example of service definition:

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>router.post(&apos;/booking/search&apos;, (req: types.CustomRequest, res: Response) &#x21D2; {
    try {
        // body content must be SearchCriteria
        if (!types.isSearchCriteria(req.body)) {
            throw {code: 400, message: &apos;No booking token given&apos; };
        }</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        // use the searchBooking method defined at business logic
        business.searchBooking(req.body, (err: types.Error | null, bookingEntity: types.PaginatedList) =&gt; {
            if (err) {
                res.status(err.code || 500).json(err.message);
            } else {
                res.json(bookingEntity);
            }
        });
    } catch (err) {
        res.status(err.code || 500).json({ message: err.message });
    }
});</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[nodejs-design.asciidoc_logic-layer-and-data-access-layer]]
=== Logic layer and Data access layer

In the _logic_ layer we will locate all the _business logic_ of the application. It will be located in the file logic.ts. If in this layer we need to get access to the data, we make use of data access layer directly, in this case using OASP4fn with the DynamoDB adapter.

Example:

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>export async function cancelOrder(orderId: string, callback: (err: types.Error | null) &#x21D2; void) {
    let order: dbtypes.Order;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>try {
    // Data access
    order = await oasp4fn.table(&apos;Order&apos;, orderId).promise() as dbtypes.Order;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        [...]
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>We could define the data access layer separately, but oasp4fn allows us to do this in a simple and clear way. So, we decided  to not separate the access layer to the logic business.

[[nodejs-design.asciidoc_security-with-json-web-token]]
== Security with Json Web Token

For the _Authentication_ and _Authorization_ the app will implement the https://jwt.io/[json web token] protocol.

[[nodejs-design.asciidoc_jwt-basics]]
=== Jwt basics

Refer to xref:java-design.asciidoc#jwt-basics[Jwt basiscs] for more information.

[[nodejs-design.asciidoc_jwt-implementation-details]]
=== Jwt implementation details

The _Json Web Token_ pattern will be implemented based on the https://github.com/auth0/node-jsonwebtoken[_JSON web token_] library available on npm.

[[nodejs-design.asciidoc_authentication]]
==== Authentication

Based on the _JSON web token_ approach, we will implement a class _Authentication_ to define the security _entry point_ and filters. Also, as _My Thai Star_ is a mainly _public_ application, we will define here the resources that won&apos;t be secured.

List of _unsecured resources_:

- _/services/rest/dishmanagement/**_: to allow anonymous users to see the dishes info in the _menu_ section.
- _/services/rest/ordermanagement/v1/order_: to allow anonymous users to save an order. They will need a _booking token_ but they won&apos;t be authenticated to do this task.
- _/services/rest/bookingmanagement/v1/booking_: to allow anonymous users to create a booking. Only a _booking token_ is necessary to accomplish this task.
- _/services/rest/bookingmanagement/v1/booking/cancel/**_: to allow cancelling a booking from an email. Only the _booking token_ is needed.
- _/services/rest/bookingmanagement/v1/invitedguest/accept/**_: to allow guests to accept an invite. Only a _guest token_ is needed.
- _/services/rest/bookingmanagement/v1/invitedguest/decline/**_: to allow guests to reject an invite. Only a _guest token_ is needed.

To configure the _login_ we will create an instance of _Authentication_ in the app file and then we will use the method _auth_ for handle the requests to the /login endpoint.

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>app.post(&apos;/mythaistar/login&apos;, auth.auth);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>To verify the presence of the _Authorization token_ in the headers, we will register in the express the _Authentication.registerAuthentication_ middleware. This middleware will check if the token is correct, if so, it will place the user in the request and continue to process it. If the token is not correct it will continue processing the request normally.

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>app.use(auth.registerAuthentication);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Finally, we have two default users created in the database:

- user: _waiter_
- password: _waiter_
- role: _WAITER_

- user: _user0_
- password: _password_
- role: _CUSTOMER_

[[nodejs-design.asciidoc_token-set-up]]
==== Token set up

Following the https://jwt.io/introduction/[official documentation] the implementation details for the MyThaiStar&apos;s jwt will be:

* _Secret_: Used as part of the signature of the token, acting as a private key. It can be modified at config.ts file.

* _Token Prefix_ schema: Bearer. The token will look like `Bearer &lt;token&gt;`

* _Header_: Authorization. The response header where the token will be included. Also, in the requests, when checking the token it will be expected to be in the same header.

* The _Authorization_ header should be part of the `Access-Control-Expose-Headers` header to allow clients access to the _Authorization_ header content (the token);

* Signature Algorithm: To encrypt the token we will use the default algorithm HS512.

[[nodejs-design.asciidoc_current-user-request]]
==== Current User request

To provide to the client with the current user data our application should expose a service to return the user details. In this case the _Authentication_ has a method called _getCurrentUser_ which will return the user data. We only need register it at express.

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>app.get(&apos;/mythaistar/services/rest/security/v1/currentuser&apos;, auth.getCurrentUser);</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[nodejs-design.asciidoc_authorization]]
==== Authorization

We need to secure three services, that only should be accessible for users with role _Waiter_:

- (POST) `/mythaistar/services/rest/bookingmanagement/v1/booking/search`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order/search`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order/filter`.

To ensure this, the _Authorization_ class has the _securizedEndpoint_ method that guarantees access based on the role. This method can be used as middleware in secure services. As the role is included in the token, once validated we will have this information in the request and the middleware can guarantee access or return a 403 error.

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>app.use(&apos;/mythaistar/services/rest/ordermanagement/v1/order/filter&apos;, auth.securizedEndpoint(&apos;WAITER&apos;));
app.use(&apos;/mythaistar/services/rest/ordermanagement/v1/order/search&apos;, auth.securizedEndpoint(&apos;WAITER&apos;));
app.use(&apos;/mythaistar/services/rest/bookingmanagement/v1/booking/search&apos;, auth.securizedEndpoint(&apos;WAITER&apos;));</p>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 3

:toc: macro
toc::[]

[[serverless-design.asciidoc]]
= Serverless design (deprecated)

[[serverless-design.asciidoc_introduction]]
== Introduction

The Node.js backend for My Thai Star application is going to be based on:

 - *Serverless* as serverless framework
 - *OASP4Fn* as data access layer framework
 - *DynamoDB* as NoSQL Database

To know more details about the above technologies please visit the following documentation:

 - https://serverless.com/[Serverless]
 - https://github.com/oasp/oasp4fn/wiki[OASP4Fn]
 - https://aws.amazon.com/dynamodb/developer-resources/[DynamoDB]

[[serverless-design.asciidoc_basic-architecture-details]]
== Basic architecture details

This structure can be shown in the following example image:

image::images/serverless/folder_organization.png[, link=&quot;images/serverless/folder_organization.png&quot;]

* handlers - All function handlers following oasp4fn structure
* src
** model - Folder with all data model
** utils - Folder with all utils like classes and functions
** _config.ts_ - File with server configs
** _logic.ts_ - File with the business logic
* test - Folder with all tests

[[serverless-design.asciidoc_layers]]
== Layers

- Service Layer: this layer will expose the REST api to exchange information with the client applications.
- Logic Layer: the layer in charge of hosting the business logic of the application.
- Data Access Layer: the layer to communicate with the data base.

[[serverless-design.asciidoc_service-layer]]
=== Service layer

The services layer will be solved using REST services with https://serverless.com/[Serverless]

To give service to the defined _User Stories_ we will need to implement the following services:

- provide all available dishes.

- save a booking.

- save an order.

- provide a list of bookings (only for waiters) and allow filtering.

- provide a list of orders (only for waiters) and allow filtering.

- login service (see the _Security_ section).

- provide the _current user_ data (see the _Security_ section)


In order to be compatible with the other backend implementations, we must follow the https://github.com/devonfw/devon4j/wiki/guide-rest[naming conventions] proposed for _Devon4j_ applications. We will define the following _end points_ for the listed services.

- (POST) `/mythaistar/services/rest/dishmanagement/v1/dish/search`.

- (POST) `/mythaistar/services/rest/bookingmanagement/v1/booking`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order`.

- (POST) `/mythaistar/services/rest/bookingmanagement/v1/booking/search`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order/search`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order/filter` (to filter with fields that does not belong to the Order entity).

- (POST) `/mythaistar/login`.

- (GET) `/mythaistar/services/rest/security/v1/currentuser/`.


You can find all the details for the services implementation in the https://github.com/oasp/my-thai-star/blob/develop/swagger/mythaistar.yaml[Swagger definition] included in the My Thai Star project on Github.

To treat these http services, we must define the handlers following the https://github.com/oasp/oasp4fn/wiki/Structure[oasp4fn convention]:

- (handlers/Http/POST/dish-search-handler) `/mythaistar/services/rest/dishmanagement/v1/dish/search`.

- (handlers/Http/POST/booking-handler) `/mythaistar/services/rest/bookingmanagement/v1/booking`.

- (handlers/Http/POST/order-handler) `/mythaistar/services/rest/ordermanagement/v1/order`.

- (handlers/Http/POST/booking-search-handler) `/mythaistar/services/rest/bookingmanagement/v1/booking/search`.

- (handlers/Http/POST/order-search-handler) `/mythaistar/services/rest/ordermanagement/v1/order/search`.

- (handlers/Http/POST/order-filter-handler) `/mythaistar/services/rest/ordermanagement/v1/order/filter` (to filter with fields that does not belong to the Order entity).

- (handlers/Http/POST/login-handler) `/mythaistar/login`.

- (handlers/Http/GET/current-user-handler) `/mythaistar/services/rest/security/v1/currentuser/`.

These handlers will define the behavior for each service and use the logical layer.

An example of handler definition:

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>oasp4fn.config({ path: &apos;/mythaistar/services/rest/bookingmanagement/v1/booking/search&apos; });
export async function bookingSearch(event: HttpEvent, context: Context, callback: Function) {
    try {
        const search = &lt;types.SearchCriteria&gt;event.body;
        const authToken = event.headers.Authorization;
        // falta lo que viene siendo comprobar el token y eso</p>
</div>
<div class="literalblock">
<div class="content">
<pre>auth.decode(authToken, (err, decoded) =&gt; {
    if (err || decoded.role !== &apos;WAITER&apos;) {
        throw { code: 403, message: &apos;Forbidden&apos;};
    }</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// body content must be SearchCriteria
if (!types.isSearchCriteria(search)) {
    throw { code: 400, message: &apos;No booking token given&apos; };
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>            business.searchBooking(search, (err: types.Error | null, bookingEntity: types.PaginatedList) =&gt; {
                if (err) {
                    callback(new Error(`[${err.code || 500}] ${err.message}`));
                } else {
                    callback(null, bookingEntity);
                }
            });
        });
    } catch (err) {
        callback(new Error(`[${err.code || 500}] ${err.message}`));
    }
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>The default integration for a handler is _lambda_. See https://github.com/oasp/oasp4fn/wiki/Configuration[oasp documentation] for more information about default values and how to change it.
[NOTE]
====
If you change the integration to lambda-proxy, you must take care that in this case the data will not be parsed. You must do JSON.parse explicitly
====

After defining all the handlers, we must execute the _fun_ command, which will generate the files serverless.yml and webpack.config.js.

[[serverless-design.asciidoc_logic-layer-and-data-access-layer]]
=== Logic layer and Data access layer

xref:nodejs-design.asciidoc#logic-layer-and-data-access-layer[See in nodejs section]

[[serverless-design.asciidoc_security-with-json-web-token]]
== Security with Json Web Token

For the _Authentication_ and _Authorization_ the app will implement the https://jwt.io/[json web token] protocol.

[[serverless-design.asciidoc_jwt-basics]]
=== Jwt basics

Refer to xref:java-design.asciidoc#jwt-basics[Jwt basiscs] for more information.

[[serverless-design.asciidoc_jwt-implementation-details]]
=== Jwt implementation details

The _Json Web Token_ pattern will be implemented based on the https://github.com/auth0/node-jsonwebtoken[_JSON web token_] library available on npm.

[[serverless-design.asciidoc_authentication]]
==== Authentication

Based on the _JSON web token_ approach, we will implement two methods in order to verify and user + generate the token and decode the token + return the user data. Also, as _My Thai Star_ is a mainly _public_ application, we will define here the resources that won&apos;t be secured.

List of _unsecured resources_:

- _/services/rest/dishmanagement/**_: to allow anonymous users to see the dishes info in the _menu_ section.
- _/services/rest/ordermanagement/v1/order_: to allow anonymous users to save an order. They will need a _booking token_ but they won&apos;t be authenticated to do this task.
- _/services/rest/bookingmanagement/v1/booking_: to allow anonymous users to create a booking. Only a _booking token_ is necessary to accomplish this task.
- _/services/rest/bookingmanagement/v1/booking/cancel/**_: to allow cancelling a booking from an email. Only the _booking token_ is needed.
- _/services/rest/bookingmanagement/v1/invitedguest/accept/**_: to allow guests to accept an invite. Only a _guest token_ is needed.
- _/services/rest/bookingmanagement/v1/invitedguest/decline/**_: to allow guests to reject an invite. Only a _guest token_ is needed.

To configure the _login_ we will create a handler called login and then we will use the method _code_ to verify the user and generate the token.

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>app.post(oasp4fn.config({ integration: &apos;lambda-proxy&apos;, path: &apos;/mythaistar/login&apos; });
export async function login(event: HttpEvent, context: Context, callback: Function) {
.
.
.
.
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>We have two default users created in the database:

- user: _waiter_
- password: _waiter_
- role: _WAITER_

- user: _user0_
- password: _password_
- role: _CUSTOMER_

[[serverless-design.asciidoc_token-set-up]]
==== Token set up

xref:nodejs-design.asciidoc#token-set-up[See in nodejs section]

[[serverless-design.asciidoc_current-user-request]]
==== Current User request

To provide the client with the current user data our application should expose a service to return the user details. In order to do this, we must define a handler called current-user-handler. This handler must decode the _Authorization token_ and return the user data.

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>oasp4fn.config({
    path: &apos;/mythaistar/services/rest/security/v1/currentuser&apos;,
});
export async function currentUser(event: HttpEvent, context: Context, callback: Function) {
    let authToken = event.headers.Authorization;
    try {
        auth.decode(authToken, (err: any, decoded?: any) &#x21D2; {
            if (err) {
                callback(new Error(<code>[403] Forbidden</code>));
            } else {
                callback(null, decoded);
            }
        });
    } catch (err) {
        callback(new Error(<code>[${err.code || 500}] ${err.message}</code>));
    }
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[serverless-design.asciidoc_authorization]]
==== Authorization

We need to secure three services, that only should be accessible for users with role _Waiter_:

- (POST) `/mythaistar/services/rest/bookingmanagement/v1/booking/search`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order/search`.

- (POST) `/mythaistar/services/rest/ordermanagement/v1/order/filter`.

To ensure this, we must decode the _Authorization token_ and check the result. As the role is included in the token, once validated we will have this information and can guarantee access or return a 403 error.

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>oasp4fn.config({ path: &apos;/mythaistar/services/rest/bookingmanagement/v1/booking/search&apos; });
export async function bookingSearch(event: HttpEvent, context: Context, callback: Function) {
    const authToken = event.headers.Authorization;
    auth.decode(authToken, (err, decoded) &#x21D2; {
        try {
            if (err || decoded.role !== &apos;WAITER&apos;) {
                throw { code: 403, message: &apos;Forbidden&apos; };
            }</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[...]</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>        } catch (err) {
            callback(new Error(`[${err.code || 500}] ${err.message}`));
        }
    });
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 3

:toc:
toc::[]

[[graphql-design.asciidoc]]
= GraphQL design

TODO

:leveloffset: 3

[[master-my-thai-star.asciidoc_client-side]]
=== Client Side

:leveloffset: 3

:toc: macro
toc::[]

[[angular-design.asciidoc]]
= Angular design

[[angular-design.asciidoc_introduction]]
== Introduction
MyThaiStar client side has been built using latest frameworks, component libraries and designs:

*Angular* _4_ as main front-end Framework. https://angular.io/

*Angular/CLI* _1.0.5_ as Angular tool helper. https://github.com/angular/angular-cli

*Covalent Teradata* _1.0.0-beta4_ as Angular native component library based on Material Design. https://teradata.github.io/covalent/#/

*Angular/Material2* _1.0.0-beta5_ used by Covalent Teradata. https://github.com/angular/material2

_Note: this dependencies are evolving at this moment and if it is possible, we are updating it on the project._

[[angular-design.asciidoc_basic-project-structure]]
== Basic project structure

The project is using the basic project seed that Angular/CLI provides with &#x201C;ng new &lt;project name&gt;&#x201D;. Then the app folder has been organized as Angular recommends and goes as follows:

* app
** components
*** sub-components
*** shared
*** component files
** main app component
* assets folder
* environments folder
* rest of angular files

This structure can be shown in the following example image:

image::images/angular/folder_organization.png[, link=&quot;images/angular/folder_organization.png&quot;]

[[angular-design.asciidoc_main-views-and-components]]
== Main Views and components
List of components that serve as a main view to navigate or components developed to make atomically a group of functionalities which given their nature, can be highly reusable through the app.

image::images/angular/routes.png[, link=&quot;images/angular/routes.png&quot;]

_Note: no-name-route corresponds to whatever URL the user introduced and does not exist, it redirects to HomeComponent._

[[angular-design.asciidoc_public-area]]
=== Public area
[[angular-design.asciidoc_appcomponent]]
==== AppComponent
Contains the components that are on top of all views, including:

[[angular-design.asciidoc_order-sidenav]]
===== Order sidenav
Sidenav where selected orders are displayed with their total price and some comments.

[[angular-design.asciidoc_navigation-sidenav-only-for-mobile]]
===== Navigation sidenav (only for mobile)
This sidenav proposal is to let user navigate through the app when the screen is too small to show the navigation buttons on the header.

[[angular-design.asciidoc_header]]
===== Header
It contains the title, and some other basic functions regarding open and close sidenavs.

[[angular-design.asciidoc_footer-only-for-desktop]]
===== Footer (only for desktop)
At the end of the page that shows only when open on desktop.

[[angular-design.asciidoc_homecomponent]]
==== HomeComponent
Main view that shows up when the app initializes.

[[angular-design.asciidoc_menucomponent]]
==== MenuComponent
View where the users can view, filter and select the dishes (with their extras) they want to order it contains a component to each menu entry:

[[angular-design.asciidoc_menu-card]]
===== Menu-card
This component composes all the data of a dish in a card. Component made to display indeterminate number of dishes easily.

[[angular-design.asciidoc_booktablecomponent]]
==== BookTableComponent
View to make book a table in a given data with a given number of assistants or create a reservation with a number of invitations via email.

[[angular-design.asciidoc_book-table-dialog]]
===== Book-table-dialog
Dialog which opens as a result of fulfilling the booking form, it displays all the data of the booking attempt, if everything is correct, the user can send the information or cancel if something is wrong.

[[angular-design.asciidoc_invitation-dialog]]
===== Invitation-dialog
Dialog which opens as a result of fulfilling the invitation form, it displays all the data of the booking with friends attempt, if everything is correct, the user can send the information or cancel if something is wrong.

[[angular-design.asciidoc_userarea]]
==== UserArea
Group of dialogs with the proposal of giving some functionalities to the user, as login, register, change password or connect with Twitter.

[[angular-design.asciidoc_login-dialog]]
===== Login-dialog
Dialog with a tab to navigate between login and register.

[[angular-design.asciidoc_password-dialog]]
===== Password-dialog
Functionality reserved to already logged users, in this dialog the user can change freely their password.

[[angular-design.asciidoc_twitter-dialog]]
===== Twitter-dialog
Dialog designed specifically to connect your user account with Twitter.

[[angular-design.asciidoc_waiter-cockpit-area]]
=== Waiter cockpit area
Restricted area to workers of the restaurant, here we can see all information about booked tables with the selected orders and the reservations with all the guests and their acceptance or decline of the event.

[[angular-design.asciidoc_ordercockpitcomponent]]
==== OrderCockpitComponent
Data table with all the booked tables and a filter to search them, to show more info about that table you can click on it and open a dialog.

[[angular-design.asciidoc_order-dialog]]
===== Order-dialog
Complete display of data regarding the selected table and its orders.

[[angular-design.asciidoc_reservationcockpitcomponent]]
==== ReservationCockpitComponent
Data table with all the reservations and a filter to search them, to show more info about that table you can click on it and open a dialog.

[[angular-design.asciidoc_reservation-dialog]]
===== Reservation-dialog
Complete display of data regarding the selected table and its guests.

[[angular-design.asciidoc_email-management]]
=== Email Management
As the application send emails to both guests and hosts, we choose an approach based on URL&#x2019;s where the email contain a button with an URL to a service in the app and a token, front-end read that token and depending on the URL, will redirect to one service or another. For example:
[source]</pre>
</div>
</div>
<div class="paragraph">
<p><a href="http://localhost:4200/booking/cancel/CB_20170605_8fb5bc4c84a1c5049da1f6beb1968afc" class="bare">http://localhost:4200/booking/cancel/CB_20170605_8fb5bc4c84a1c5049da1f6beb1968afc</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre>This URL will tell the app that is a cancellation of a booking with the token _CB_20170605_8fb5bc4c84a1c5049da1f6beb1968afc_. The app will process this information, send it to back-end with the correct headers, show the confirmation of the event and redirect to home page.

The main cases at the moment are:

[[angular-design.asciidoc_accept-invite]]
==== Accept Invite
A guest accept an invitation sent by a host. It will receive another email to decline if it change its mind later on.

[[angular-design.asciidoc_reject-invite]]
==== Reject Invite
A guest decline the invitation.

[[angular-design.asciidoc_cancel-reservation]]
==== Cancel Reservation
A host cancel the reservation, everybody that has accepted or not already answered will receive an email notifying this event is canceled. Also all the orders related to this reservations will be removed.

[[angular-design.asciidoc_cancel-orders]]
==== Cancel Orders
When you have a reservation, you will be assigned to a token, with that token you can save your order in the restaurant. When sent, you will receive an email confirming the order and the possibility to remove it.

[[angular-design.asciidoc_services-and-directives]]
== Services and directives
Services are where all the main logic between components of that view should be. This includes calling a remote server, composing objects, calculate prices, etc.

Directives are a single functionality that are related to a component.

As it can be seen in the basic structure, every view that has a minimum of logic or need to call a server has its own service located in the shared folder.

Also, services and directives can be created to compose a reusable piece of code that will be reused in some parts of the code:

[[angular-design.asciidoc_price-calculator-service]]
=== Price-calculator-service
This service located in the shared folder of sidenav contains the basic logic to calculate the price of a single order (with all the possibilities) and to calculate the price of a full list of orders for a table. As this is used in the sidenav and in the waiter cockpit, it has been exported as a service to be imported where needed and easily testable.

[[angular-design.asciidoc_authentication]]
=== Authentication
Authentication services serves as a validator of roles and login and, at the same time, stores the basic data regarding security and authentication.

Main task of this services is to provide visibility at app level of the current user information:

* Check if the user is logged or not.
* Check the permissions of the current user.
* Store the username and the JWT token.

[[angular-design.asciidoc_snackservice]]
=== SnackService
Service created to serve as a factory of Angular Material Snackbars, which are used commonly through the app. This service accepts some parameters to customize the snackBar and opens it with this parameters.

[[angular-design.asciidoc_windowservice]]
=== WindowService
For responsiveness reasons, the dialogs have to accept a width parameter to adjust to screen width and this information is given by Window object, as it is a good practice to have it in an isolated service, which also calculates the width percentage to apply on the dialogs.

[[angular-design.asciidoc_equal-validator-directive]]
=== Equal-validator-directive
This directive located in the shared folder of userArea is used in 2 fields to make sure they have the same value. This directive is used in confirm password fields in register and change password.

[[angular-design.asciidoc_mock-backend]]
== Mock Backend

To develop meanwhile a real back-end is being developed let us to make a more realistic application and to make easier the adaptation when the backend is able to be connected and called. Its structure is as following:

image::images/angular/back-end.png[, link=&quot;images/angular/back-end.png&quot;]

Contains the three main groups of functionalities in the application. Every group is composed by:

* An *interface* with all the methods to implement.
* A *service* that implements that interface, the main task of this service is to choose between real backend and mock backend depending on an environment variable.
* *Mock backend service* which implements all the methods declared in the interface using mock data stored in a local file and mainly uses Lodash to operate the arrays.
* *Real backend service* works as Mock backend but in this case the methods call for server rest services through http.

[[angular-design.asciidoc_booking]]
=== Booking
The booking group of functionalities manages the calls to reserve a table with a given time and assistants or with guests, get reservations filtered, accept or decline invitations or cancel the reservation.

[[angular-design.asciidoc_orders]]
=== Orders
Management of the orders, including saving, filtering and cancel an order.

[[angular-design.asciidoc_dishes]]
=== Dishes
The dishes group of functionalities manages the calls to get and filter dishes.

[[angular-design.asciidoc_login]]
=== Login
Login manages the userArea logic: login, register and change password.

[[angular-design.asciidoc_security]]
== Security

My Thai Star security is composed by two main security services:

[[angular-design.asciidoc_auth-guard]]
=== Auth-guard

Front-end security approach, this service implements an interface called CanActivate that comes from angular/router module. CanActivate interface forces you to implement a canActivate() function which returns a Boolean.
This service checks with the AuthService stored data if the user is logged and if he has enough permission to access the waiter cockpit. This prevents that a forbidden user could access to waiter cockpit just by editing the URL in the browser.

[[angular-design.asciidoc_jwt]]
=== JWT

JSON Web Token consists of a token that is generated by the server when the user logs in. Once provided, the token has to be included in an Authentication header on every Http call to the rest service, otherwise the call will be forbidden.
JWT also has an expiration date and a role checking, so if a user has not enough permissions or keeps logged for a long certain amount of time that exceeds this expiration date, the next time he calls for a service call, the server will return an error and forbid the call. You can log again to restore the token.

[[angular-design.asciidoc_httpclient]]
==== HttpClient

To implement this Authorization header management, an HttpClient service has been implemented.
This services works as an envelope of Http, providing some more functionalities, likes a header management and an automatically management of a server token error in case the JWT has expired, corrupted or not permitted.


:leveloffset: 3

:leveloffset: 3

:toc:
toc::[]

[[xamarin-design.asciidoc]]
= Xamarin design

TODO

:leveloffset: 3

[[master-my-thai-star.asciidoc_security]]
== Security

:leveloffset: 2

:toc: macro
toc::[]

[[twofactor.asciidoc]]
= Two-Factor Authentication

Two-factor Authentication (2FA) provides an additional level of security to your account. Once enabled, in addition to supplying your username and password to login, you&#x2019;ll be prompted for a code generated by your Google authenticator. For example, a password manager on one of your devices.

By enabling 2FA, to log into your account an additional one-time password is required what requires access to your paired device. This massively increases the barrier for an attacker to break into your account.

[[twofactor.asciidoc_backend-mechanism]]
=== Backend mechanism
In the backend, we utilize Spring Security for any authentication.
Following the arrows, one can see all processes regarding authentication. The main idea is to check all credentials depending on their 2FA status and then either grand access to the specific user or deny access. This picture illustrates a normal authentication with username and password.

image::images/security/security_cross_component.png[, ]

When dealing with 2FA, another provider and filter is handling the request from */verify*

image::images/security/security_cross_component_twofactor.png[, ]

Here you can observe which filter will be used.
*JWTAuthenticationFilter* does intercept any request, which enforces being authenticated via JWT

image::images/security/filters_png.png[, ]

NOTE: Whenever the secret or qr code gets transferred between two parties, one must enforce link:https://tools.ietf.org/html/rfc5246[SSL/TLS] or link:https://tools.ietf.org/html/rfc4301[IPsec] to be comply with https://tools.ietf.org/html/rfc6238#page-5[RFC 6238].


[[twofactor.asciidoc_activating-two-factor-authentication]]
=== Activating Two-Factor Authentication

In the current state, https://en.wikipedia.org/wiki/Time-based_One-time_Password_algorithm[TOTP]
will be used for OTP generation. For this purpose we recommend the *Google Authenticator* or any TOTP generator out there.

* Login with your account
* Open the 2FA settings
* Activate the 2FA Status
* Initialize your device with either a *QR-Code* or a *secret*

[[twofactor.asciidoc_frontend]]
=== Frontend
These are the two main options, which you can obtain my toggling between *QR-Code* and *secret*.

image::images/security/2FA_qr_code_menu.png[, ]

image::images/security/2FA_secret_menu.png[, ]

After an activation and logout. This prompt will ask you to enter the OTP given from your device.

image::images/security/otp_prompt.png[, ]

:leveloffset: 3

[[master-my-thai-star.asciidoc_testing]]
== Testing

[[master-my-thai-star.asciidoc_server-side]]
=== Server Side

:leveloffset: 3

:toc: macro
toc::[]

[[java-testing.asciidoc]]
= Java testing

[[java-testing.asciidoc_component-testing]]
== Component testing

We are going to test our components as a unit using _Spring Test_ and _Devon4j-test_ modules.

In order to test a basic component of the app first we will create a test class in the `src/test/java` folder and inside the main package of the test module. We will name the class following the convention.</pre>
</div>
</div>
<div class="paragraph">
<p>[Component]Test</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Then, in the declaration of the test class, we will use the `@SpringBootTest` annotation to run the application context. In addition, we will extend the `ComponentTest` from `Devon4j-test` module to have access to the main functionalities of the module, https://github.com/devonfw/devon4j/wiki/guide-testing[see more details here].

_Spring Test_ allows us to use _Dependency Injection_ so we can inject our component directly using the `@Inject` annotation.

Each test will be represented by a method annotated with `@Test`. Inside the method we will test one functionality, evaluating the result thanks to the _asserts_ provided by the _ComponentTest_ class that we are extending.

A simple test example

[source,java]</pre>
</div>
</div>
<div class="paragraph">
<p>@SpringBootTest(classes = SpringBootApp.class)
public class DishmanagementTest extends ComponentTest {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@Inject
private Dishmanagement dishmanagement;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>@Test
public void findAllDishes() {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>  PaginatedListTo&lt;DishCto&gt; result = this.dishmanagement.findDishes();
  assertThat(result).isNotNull();
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>  ...
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[java-testing.asciidoc_running-the-tests]]
== Running the tests

[[java-testing.asciidoc_from-eclipse]]
=== From Eclipse

We can run the test from within _Eclipse_ with the contextual menu _Run As &gt; JUnit Test_. This functionality can be launched from method level, class level or even package level. The results will be shown in the _JUnit_ tab.

image::images/java/test_results_eclipse.PNG[, link=&quot;images/java/test_results_eclipse.PNG&quot;]

[[java-testing.asciidoc_from-command-line-using-maven]]
=== From command line using Maven

We can also run tests using _Maven_ and the command line, using the command _mvn test_ (or _mvn clean test_).</pre>
</div>
</div>
<div class="paragraph">
<p>C:\MyThaiStar&gt;mvn clean test</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Doing this we will run all the tests of the project (recognized by the _Test_ word at the end of the classes) and the results will be shown by sub-project.</pre>
</div>
</div>
<div class="paragraph">
<p>&#x2026;&#x200B;</p>
</div>
<div class="paragraph">
<p>Results :</p>
</div>
<div class="paragraph">
<p>Tests run: 11, Failures: 0, Errors: 0, Skipped: 1</p>
</div>
<div class="paragraph">
<p>&#x2026;&#x200B;</p>
</div>
<div class="paragraph">
<p>[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ mtsj-server ---
[INFO] No sources to compile</p>
</div>
<div class="paragraph">
<p>[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ mtsj-server ---
[INFO] No tests to run.
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:</p>
</div>
<div class="paragraph">
<p>[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 02:35 min
[INFO] Finished at: 20XX-07-17T09:30:13+02:00
[INFO] Final Memory: 39M/193M
[INFO] ------------------------------------------------------------------------</p>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 3

:toc:
toc::[]

[[net-testing.asciidoc]]
= .NET testing

TODO

:leveloffset: 3

:leveloffset: 3

:toc:
toc::[]

[[nodejs-testing.asciidoc]]
= Node.js testing

TODO

:leveloffset: 3

:leveloffset: 3

:toc:
toc::[]

[[graphql-testing.asciidoc]]
= GraphQL testing

TODO

:leveloffset: 3

[[master-my-thai-star.asciidoc_client-side]]
=== Client Side

:leveloffset: 3

:toc: macro
toc::[]

[[angular-testing.asciidoc]]
= Angular testing

image::images/angular/testing.JPG[, link=&quot;images/angular/testing.JPG&quot;]

MyThaiStar testing is made using Angular default testing environment and syntax language: https://karma-runner.github.io/1.0/index.html[*Karma*] and https://jasmine.github.io/[*Jasmine*]

To test an element of the application, you indicate that tests are a special type of files with the extension *.spec.ts*, then, in MyThaiStar angular/CLI config you can notice that there is an array with only one entry, Karma, with at the same time has one entry to Karma.config.js.

In the configuration of Karma we indicate which syntax language we are going to use (currently Jasmine as said before) between some other configurations, it is remarkable the last one: _browsers_. By default, the only available browser is chrome, that is because Karma works opening a chrome view to run all the tests, in that same window, Karma shows the result or errors of the test run. But we can add some other browser to adjust to our necessities, for example, in some automatic processes that run from console, it is not an option to open a chrome window, in that case, MyThaiStar used PhantomJS and ChromeHeadless.

Taking all of this into account, to run the test in MyThaiStar we need to move to project root folder and run this command : `ng test --browser &lt;browser&gt;`

[NOTE]
====
If you run just `ng test` it will run the three browser options *simultaneously*, giving as a result three test runs and outputs, it can cause timeouts and unwanted behaviors, if you want a shortcut to run the test with chrome window you can just run `yarn test` so we really encourage to *not use* just `ng test`.
====

Here we are going to see how Client side testing of MyThaiStar has been done.

[[angular-testing.asciidoc_testing-components]]
== Testing Components
Angular components were created using angular/CLI `ng create component` so they already come with an spec file to test them. The only thing left to do is to add the providers and imports needed in the component to work as the component itself, once this is done, the most basic test is to be sure that all the dependencies and the component itself can be correctly created.

As an example, this is the _spec.ts_ of the menu view component:

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>all the imports&#x2026;&#x200B;</p>
</div>
<div class="paragraph">
<p>describe(&apos;MenuComponent&apos;, () &#x21D2; {
  let component: MenuComponent;
  let fixture: ComponentFixture&lt;MenuComponent&gt;;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>beforeEach(async(() =&gt; {
  TestBed.configureTestingModule({
    declarations: [ MenuComponent, MenuCardComponent ],
    providers: [SidenavService, MenuService, SnackBarService],
    imports: [
      BrowserAnimationsModule,
      BackendModule.forRoot({environmentType: 0, restServiceRoot: &apos;v1&apos;}),
      CovalentModule,
    ],
  })
  .compileComponents();
}));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>beforeEach(() =&gt; {
  fixture = TestBed.createComponent(MenuComponent);
  component = fixture.componentInstance;
  fixture.detectChanges();
});</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>  it(&apos;should create&apos;, () =&gt; {
    expect(component).toBeTruthy();
  });
});</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>First we declare the component to be tested and a Fixture object, then, we configure the testingModule right in the same way we could configure the MenuModule with the difference here that tests always have to use the mockBackend because we do not want to really depend on a server to test our components.

Once configured the test module, we have to prepare the context of the test, in this case we create the component, that is exactly what is going on in the `beforeEach()` function.

Finally, we are ready to use the component and it&apos;s fixture to check if the component has bee correctly created.

At this moment this is the case for most of the components, in the future, some work would be applied on this matter to have a full testing experience in MyThaiStar components.

[[angular-testing.asciidoc_dialog-components]]
=== Dialog components

Dialog components are in a special category because they can not be tested normally. In the way Material implements the opening of dialogs, you have to create a component that will load into a dialog, to tell the module to load this components when needed, they have to be added into a special array category: _EntryComponents_. So, to test them, we need to import them in the test file as well.

Also, the testing code to open the component is a bit different too:

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>&#x2026;&#x200B;
  beforeEach(() &#x21D2; {
    dialog = TestBed.get(MdDialog);
    component = dialog.open(CommentDialogComponent).componentInstance;
  });
&#x2026;&#x200B;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>That is right, the `beforeEach()` function is slightly different from the the example above, in this case we have to force to the test to know that the component is only displayed in a dialog, so we have to open a dialog with this component in order to access it.

[[angular-testing.asciidoc_testing-services]]
== Testing Services

As well as components, services can be tested too, actually, they are even more necessary to be tested because they have inside more complex logic and data management.

As an example of testing services i am going to use a well done services, with a specific purpose and with its logic completely tested, the price-calculator service:

[source, javascript]</pre>
</div>
</div>
<div class="paragraph">
<p>&#x2026;&#x200B;</p>
</div>
<div class="paragraph">
<p>describe(&apos;PriceCalculatorService&apos;, () &#x21D2; {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>beforeEach(() =&gt; {
  TestBed.configureTestingModule({
    providers: [PriceCalculatorService],
  });
});</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>it(&apos;should be properly injected&apos;, inject([PriceCalculatorService], (service: PriceCalculatorService) =&gt; {
  expect(service).toBeTruthy();
}));</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>describe(&apos;check getPrice method&apos;, () =&gt; {</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>it(&apos;should calculate price for single order without extras&apos;, inject([PriceCalculatorService], (service: PriceCalculatorService) =&gt; {
  const order: OrderView = {
    dish: {
      id: 0,
      price: 12.50,
      name: &apos;Order without extras&apos;,
    },
    orderLine: {
      comment: &apos;&apos;,
      amount: 1,
    },
    extras: [],
  };</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>      expect(service.getPrice(order)).toEqual(order.dish.price);
    }));
...</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>In services test, we have to inject the service in order to use it, then we can define some initializing contexts to test if the functions of the services returns the expected values, in the example we can see how an imaginary order is created and expected the function `getPrice()` to correctly calculate the price of that order.

In this same test file you can find some more test regarding all the possibilities of use in that services: orders with and without extras, single order, multiple orders and so on.

Some services as well as the components have only tested that they are correctly created and they dependencies properly injected, in the future, will be full covering regarding this services test coverage.

[[angular-testing.asciidoc_testing-in-a-ci-environment]]
== Testing in a CI environment


:leveloffset: 3

:leveloffset: 3

:toc:
toc::[]

[[xamarin-testing.asciidoc]]
= Xamarin testing

TODO

:leveloffset: 3

[[master-my-thai-star.asciidoc_end-to-end]]
=== End to end

:leveloffset: 3

:toc: macro
toc::[]

[[mrchecker.asciidoc]]
= MrChecker E2E Testing

[[mrchecker.asciidoc_introduction]]
== Introduction
MrChecker is a testing framework included in devonfw with several useful modules, from which we will focus on the Selenium Module, a module designed to make end-to-end testing easier to implement.

[[mrchecker.asciidoc_how-to-use-it]]
== How to use it

First of all download the repository.

You must run My Thai Star frontend and backend application and modify your url to the front in `mrchecker/endtoend-test/src/resources/settings.properties`

Now you can run end to end test to *check* if the application works properly.

To run the e2e test you have two options:

*The first option is using the command line in devonfw distribution*
```
cd mrchecker/endtoend-test/
mvn test -Dtest=MyThaiStarTest -Dbrowser=Chrome

```
optionally you can use it with a headless version or using another navigator:
```
// chrome headless (without visual component)
mvn test -Dtest=MyThaiStarTest -Dbrowser=ChromeHeadless
// use firefox navigator
mvn test -Dtest=MyThaiStarTest -Dbrowser=FireFox
```

*The second is importing the project in devonfw Eclipse and running _MyThaiStarTest.java_ as JUnit (right click, run as JUnit)*

They can be executed one by one or all in one go, comment or uncomment _@Test_ before those tests to enable or disable them.

For more information about how to use MrChecker and build your own end to end test read:
 * MrChecker documentation
 * MrChecker tutorial for My Thai Star



[[mrchecker.asciidoc_end-to-end-tests-in-my-thai-star]]
== End to end tests in My Thai Star

We have included a test suite with four tests to run in My Thai Star to verify everything works properly.

The included tests do the following:

* _Test_loginAndLogOut_: Log in and log out.

* _Test_loginFake_: Attempt to log in with a fake user.

* _Test_bookTable_: Log in and book a table, then login with a waiter and check if the table was successfully booked.

* _Test_orderMenu_: Log in and order food for a certain booked table.

These four tests can be found inside *MyThaiStarTest.java* located link:https://github.com/devonfw/my-thai-star/tree/develop/mrchecker/endtoend-test/src/test/java/com/devonfw/mts/tests[here].




:leveloffset: 3

[[master-my-thai-star.asciidoc_ui-design]]
== UI design

:leveloffset: 2

:toc:
toc::[]

[[style-guide.asciidoc]]
= Style guide

image::images/mts_styleguide.png[, link=&quot;images/mts_styleguide.png&quot;]

[[style-guide.asciidoc]]
= Low and high fidelity wireframes

History of mockup designs for My Thai Star.

* xref:resources/MTS_Wireframes_Low_Fidelity.pdf[MTS Wireframes Low Fidelity]
* xref:resources/MTS_Wireframes_High_Fidelity_(Sprint_1).pdf[MTS Wireframes High Fidelity (Sprint 1)]
* xref:resources/MTS_Wireframes_High_Fidelity_(Sprint_1)-Copy.pdf[MTS Wireframes High Fidelity (Sprint 1) - Copy]
* xref:resources/MTS_Wireframes_High_Fidelity_(Sprint_1)-Mobile.pdf[MTS Wireframes High Fidelity (Sprint 1) - Mobile]
* xref:resources/MTS_Wireframes_High_Fidelity_(Sprint_2).pdf[MTS Wireframes High Fidelity (Sprint 2)]
* xref:resources/MTS_Wireframes_High_Fidelity_(Sprint_2)-Modifications.pdf[MTS Wireframes High Fidelity (Sprint 2) - Modifications]


:leveloffset: 3

[[master-my-thai-star.asciidoc_cicd]]
== CI/CD

:leveloffset: 2

:toc: macro
toc::[]

[[production-line-ci.asciidoc]]
= My Thai Star in Production Line

[[production-line-ci.asciidoc_what-is-pl]]
=== What is PL?

The Production Line Project is a set of server-side collaboration tools for Capgemini engagements. It has been developed for supporting project engagements with individual tools like issue tracking, continuous integration, continuous deployment, documentation, binary storage and much more!

image::images/ci/pl_logo.png[, link=&quot;images/ci/pl_logo.png&quot;]

[[production-line-ci.asciidoc_introduction]]
=== Introduction

Although the PL Project is a wide set of tools, only 3 are going to be mainly used for My Thai Star projects to build a Continuous Integration and Continuos Delivery environment. All three are available in the link:https://devon.s2-eu.capgemini.com/#https://devon.s2-eu.capgemini.com/jenkins/[PL instance] used for this project.

. Jenkins
+
This is going to be the &quot;main tool&quot;. Jenkins helps to automate the non-human part of the development with Continuos Integration and is going to host all Pipelines (and, obviously, execute them).
+
. Nexus
+
Nexus manages software &quot;artifacts&quot; required for development. It is possible to both download dependencies from Nexus and publish artifacts as well. It allows to share resources within an organization.
+
. SonarQube
+
It is a platform for continuous inspection of the code. It is going to be used for the Java back-end.

[[production-line-ci.asciidoc_where-can-i-find-all-my-thai-star-pipelines]]
== Where can I find all My Thai Star Pipelines?

They are located under the *MTS* folder of the PL instance:

image::images/jenkins/mts-pipelines.png[, link=&quot;images/jenkins/mts-pipelines.png&quot;]

Those Jenkins Pipelines will not have any code to execute. They&apos;re just pointing to all *Jenkinsfiles* under the `/jenkins` folder of the repository. They can be found link:https://github.com/devonfw/my-thai-star/tree/develop/jenkins[here].

//== Needed Resources

//As long as the final step of every implemented pipeline is going to be the *deployment*, it is going to be needed an external Deployment Server. This whole project is deployed in http://http://de-mucdevondepl01 .

//So, having both a PL instance and an external Deployment Server, the project is ready to be integrated in a CI-CD environment.

[[production-line-ci.asciidoc_ci-in-my-thai-star-stack]]
== CI in My Thai Star stack

- xref:angular-ci.asciidoc[Angular CI]
- xref:java-ci.asciidoc[Java CI]

[[production-line-ci.asciidoc_how-to-configure-everything-out-of-the-box]]
== How to configure everything out of the box

Production Line currently has a template to integrate My Thai Star. All information can be found at link:https://github.com/devonfw/production-line[devonfw production line repository]

:leveloffset: 3

:leveloffset: 3

:toc: macro
toc::[]

[[angular-ci.asciidoc]]
= Angular CI

The Angular client-side of My Thai Star is going to have some specific needs for the CI-CD Pipeline to perform mandatory operations.

[[angular-ci.asciidoc_pipeline]]
== Pipeline

The Pipeline for the Angular client-side is going to be called *MyThaiStar_FRONTEND_BUILD*. It is located in the PL instance, under the link:https://devon.s2-eu.capgemini.com/jenkins/job/MTS/[MTS folder] (as previously explained). It is going to follow a process flow like this one:

image::images/ci/angular/angular_pipeline_flow.PNG[, link=&quot;angular_pipeline_flow.PNG&quot;]

Each of those steps are called _stages_ in the Jenkins context.Let&apos;s see what those steps mean in the context of the Angular application:

. *Declarative: Checkout SCM*
+
Retrieves the project from the GitHub repository which it&apos;s located. This step is not defined directly in our pipeline, but as it is loaded from the repository this step should always be done at the beginning.
+
image::images/ci/angular/pipeline-config.png[, link=&quot;pipeline_config.PNG&quot;]

. *Declarative: Tool Install*
+
The Pipeline needs some Tools to perform some operations with the Angular project. These tool is a correct version of *NodeJS* (10.17.0 LTS) with *Yarn* installed as global package.
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>tools {
    nodejs &quot;NodeJS 10.14.0&quot;
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>. *Loading Custom Tools*
+
The Pipeline also needs a browser in order to execute the tests, so in this step the chrome-stable will be loaded. We will use it in a headless mode.
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>tool chrome</p>
</div>
<div class="listingblock">
<div class="content">
<pre>. *Fresh Dependency Installation*
+
The script `$ yarn` does a package installation. As we always clean the workspace after the pipeline, all packages must be installed in every execution.
. *Code Linting*
+
This script executes a linting process of TypeScript. Rules can be defined in the `tslint.json` file of the project. It throws an exception whenever a file contains a non-compliant piece of code.
+
. *Execute Angular tests*
+
The CI testing of the Angular client is different than the standard local testing (adapted to CI environments, as specified in the *Adaptation* section of document). This script just executes the following commands:
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>ng test --browsers ChromeHeadless --watch=false</p>
</div>
<div class="listingblock">
<div class="content">
<pre>. *Check dependencies*
+
Before continue, we print the result of `yarn audit`. It shows the vulnerabilities in the dependencies. It do not process the reponse. The purpose is only to track the result of the command.
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>yarn audit</p>
</div>
<div class="listingblock">
<div class="content">
<pre>. *SonarQube code analysis*
+
The script load and execute the tool `sonar-scanner`. This tool is loaded here because it&apos;s not used in any other part of the pipeline. The `sonar-scanner` will take all code, upload it to sonarQube and wait until sonarQube send us a response with the quality of our code. If the code do not pass the quality gate, the pipeline will stop at this point.
. *Build Application*
+
The building process of the Angular client would result in a folder called `/dist` in the main Angular&apos;s directory. That folder is the one that is going to be served afterwards as an artifact. This process has also been adapted to some Deployment needs. This building script executes the following:
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>ng build --configuration=docker</p>
</div>
<div class="listingblock">
<div class="content">
<pre>. *Deliver application into Nexus*
+
Once the scripts produce the Angular artifact (`/dist` folder), it&apos;s time to package it and store into nexus.
. Declarative: Post Actions
+
At the end, this step is always executed, even if a previous stage fail. We use this step to clean up the workspace for future executions
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>post {
    always {
        cleanWs()
    }
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[angular-ci.asciidoc_adjustments]]
== Adjustments

The Angular project Pipeline needed some &quot;extra&quot; features to complete all planned processes. Those features resulted in some additions to the project.

[[angular-ci.asciidoc_pipeline-environment]]
=== Pipeline Environment

In order to easily reuse the pipeline in other angular projects, all variables have been defined in the block environment. All variables have the default values that Production Line uses, so if you&apos;re going to work in production line you won&apos;t have to change anything. Example:

[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>environment {
    // Script for build the application. Defined at package.json
    buildScript = &apos;build --configuration=docker&apos;
    // Script for lint the application. Defined at package.json
    lintScript = &apos;lint&apos;
    // Script for test the application. Defined at package.json
    testScript = &apos;test:ci&apos;
    // Angular directory
    angularDir = &apos;angular&apos;
    // SRC folder. It will be angularDir/srcDir
    srcDir = &apos;src&apos;
    // Name of the custom tool for chrome stable
    chrome = &apos;Chrome-stable&apos;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>// sonarQube
// Name of the sonarQube tool
sonarTool = &apos;SonarQube&apos;
// Name of the sonarQube environment
sonarEnv = &quot;SonarQube&quot;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    // Nexus
    // Artifact groupId
    groupId = &apos;com.devonfw.mythaistar&apos;
    // Nexus repository ID
    repositoryId = &apos;pl-nexus&apos;
    // Nexus internal URL
    repositoryUrl = &apos;http://nexus3-core:8081/nexus3/repository/maven-snapshots&apos;
    // Maven global settings configuration ID
    globalSettingsId = &apos;MavenSettings&apos;
    // Maven tool id
    mavenInstallation = &apos;Maven3&apos;
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[angular-ci.asciidoc_description]]
==== Description
- *buildScript*: script for build the application. It must be defined at package.json.
+
Example (package.json):
+
[source, json]</pre>
</div>
</div>
<div class="paragraph">
<p>{
    &quot;name&quot;: &quot;mythaistar-restaurant&quot;,
    &#x2026;&#x200B;
    &quot;scripts&quot;: {
        &#x2026;&#x200B;
        &quot;build&quot;: &quot;ng build&quot;,
        &#x2026;&#x200B;
    }
    &#x2026;&#x200B;
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>+
This will be used as follows:
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>sh &quot;&quot;&quot;yarn ${buildScript}&quot;&quot;&quot;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>- *lintScript*: Script for lint the application. Defined at package.json
+
Example (package.json):
+
[source, json]</pre>
</div>
</div>
<div class="paragraph">
<p>{
    &quot;name&quot;: &quot;mythaistar-restaurant&quot;,
    &#x2026;&#x200B;
    &quot;scripts&quot;: {
        &#x2026;&#x200B;
        &quot;lint&quot;: &quot;ng lint&quot;,
        &#x2026;&#x200B;
    }
    &#x2026;&#x200B;
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>+
This will be used as follows:
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>sh &quot;&quot;&quot;yarn ${lintScript}&quot;&quot;&quot;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>- *testScript*: Script for test the application. Defined at package.json
+
Example (package.json):
+
[source, json]</pre>
</div>
</div>
<div class="paragraph">
<p>{
    &quot;name&quot;: &quot;mythaistar-restaurant&quot;,
    &#x2026;&#x200B;
    &quot;scripts&quot;: {
        &#x2026;&#x200B;
        &quot;test:ci&quot;: &quot;npm run postinstall:web &amp;&amp; ng test --browsers ChromeHeadless --watch=false&quot;,
        &#x2026;&#x200B;
    }
    &#x2026;&#x200B;
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>+
This will be used as follows:
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>sh &quot;&quot;&quot;yarn ${testScript}&quot;&quot;&quot;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>- *angularDir*: Relative route to angular application. In My Thai Star this is the angular folder. The actual directory (.) is also allowed.
+
image::images/ci/angular/angular_directory.png[, link=&quot;angular_directory.PNG&quot;]
- *srcDir*: Directory where you store the source code. For angular applications the default value is `src`
+
image::images/ci/angular/src_directory.png[, link=&quot;src_directory.PNG&quot;]
- *chrome*: Since you need a browser to run your tests, we must provide one. This variable contains the name of the custom tool for google chrome.
+
image::images/ci/angular/chrome_installation.png[, link=&quot;chrome_installation.PNG&quot;]
- *sonarTool*: Name of the sonarQube scanner installation.
+
image::images/ci/angular/sonar-scanner.png[, link=&quot;sonar-scanner.PNG&quot;]
- *sonarEnv*: Name of the sonarQube environment. SonarQube is the default value for PL.
+
image::images/ci/angular/sonar-env.png[, link=&quot;sonar-env.PNG&quot;]
- *groupId*: Group id of the application. It will be used to storage the application in nexus3
+
image::images/ci/angular/nexus3_groupid.png[, link=&quot;nexus3_groupid.PNG&quot;]
- *repositoryId*: Id of the nexus3 repository. It must be defined at maven global config file.
+
image::images/ci/angular/nexus3_id.png[, link=&quot;nexus3_id.PNG&quot;]
- *repositoryUrl*: The url of the repository.
- *globalSettingsId*: The id of the global settings file.
+
image::images/ci/angular/nexus3_global_config.png[, link=&quot;nexus3_global_config.PNG&quot;]
- mavenInstallation: The name of the maven tool.
+
image::images/ci/angular/maven_tool.png[, link=&quot;maven_tool.PNG&quot;]

:leveloffset: 3

:leveloffset: 3

:toc: macro
toc::[]

[[java-ci.asciidoc]]
= Java CI

The Java server-side of My Thai Star is an *devon4j*-based application. As long as *Maven* and a *Java 8* are going to be needed, the Pipeline should have those tools available as well.

[[java-ci.asciidoc_pipeline]]
== Pipeline

This Pipeline is called *MyThaiStar_SERVER_BUILD*, and it is located exactly in the same PL instance&apos;s folder than *MyThaiStar_FRONTEND_BUILD*. Let&apos;s see how the Pipeline&apos;s flow behaves.

image::images/ci/java/java_pipeline_flow.PNG[, link=&quot;java_pipeline_flow.PNG&quot;]

Check those Pipeline stages with more detail:

. *Declarative: Checkout SCM*
+
Gets the code from https://github.com/devonfw/my-thai-star . This step is not defined directly in our pipeline, but as it is loaded from the repository this step should always be done at the beginning.
+
. *Declarative: Tool Install*
+
The My Thai Star application works with JDK11. In this step, if JDK11 is not installed, we install it and then put the JDK folder into PATH.
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>tools {
  jdk &apos;OpenJDK11&apos;
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>. *Loading Custom Tools*
+
In this step we load the tools that can not be loaded in the previous step. As My Thai Star is delivered as docker container, in this step we load docker as custom tool.
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>tool dockerTool</p>
</div>
<div class="listingblock">
<div class="content">
<pre>. *Install dependencies*
+
This step will download all project dependencies.
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>mvn clean install -Dmaven.test.skip=true</p>
</div>
<div class="listingblock">
<div class="content">
<pre>+
. *Unit Tests*
+
This step will execute the project unit test with maven.
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>mvn clean test</p>
</div>
<div class="listingblock">
<div class="content">
<pre>+
. *Dependeny Checker*
+
Execute the OWASP Dependency Checker in order to validate the project dependencies. It will generate a report that can be used in SonarQube
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>dependencyCheck additionalArguments: &apos;--project &quot;mtsj&quot; --scan java/mtsj --format XML&apos;, odcInstallation: &apos;dependency-check&apos;
dependencyCheckPublisher pattern: &apos;&apos;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>+
. *SonarQube analysis*
+
The code is evaluated using the integrated PL instance&apos;s SonarQube. Also, it will wait for the quality gate status. If the status is failing, the pipeline execution will be stopped.
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>withSonarQubeEnv(sonarEnv) {
    sh &quot;mvn sonar:sonar&quot;
}</p>
</div>
<div class="paragraph">
<p>def qg = waitForQualityGate()
if (qg.status != &apos;OK&apos;) {
    error &quot;Pipeline aborted due to quality gate failure: ${qg.status}&quot;
}</p>
</div>
<div class="listingblock">
<div class="content">
<pre>+
. *Deliver application into Nexus*
+
Store all artifacts into nexus.
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>mvn deploy -Dmaven.test.skip=true</p>
</div>
<div class="listingblock">
<div class="content">
<pre>. *Create the Docker image*
+
Create the docker image and then publish the image into a docker registry.


[[java-ci.asciidoc_adjustments]]
== Adjustments

[[java-ci.asciidoc_pipeline-environment]]
=== Pipeline Environment

In order to easily reuse the pipeline in other java projects, all variables have been defined in the block environment. All variables have the default values that Production Line uses, so if you&apos;re going to work in production line you won&apos;t have to change anything. Example:

[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>environment {
    // Directory with java project
    javaDir = &apos;java/mtsj&apos;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>// sonarQube
// Name of the sonarQube environment
sonarEnv = &quot;SonarQube&quot;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// Nexus 3
// Maven global settings configuration ID
globalSettingsId = &apos;MavenSettings&apos;
// Maven tool id
mavenInstallation = &apos;Maven3&apos;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    // Docker
    dockerRegistryCredentials = &apos;nexus-api&apos;
    dockerRegistryProtocol = &apos;https://&apos;
    dockerTool = &apos;docker-global
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>[[java-ci.asciidoc_description]]
==== Description
- *javaDir*: Relative route to java application. In My Thai Star this is the java/mtsj folder. The actual directory (.) is also allowed.
+
image::images/ci/java/java_directory.png[, link=&quot;java_directory.png&quot;]
- *sonarEnv*: Name of the sonarQube environment. SonarQube is the default value for PL.
- *globalSettingsId*: The id of the global settings file. MavenSettings is the default value for PL.
+
image::images/ci/angular/nexus3_global_config.png[, link=&quot;nexus3_global_config.PNG&quot;]
- *mavenInstallation*: The name of the maven tool. Maven3 is the default value for PL.
+
image::images/ci/angular/maven_tool.png[, link=&quot;maven_tool.PNG&quot;]

[[java-ci.asciidoc_distribution-management]]
=== Distribution management
The only _extra_ thing that needs to be added to the Java server-side is some information that determines where the artifact of the project is going to be stored in *Nexus*. This is going to be a section in the main `pom.xml` file called `&lt;distributionManagement&gt;`. This section will point to the PL instance&apos;s Nexus. Let&apos;s have a look at it. It&apos;s already configured with the PL default values.

[source, xml]</pre>
</div>
</div>
<div class="paragraph">
<p>&lt;distributionManagement&gt;
    &lt;repository&gt;
      &lt;id&gt;pl-nexus&lt;/id&gt;
      &lt;name&gt;PL Releases&lt;/name&gt;
      &lt;url&gt;<a href="http://nexus3-core:8081/nexus/content/repositories/maven-releases/&lt;/url&gt;" class="bare">http://nexus3-core:8081/nexus/content/repositories/maven-releases/&lt;/url&gt;</a>;
    &lt;/repository&gt;
    &lt;snapshotRepository&gt;
      &lt;id&gt;pl-nexus&lt;/id&gt;
      &lt;name&gt;PL Snapshots&lt;/name&gt;
      &lt;url&gt;<a href="http://nexus3-core:8081/nexus3/repository/maven-snapshots&lt;/url&gt;" class="bare">http://nexus3-core:8081/nexus3/repository/maven-snapshots&lt;/url&gt;</a>;
    &lt;/snapshotRepository&gt;
&lt;/distributionManagement&gt;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>:leveloffset: 3

:leveloffset: 2

:toc: macro
toc::[]

[[deployment.asciidoc]]
= Deployment

The main deployment tool used for *My Thai Star* is be *Docker*.

image::images/ci/deployment/docker.png[, link=&quot;https://www.docker.com/&quot;]

It is a tool to run application in isolated environments. Those _isolated environments_ will be what we call *Docker containers*. For instance, it won&apos;t be necessary any installation of *nginx* or *Apache tomcat* or anything necessary to deploy, because there will be some containers that actually _have_ those technologies inside.

[[deployment.asciidoc_where-docker-containers-will-be-running]]
== Where Docker containers will be running?

Of course, it is necessary to have an external Deployment Server. Every Docker process will run in it. It will be accessed from Production Line pipelines via *SSH*. Thus, the pipeline itself will manage the scenario of, if every previous process like testing passes as OK, stop actual containers and create new ones.

This external server will be located in http://de-mucdevondepl01 .

[[deployment.asciidoc_container-schema]]
== Container Schema

3 Docker containers are being used for the deployment of My Thai Star:

1. **nginx** for the Reverse Proxy
2. **tomcat** for the Java Server
3. **nginx** for the Angular Client

The usage of the **Reverse Proxy** will allow the client to call via `/api` every single Java Server&apos;s REST operation. Moreover, there will only be 1 port in usage in the remote Docker host, the one mapped for the Reverse Proxy: `8080`.
Besides the deployment itself using **nginx** and **tomcat**, both client and server are previously built using **nodejs** and **maven** images. Artifacts produced by them will be pasted in servers&apos; containers using multi-stage docker builds. It will all follow this schema:

image::https://user-images.githubusercontent.com/20857839/36028242-8998f41c-0d9e-11e8-93b3-6bfe50152bf8.png[, link=&quot;https://user-images.githubusercontent.com/20857839/36028242-8998f41c-0d9e-11e8-93b3-6bfe50152bf8.png&quot;]

This orchestration of all 3 containers will be done by using a `docker-compose.yml` file. To redirect traffic from one container to another (i.e. reverse-proxy to angular client or angular client to java server) will be done by using, as host names, the service name `docker-compose` defines for each of them, followed by the internally exposed port:

- `http://reverse-proxy:80`
- `http://angular:80`
- `http://java:8080`

NOTE: A implementation using xref:traefik-reverse-proxy.asciidoc[Traefik as reverse proxy] instead of NGINX is also available.

[[deployment.asciidoc_run-my-thai-star]]
== Run My Thai Star

The steps to run **My Thai Star** are:

1. Clone the repository `$ git clone https://github.com/devonfw/my-thai-star.git`
2. Run the docker compose command: `$ docker-compose up`

:leveloffset: 3

:leveloffset: 3

:toc: macro
toc::[]

[[deployment-pipelines.asciidoc]]
= Deployment Pipelines

As PL does not support deployments, we have created separate pipelines for this purpose. Those pipelines are: *MyThaiStar_REVERSE-PROXY_DEPLOY*, *MyThaiStar_FRONTEND_DEPLOY* and *MyThaiStar_SERVER_DEPLOY*.

The application will be deployed using docker on a remote machine. The architecture is as follows:

image::images/ci/deployment/deployment_arch.png[,link=images/ci/deployment/deployment_arch.png]

The parts to be deployed are: an NGINX reverse proxy, the java application and the angular application.

[[deployment-pipelines.asciidoc_mythaistar_server_deploy-pipeline]]
== MyThaiStar_SERVER_DEPLOY Pipeline

Deploys on the server the Java part of My Thai Star.

[[deployment-pipelines.asciidoc_parameters]]
=== Parameters

- *registryUrl*: The url to the docker registry where the image is stored.
- *registryCredentialsId*: Credentials to publish/download images from registry.
- *dockerNetwork*: Network of your My Thai Star application. You can deploy several versions of MTS in the same server by changing the dockerNetwork.
- *VERSION*: The version that you can to deploy.

[[deployment-pipelines.asciidoc_pipeline-steps]]
=== Pipeline steps

- *Create docker network*: Create the docker network with the name provided as parameter.
- *Deploy new image*: Deploy a new java container. If it already exists, first it delete the previous one.

[[deployment-pipelines.asciidoc_mythaistar_frontend_deploy]]
== MyThaiStar_FRONTEND_DEPLOY

Deploys on the server the Angular part of My Thai Star

[[deployment-pipelines.asciidoc_parameters]]
=== Parameters

- *registryUrl*: The url to the docker registry where the image is stored.
- *registryCredentialsId*: Credentials to publish/download images from registry.
- *dockerNetwork*: Network of your My Thai Star application. You can deploy several versions of MTS in the same server by changing the dockerNetwork.
- *VERSION*: The version that you can to deploy.

[[deployment-pipelines.asciidoc_pipeline-steps]]
=== Pipeline steps

- *Create docker network*: Create the docker network with the name provided as parameter.
- *Deploy new image*: Deploy a new angular container. If it already exists, first it delete the previous one.

[[deployment-pipelines.asciidoc_mythaistar_reverse-proxy_deploy-pipeline]]
== MyThaiStar_REVERSE-PROXY_DEPLOY Pipeline

NOTE: As reverse proxy connects to the Java and Angular application, both must be deployed before you execute this pipeline.

The MyThaiStar_REVERSE-PROXY_DEPLOY pipeline will deploy the My Thai Star reverse proxy into a remote machine using docker.

[[deployment-pipelines.asciidoc_parameters]]
=== Parameters

- *registryUrl*: The url to the docker registry where the image is stored.
- *registryCredentialsId*: Credentials to publish/download images from registry.
- *buildReverseProxy*: If yes, it will build and publish a new version of reverse-proxy.
- *port*: Port of the MTS application. You must ensure that those port is available in the deployment machine.
- *dockerNetwork*: Network of your My Thai Star application. You can deploy several versions of MTS in the same server by changing the port and the dockerNetwork.
- *VERSION*: The version that you can to deploy.

[[deployment-pipelines.asciidoc_pipeline-steps]]
=== Pipeline steps

- *Create docker network*: Create the docker network with the name provided as parameter.
- *Create the Docker image*: If buildReverseProxy is enabled, this step will create a new docker image and publish it to the docker registry.
- *Deploy new image*: Deploy a new reverse proxy container. If it already exists, first it delete the previous one.

:leveloffset: 3

:leveloffset: 3

:toc: macro
toc::[]

[[deployment-strategies.asciidoc]]
= Deployment Strategies

In this chapter different way of deploying My Thai Star are explained. Everything will be based in Docker.

[[deployment-strategies.asciidoc_independent-docker-containers]]
== Independent Docker containers

The first way of deployment will use isolated Docker containers. That means that if the client-side container is deployed, it does not affect the server-side container&apos;s life cycle and vice versa.

Let&apos;s show how the containers will behave during their life cycle.

- 0) Copy everything you need into the Deployment Server directory
- 1) Remove existing container (Nginx or Tomcat)
+
image::images/ci/angular/container1.png[, link=&quot;container1.png&quot;]
+
- 2) Run new one from the Docker images collection of the external Deployment Server.
+
image::images/ci/angular/container2.png[, link=&quot;container2.png&quot;]
+
- 3) Add the artifact `/dist` to the &quot;deployable&quot; folder of the Docker container (`/usr/share/nginx/html/`)
+
image::images/ci/angular/container3.png[, link=&quot;container3.png&quot;]
+
Now, let&apos;s see how it&apos;s being executed in the command line (simplified due to documentation purposes). The next block of code represents what is inside of the last stage of the Pipeline.
+
[source, groovy]</pre>
</div>
</div>
<div class="paragraph">
<p>sshagent (credentials: [&apos;my_ssh_token&apos;]) {
    sh &quot;&quot;&quot;
        // Copy artifact from workspace to deployment server</p>
</div>
<div class="literalblock">
<div class="content">
<pre>        // Manage container:
        docker rm -f [mts-container]
        docker run -itd --name=[mts-container] [base_image]
        docker exec [mts-container] bash -C \\&quot;rm [container_deployment_folder]/*\\&quot;
        docker cp [artifact] [mts-container]:[container_deployment_folder]
    &quot;&quot;&quot;
}</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>+
For every operation performed in the external Deployment Server, it is necessary to define _where_ those commands are going to be executed. So, for each one of previous `docker` commands, this should appear before:

    ssh -o StrictHostKeyChecking=no root@10.40.235.244

[[deployment-strategies.asciidoc_docker-compose]]
== Docker Compose

The second way of deployment will be by orchestrating both elements of the application: The Angular client-side and the Java server-side. Both elements will be running in Docker containers as well, but in this case they won&apos;t be independent anymore. *Docker Compose* will be in charge of keeping both containers up, or to put them down.


[[deployment-strategies.asciidoc_project-adjustment]]
=== Project adjustment

In order to perform this second way of deployment, some files will be created in the project. The first one is the *Dockerfile* for the Angular client-side. This file will pull (if necessary) an *nginx* Docker image and copy the Angular artifact (`/dist` folder) inside of the deployment folder of the image. It will be located in the main directory of the Angular client-side project.

image::images/ci/deployment/dockerfile-angular.PNG[, link=&quot;dockerfile-angular.PNG&quot;]

The second file is the *Dockerfile* for the Java server-side. Its function will be quite similar to the Angular one. It will run a *tomcat* Docker image and copy the Java artifact (`mythaistar.war` file) in its deployment folder.

image::images/ci/deployment/dockerfile-java.PNG[, link=&quot;dockerfile-java.PNG&quot;]

Finally, as long as the *docker-compose* is being used, a file containing its configuration will be necessary as well. A new folder one the main My That Star&apos;s directory is created, and it&apos;s called `/docker`. Inside there is just a `docker-compose.yml` file. It contains all the information needed to orchestrate the deployment process. For example, which port both containers are going to be published on, and so on. This way of deployment will allow the application to be published or not just with one action.

    docker-compose rm -f            # down
    docker-compose up --build -d    # up fresh containers


image::images/ci/deployment/docker-compose.PNG[, link=&quot;docker-compose.PNG&quot;]

Let&apos;s have a look at the file itself:

[source, yaml]</pre>
</div>
</div>
<div class="paragraph">
<p>version: &apos;3&apos;
services:
  client_compose:
    build: &quot;angular&quot;
    ports:
      - &quot;8091:80&quot;
    depends_on:
      - server_compose
  server_compose:
    build: &quot;java&quot;
    ports:
      - &quot;9091:8080&quot;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>This Orchestrated Deployment will offer some interesting possibilities for xref:future-deployment.asciidoc[the future of the application].

:leveloffset: 3

:leveloffset: 3

:toc:
toc::[]

[[future-deployment.asciidoc]]
= Future Deployment

The *My Thai Star* project is going to be built in many technologies. Thus, let&apos;s think about one deployment schema that allow the Angular client to communicate to all three back ends: *Java*, *Node* and *.NET*.

As long as *Docker containers* are being used, it shouldn&apos;t be that hard to deal with this &quot;distributed&quot; deployment. The schema represents 6 Docker containers that will have client-side(s) and server-side(s). Each of 3 Angular client containers (those in red) are going to communicate with different back-ends. So, when the deployment is finished, it would be possible to use all three server-sides just by changing the &quot;port&quot; in the URL.

Let&apos;s see how it would look like:

image::images/ci/future/deployment_schema.PNG[, link=&quot;images/ci/future/deployment_schema.PNG&quot;]

:leveloffset: 3

:leveloffset: 3

:toc: macro
toc::[]

[[traefik-reverse-proxy.asciidoc_reverse-proxy-strategy-using-traefik]]
== Reverse proxy strategy using Traefik

This implementation is the same as described at xref:deployment.asciidoc[My Thai Star deployment wiki page]. The only thing that changes is that Traefik is used instead of NGINX.

Using Traefik as reverse proxy, we can define the routes using labels in the docker containers instead of using a nginx.conf file. With this, it is not necessary to modify the reverse proxy container for each application. In addition, as Traefik is listening to the docker daemon, it can detect new containers and create routes for them without rebooting.

Example of labels:

[source,yaml]</pre>
</div>
</div>
<div class="paragraph">
<p>labels:
    - &quot;traefik.http.routers.angular.rule=PathPrefix(<code>/</code>)&quot;
    - &quot;traefik.http.services.angular.loadBalancer.healthcheck.path=/health&quot;
    - &quot;traefik.http.services.angular.loadBalancer.healthcheck.interval=10s&quot;
    - &quot;traefik.http.services.angular.loadBalancer.healthcheck.scheme=http&quot;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[[traefik-reverse-proxy.asciidoc_how-to-use-it]]
=== How to use it

If you want to build the images from code, change to My Thai Star root folder and execute:

[source,bash]</pre>
</div>
</div>
<div class="paragraph">
<p>$ docker-compose -f docker-compose.traefik.yml up -d --build</p>
</div>
<div class="listingblock">
<div class="content">
<pre>If you want to build the images from artifacts, change to traefik folder (reverse-proxy/traefik) and execute:

[source,bash]</pre>
</div>
</div>
<div class="paragraph">
<p>$ docker-compose up -d --build</p>
</div>
<div class="listingblock">
<div class="content">
<pre>After a seconds, when the healthcheck detects that containers are running, your application will be available at http://localhost:8090. Also, the Traefik dashboard is available at http://localhost:8080.

If you want to check the behaviour of the application when you scale up the backend, you can execute:

[source,bash]</pre>
</div>
</div>
<div class="paragraph">
<p>$ docker-compose scale java=5</p>
</div>
<div class="listingblock">
<div class="content">
<pre>With this, the access to the java backend will be using the load balacing method: Weighted Round Robin.

:leveloffset: 3

:leveloffset: 2

:toc: macro
toc::[]

[[nkaas.asciidoc]]
= MyThaiStar on Native Kubernetes as a Service (nKaaS)

The MyThaiStar sample application can be deployed on a nKaaS environment. The required Kubernetes configuration files can be found in the MyThaiStar repository. There are no additional changes required in order to deploy the application.

[[nkaas.asciidoc_setting-up-the-environment]]
== Setting up the environment

[[nkaas.asciidoc_following-the-nkaas-guide]]
=== Following the nKaaS guide

After requesting access to the nKaaS platform you&apos;ll be greeted with a welcome mail which contains your personal credentials. Make sure to change the given password to a personal one within the 24 hour time period, otherwise the  credentials will expire.

After successfully following the link:https://portal.capgemini-ips.com/native-kubernetes/getting-started[guide] mentioned in the welcome mail you should be able to establish a connection to the nKaaS VPN and have access to all their services (Jenkins, BitBucket, etc.). You should also be able to communicate with Kubernetes using kubectl.

*Known issues:* The nKaaS guide provides a download link for *OpenVPN Connect*. However, some users experienced connection issues with this client. If you&apos;re having issues connecting to the VPN with OpenVPN Connect, you may try out the client by link:https://www.ovpn.com/en/guides/windows-openvpn-gui[OVPN].

[[nkaas.asciidoc_requesting-a-namespace]]
=== Requesting a namespace

Initially, you won&apos;t be able to edit anything on Kubernetes, as you don&apos;t have any privileges on any namespace. To request your own namespace you should raise a ticket at the link:https://servicedesk.capgemini-ips.com/servicedesk/customer/portal/143[Customer Support Portal] containing your desired name for the namespace.

As soon as the namespace was created you can change your kubectl context:

[source]</pre>
</div>
</div>
<div class="paragraph">
<p>kubectl config set-context --current -namespace=YOUR-NAMESPACE</p>
</div>
<div class="listingblock">
<div class="content">
<pre>On your own namespace you should have permissions to create/delete deployments/services etc. and perform other actions.

[[nkaas.asciidoc_setting-up-harbor]]
== Setting up Harbor

Jenkins will build the MyThaiStar Docker images and push them to the nKaaS link:http://harbor.demo.xpaas.io[Harbor registry]. The Jenkinsfile defaults to a Harbor project called &quot;my-thai-star&quot;. If there&apos;s no such project on Harbor, simply create a new one.

[[nkaas.asciidoc_setting-up-jenkins]]
== Setting up Jenkins

As MyThaiStar includes all required Jenkinsfiles for nKaaS, almost no configurations have to be performed by the user.
Create a new Pipeline on link:http://jenkins.demo.xpaas.io[Jenkins] and configure its definition to be a &quot;Pipeline script from SCM&quot;. The SCM used is &quot;Git&quot; and the repository URL is the MyThaiStar repository https://github.com/devonfw/my-thai-star.git or your fork of it.

The Branch Specifier should point to `*/develop`, the Script Path is `jenkins/nKaaS/Jenkinsfile` as that&apos;s where the Jenkinsfile is located at the MyThaiStar repository.
Checking the &quot;Lightweight checkout&quot; could speed up the Pipeline.

*Note:* If you&apos;re using the nKaaS link:http://bitbucket.demo.xpaas.io[Bitbucket] as repository for your MyThaiStar clone you have to perform some additional configurations. First you&apos;ll have to create a new SSH keypair, for example with `ssh-keygen`. Add the public key to the Bitbucket authentication methods and the private key in Jenkins to a new pair of credentials. This step is required for Jenkins to be able to authenticate against Bitbucket.
Afterwards, instead of the official MyThaiStar repository, specify your Bitbucket repository:

[source]</pre>
</div>
</div>
<div class="paragraph">
<p>ssh://git@bitbucket.demo.xpaas.io:7999/YOUR-PROJECT/YOUR-MTS-REPO.git</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Under &quot;Credentials&quot; choose the credentials that contain your Bitbucket private key you&apos;ve created earlier.

[[nkaas.asciidoc_deploying-mts]]
== Deploying MTS

After setting up the Jenkins Pipeline, you can simply run it by clicking on the &quot;Build&quot; button. This will trigger the pipeline, Jenkins will:

1. Check out the MTS project
2. Build the docker images
3. Push the docker images to the Harbor registry
4. Deploy the MTS application onto Kubernetes

Finally, the applications should be available at http://my-thai-star.demo.xpaas.io.

The first part, `my-thai-star`, ist specified in the MTS link:https://github.com/devonfw/my-thai-star/blob/develop/jenkins/nKaaS/ingress.yaml[ingress] configuration at `host`. The second part, `demo.xpaas.io`, is the host of the nKaaS you&apos;re working on.

:leveloffset: 3

:leveloffset: 3

:leveloffset: 0

[[master-contributing.asciidoc]]
= Contributing

:leveloffset: 1

:toc: macro
toc::[]
:idprefix:
:idseparator: -

[[CONTRIBUTING.asciidoc]]
= Contributing

https://devonfw.com[devonfw] is truly free and open.
We are looking forward to your contribution and are more than happy to receive your feedback and improvements to code and documentation.
This page describes the few conventions to follow.
Please note that this is an open and international project and all content has to be in English language.
Also read our xref:code-of-conduct.asciidoc[code of conduct].

[[contributing.asciidoc_using-github]]
== Using GitHub
We are using GitHub as our social coding platform. Hence, we follow the principles of GitHub to deal with changes:

[[contributing.asciidoc_account]]
=== Account
In case you do not have an account please first https://github.com/join[join GitHub].
If you have a CORP username use it also as GitHub username.
If possible and suitable also provide your real name in your profile.
Now that you are logged into GitHub you are ready to go.

[[contributing.asciidoc_organizations]]
=== Organizations
For devonfw we have the following organizations on GitHub:

* link:https://github.com/devonfw/[*devonfw*]
+
The official _devonfw Platform_ organization.
* link:https://github.com/devonfw-forge[*devonfw-forge*]
+
The organization used for work on incubators and other research projects.
New projects start here and in case they evolve properly and get mature, they are moved to the official devonfw organization.

[[contributing.asciidoc_repositories]]
=== Repositories
Within the organization we have many different repositories.
In case you want to give feedback or provide contributions you need to know the corresponding repository.

The major technology stacks have their own repository carrying the prefix `devon4` followed by a shortcut for their stack or programming language:

* https://github.com/devonfw/devon4j[devon4j] for https://java.com/[Java]
* https://github.com/devonfw/devon4ng[devon4ng] for https://angular.io/[Angular]
* https://github.com/devonfw/devon4net[devon4net] for https://dotnet.microsoft.com/[.NET]
* https://github.com/devonfw/devon4x[devon4x] for https://dotnet.microsoft.com/apps/xamarin[Xamarin]
* https://github.com/devonfw/devon4node[devon4node] for https://nodejs.org/[node.js]

Tools we provide typically have a repository named like the tool they provide (omitting prefixes like `devon[fw]`):

* https://github.com/devonfw/cobigen[CobiGen] (incremental code generator)
* https://github.com/devonfw/ide[devonfw-ide] (development environment)
* https://github.com/devonfw/sonar-devon4j-plugin[sonar-devon4j-plugin] (SonarQube plugin for architecture validation)
* https://github.com/devonfw/cicdgen[CICDgen] (generator for CI/CD)
* https://github.com/devonfw/docgen[DocGen] (generator for AsciiDoc to PDF and other formats)
* https://github.com/devonfw-forge/solicitor[Solicitor] (License compatibility checker)
* https://github.com/devonfw/asciidoc-link-checker[asciidoc-link-checker]

There is much more to discover.
Browse our organization to find out.

[[contributing.asciidoc_trivial-changes]]
=== Trivial Changes
Please note that for trivial changes like a typo in the documentation you do not need to follow a complex process. Please do the following:

* Just browse to the file online on GitHub.
* Click on the small pencil icon on the top right of the file content.
* Make the required changes.
* When editing documentation, verify your change by switching to the `Preview` tab at the top.
* When your change is complete, select `Create a new branch for this commit and start a pull request` at the bottom.
* Comit your change by clicking the green `Propose file change` button at the bottom.
* Now fill summary and description and click on the green `Create pull request` button.
* That is all. Thank you very much! For details about pull requests read xref:CONTRIBUTING.asciidoc_pull-requests[here].

[[contributing.asciidoc_issues]]
=== Issues
We are working issue-based, so check if there is already an issue in our tracker for the task you want to work.
Otherwise first create a new issue for it (e.g. a bug report or a feature request).

If you want to contribute actively to resolve the issue (by providing code, documentation, etc.),
please assure via communication in that issue (comments, assigned user, etc.) that this is recognized and accepted by somebody from the community.
Especially in case of more complex issues, please get sure not to miss out such consensus with the community
and ensure that there is a common understanding of what and potentially even how to do it.
You surely do not want to invest your valuable work and time into something that will later be rejected by the community.
When you have been assigned to the issue (see `Assignees` on the right) you are sure that nobody else will work on the same issue in parallel and ready to go.

[[contributing.asciidoc_branches]]
=== Branches
Typically the latest development takes place on the `develop` branch.
In case there is no such branch it will be the `master` branch.
If you plan to contribute a bugfix, please check if there is a maintenance branch for the corresponding release (e.g. if you found a bug in version 3.4.5 and a branch `develop-3.4.x` exists, this should be the baseline for your work).

[[contributing.asciidoc_forking]]
=== Forking
The github.com platform supports a wonderful feature to https://help.github.com/articles/fork-a-repo/[fork a repository].
Make use of this create your private copy where you experiment and prepare your contribution in an isolated environment:

* Visit the original repository you want to contribute to.
* Click on the `Fork` button at the top right. If asked for a destination choose your personal GitHub account.
* Clone this fork with a git-client to your local machine.
* Checkout the branch to use as baseline (see above section).
* From there create and checkout a new feature branch (named `feature/&#xAB;issue-id&#xBB;-&#xAB;feature-keywords&#xBB;`)
* Start your work on this new feature branch.

Sometimes, when working on your fork, there will be changes made to the original repository, which you might want to incorporate into your fork&apos;s master branch. To do this, you can https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/syncing-a-fork[sync your fork]:

* Add the remote URL of the original repo to your list of remotes: `git remote add upstream &#xAB;remote-url&#xBB;`
* Fetch the changes from the upstream remote: `git fetch upstream`
* Check out your fork&apos;s master branch: `git checkout master` (assuming you&apos;re working on a feature branch)
* Merge the changes from upstream/master into your fork&apos;s master branch: `git merge upstream/master`
* This brings your fork&apos;s master branch into sync with the original repository without losing changes on your local feature branch.
* Switch back to your feature branch to continue work: `git checkout &#xAB;feature-branch&#xBB;`

[[contributing.asciidoc_code-changes]]
=== Code Changes
Before you start with your code changes, please check the following conventions:

* For each programming language we have a stack repository (see xref:CONTRIBUTING.asciidoc_repositories[repositories]) containing documentation about the coding conventions (example: https://github.com/devonfw/devon4j/blob/develop/documentation/coding-conventions.asciidoc[Java]). Please read and follow these conventions before making (bigger) changes.
* Use https://github.com/devonfw/ide/blob/master/documentation/Home.asciidoc[devon-ide] to setup your development environment and get code formatters, etc. configured properly as we do not like &quot;diff-wars&quot; because of inconsistent formatter settings.
* Thank you, happy coding!

[[contributing.asciidoc_documentation-changes]]
=== Documentation Changes
Before you start with your documentation changes, please check the following conventions:

* Documentation will always be found in the `documentation` folder at the root of a repository.
* All our documentation is written in the http://asciidoc.org/[AsciiDoc] format.
* All documentation files need to carry the `.asciidoc` extension and should be named in `lower-train-case` style.
* Common prefixes help to categorize documentation files: `tutorial-` is used for step-by-step instructions, `guide-` is used for guidelines on a particular aspect, `coding-` is for specific conventions or details about source-code, `alternative-` is for less official options that are not recommended but to still offer knowledge for people using that option, `decision-` is for rationales why a complex (technology) decision was made.
* Please read and follow our https://github.com/devonfw/docgen/#guidelines[documentation guidelines].

[[contributing.asciidoc_testing-changes]]
=== Testing Changes
To test your changes all you need to do is run the following command:
[source]
devon build

If the build failed, you need to rework your changes.

[[contributing.asciidoc_committing-changes]]
=== Committing Changes
Always commit your changes in small logical units associated with an issue (see above section) using the commit message format:
[source]
#&#xAB;issue-id&#xBB;: &#xAB;describe your change&#xBB;
Then GitHub will automatically link the commit with the issue.

Example:
[source]
#1: added REST service for tablemanagement

In case you worked on an issue from a different repository (e.g. change in `ide-settings` due to issue in `ide`), we use this commit message format:
[source]
&#xAB;organization&#xBB;/&#xAB;repository&#xBB;#&#xAB;issue-id&#xBB;: &#xAB;describe your change&#xBB;

Example:
[source]
devonfw/devon4j#1: added REST service for tablemanagement

[[contributing.asciidoc_pushing-changes]]
=== Pushing Changes
To make your changes public you need to push them.
If you are doing this for the first time since you started your feature branch, you also need to publish that branch (`git push -u origin feature/&#xAB;issue-id&#xBB;-&#xAB;feature-keywords&#xBB;`).
After that a `git push` is sufficient.

[[contributing.asciidoc_definition-of-done]]
=== Definition of Done
To complete your changes ensure the following aspects:

* You have tested your changes and the build succeeds.
* Code and documentation are in sync (if you coded new features you also extended documentation, etc.).
* You followed the coding conventions and documentation guidelines.
* For new features you have added automated unit tests.

Do not worry; we will assist you in case you are unsure or missed out on something.
However, you make your and our life easier, if you follow this Definition of Done (DoD) before providing your pull request.

[[contributing.asciidoc_pull-requests]]
=== Pull Requests
Once you have completed your changes and DoD, you can finally https://help.github.com/en/articles/creating-a-pull-request[create] a https://help.github.com/en/articles/about-pull-requests[pull request] (PR).

Please ensure the following aspects:

* When selecting a title for your pull request, follow the same conventions that apply to xref:CONTRIBUTING.asciidoc_committing-changes[commit messages].
* Also add the related issue(s) to the description of the pull request (e.g. `fixes #&#xAB;issue-id&#xBB;`).
* If you are providing a PR that is not yet ready for merging, please use GitHub&apos;s https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests#draft-pull-requests[draft pull request] feature:
** Expand the drop-down menu of the green `Create Pull Request` button and select `Create Draft Pull Request`
** You can make further code changes to your PR by pushing commits to the corresponding feature branch.
** When you&apos;re ready to get feedback on your PR, click the `Ready for review` button.
* If you are providing a PR that is ready for merging, click on the green `Create Pull Request` button.

Your pull request will automatically be checked for these requirements:

* Can be merged without conflicts.
* Builds correctly (no compile or test errors).
* https://github.com/devonfw-forge/devon-guide/wiki/cookbook-cla[CLA] has been signed. If you contribute for the first time, you need to https://github.com/devonfw-forge/devon-guide/wiki/cookbook-cla[sign the CLA] once.

Please ensure to do the required tasks and reworks unless all checks are satisfied.
From here a reviewer should take over and give feedback.
In the best case, your contribution gets merged and everything is completed.
You might also get review feedback and requests for changes.
In that case walk through the review feedback and try to resolve it.
Once you push your new commits, the PR gets updated automatically and all checks will verify again.
Also GitHub will automatically make resolved review comments as outdated.
If you do not plan to put any further work into your PR before it is completed and merged, please let us know by writing an according comment.
We might find resources to get the PR done for you if it is already valuable.
In case you should not get feedback for weeks, do not hesitate to ask the community.

NOTE: If one (typically the reviewer) has to change the base branch (because the wrong develop branch was used, see above) onto which the changes will be merged, one can do the same by following the instructions at https://github.com/blog/2224-change-the-base-branch-of-a-pull-request/[here].

:leveloffset: 3

:leveloffset: 1

:toc: macro
toc::[]
:idprefix:
:idseparator: -

[[CODE_OF_CONDUCT.asciidoc]]
= Contributor Covenant Code of Conduct

[[code_of_conduct.asciidoc_our-pledge]]
== Our Pledge

In the interest of fostering an open and welcoming environment, we as contributors and maintainers pledge to making participation in our project and our community a harassment-free experience for everyone, regardless of age, body size, disability, ethnicity, gender identity and expression, level of experience, nationality, personal appearance, race, religion, or sexual identity and orientation.

[[code_of_conduct.asciidoc_our-standards]]
== Our Standards

Examples of behavior that contributes to creating a positive environment include:

* Using welcoming and inclusive language
* Being respectful of differing viewpoints and experiences
* Gracefully accepting constructive criticism
* Focusing on what is best for the community
* Showing empathy towards other community members

Examples of unacceptable behavior by participants include:

* The use of sexualized language or imagery and unwelcome sexual attention or advances
* Trolling, insulting/derogatory comments, and personal or political attacks
* Public or private harassment
* Publishing others&apos; private information, such as a physical or electronic address, without explicit permission
* Other conduct which could reasonably be considered inappropriate in a professional setting

[[code_of_conduct.asciidoc_our-responsibilities]]
== Our Responsibilities

Project maintainers are responsible for clarifying the standards of acceptable behavior and are expected to take appropriate and fair corrective action in response to any instances of unacceptable behavior.

Project maintainers have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, or to ban temporarily or permanently any contributor for other behaviors that they deem inappropriate, threatening, offensive, or harmful.

[[code_of_conduct.asciidoc_scope]]
== Scope

This Code of Conduct applies both within project spaces and in public spaces when an individual is representing the project or its community. Examples of representing a project or community include using an official project e-mail address, posting via an official social media account, or acting as an appointed representative at an online or offline event. Representation of a project may be further defined and clarified by project maintainers.

[[code_of_conduct.asciidoc_enforcement]]
== Enforcement

Instances of abusive, harassing, or otherwise unacceptable behavior may be reported by contacting the project team at icsddevonfwsupport.apps2@capgemini.com. All complaints will be reviewed and investigated and will result in a response that is deemed necessary and appropriate to the circumstances. The project team is obligated to maintain confidentiality with regard to the reporter of an incident. Further details of specific enforcement policies may be posted separately.

Project maintainers who do not follow or enforce the Code of Conduct in good faith may face temporary or permanent repercussions as determined by other members of the project&apos;s leadership.

[[code_of_conduct.asciidoc_attribution]]
== Attribution

This Code of Conduct is adapted from the https://www.contributor-covenant.org[Contributor Covenant], version 1.4,
available at &lt;https://www.contributor-covenant.org/version/1/4/code-of-conduct.html&gt;

:leveloffset: 3

:leveloffset: 1

:toc: macro
toc::[]
:idprefix:
:idseparator: -

[[oss-compliance.asciidoc]]
= OSS Compliance

This chapter helps you to gain transparency on OSS usage and reach OSS compliance in your project.

[[oss-compliance.asciidoc_preface]]
== Preface

devonfw, as most Java software, makes strong use of Open Source Software (OSS). It is using about 150 OSS products on the server only and on the client even more. Using a platform like devonfw to develop your own custom solution requires handling contained OSS correctly, i.e acting _OSS-compliant_.

Please read the Open Source policy of your company first, e.g. the https://talent.capgemini.com/media_library/Medias/Common_images/OSS_Policy__Final.pdf[Capgemini OSS Policy] which contains a short, comprehensive and well written explanation on relevant OSS-knowledge. Make sure you:

* understand the copyleft effect and its effect in commercial projects
* understand the 3 license categories: &quot;permissive&quot;, &quot;weak copyleft&quot; and &quot;strong copyleft&quot;
* know prominent license types as e.g. &quot;Apache-2.0&quot; or GPL-3.0&quot; and what copyleft-category they are in
* are aware that some OSS offer dual/multi-licenses
* Understand that OSS libraries often come with sub-dependencies of other OSS carrying licenses themselves

To define sufficient OSS compliance measures, contact your IP officer or legal team as early as possible, especially if you develop software for clients.

[[oss-compliance.asciidoc_obligations-when-using-oss]]
== Obligations when using OSS

If you create a custom solution containing OSS, this in legal sense is a &quot;derived&quot; work. If you distribute your derived work to your business client or any other legal entity in binary packaged form, the license obligations of contained OSS get into effect. Ignoring these leads to a license infringement which can create high damage.

To carefully handle these obligations you must:

* maintain an OSS inventory (to gain transparency on OSS usage and used licenses)
* check license conformity depending on usage/distribution in a commercial scenario
* check license compatibility between used OSS-licenses
* fulfill obligations defined by the OSS-licenses

Obligations need to be checked per license. Frequent obligations are:

* deliver the license terms of all used versions of the OSS licenses
* not to change any copyright statements or warranty exclusions contained in the used OSS components
* deliver the source code of the OSS components (e.g. on a data carrier)
* when modifying OSS, track any source code modification (including date and name of the employee/company)
* display OSS license notice in a user frontend (if any)
* other obligations depending on individual license

[[oss-compliance.asciidoc_automate-oss-handling]]
== Automate OSS handling

Carefully judging the OSS usage in your project is a MANUAL activity! However, collecting OSS information and fulfilling license obligations should be automated as much as possible. A prominent professional tool to automate OSS compliance is the commercial software &quot;Black Duck&quot;. Unfortunately it is rather expensive - either purchased or used as SaaS.

The most recommended lightweight tooling is a combination of Maven plugins. We will mainly use the http://www.mojohaus.org/license-maven-plugin/[Mojo Maven License Plugin].

[[oss-compliance.asciidoc_configure-the-mojo-maven-license-plugin]]
== Configure the Mojo Maven License Plugin

You can use it from command line but this will limit the ability to sustainably configure it (shown later).
Therefore we add it permanently as a build-plugin to the project parent-pom like this (already contained in OASP-parent-pom):

[source,xml]
--------
&lt;plugin&gt;
  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
  &lt;artifactId&gt;license-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;1.14&lt;/version&gt;

  &lt;configuration&gt;
    &lt;outputDirectory&gt;${project.build.directory}/generated-resources&lt;/outputDirectory&gt;
    &lt;sortArtifactByName&gt;true&lt;/sortArtifactByName&gt;
    &lt;includeTransitiveDependencies&gt;true&lt;/includeTransitiveDependencies&gt;
    &lt;!-- the &quot;missing file&quot; declares licenses for dependencies that could not be detected automatically --&gt;
    &lt;useMissingFile&gt;true&lt;/useMissingFile&gt;
    &lt;!-- find the &quot;missing files&quot; in all child-projects at the following location --&gt;
    &lt;missingFile&gt;src/license/THIRD-PARTY.properties&lt;/missingFile&gt;
    &lt;!-- if the &quot;missing files&quot; are not yet existing in child-projects they will be created automatically --&gt;
    &lt;failOnMissing&gt;false&lt;/failOnMissing&gt;
    &lt;overrideFile&gt;src/license/override-THIRD-PARTY.properties&lt;/overrideFile&gt;
    &lt;!-- harmonize different ways of writing license names --&gt;
    &lt;licenseMerges&gt;
      &lt;licenseMerge&gt;Apache-2.0|Apache 2.0&lt;/licenseMerge&gt;
      &lt;licenseMerge&gt;Apache-2.0|Apache License, Version 2.0&lt;/licenseMerge&gt;
      &lt;licenseMerge&gt;Apache-2.0|Apache Software License, Version 2.0&lt;/licenseMerge&gt;
      &lt;licenseMerge&gt;Apache-2.0|The Apache Software License, Version 2.0&lt;/licenseMerge&gt;
    &lt;/licenseMerges&gt;
    &lt;encoding&gt;utf-8&lt;/encoding&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;
--------

In the config above there are several settings that help to permanently improve the result of an automated OSS scan. We explain these now.

[[oss-compliance.asciidoc_declare-additional-licenses]]
=== Declare additional licenses

Sometimes the licenses of used OSS cannot be resolved automatically. That is not the mistake of the maven-license-tool, but the mistake of the OSS author who didn&apos;t make the respective license-information properly available.

Declare additional licenses in a &quot;missing file&quot; within _each_ maven-subproject: /src/license/THIRD-PARTY.properties.

[source,xml]
--------
# Generated by org.codehaus.mojo.license.AddThirdPartyMojo
#-------------------------------------------------------------------------------
# Already used licenses in project :
# - ASF 2.0
# - Apache 2
...
#-------------------------------------------------------------------------------
# Please fill the missing licenses for dependencies :
...
dom4j--dom4j--1.6.1=BSD 3-Clause
javax.servlet--jstl--1.2=CDDL
...
--------

In case the use of &quot;missing files&quot; is activated, but the THIRD-PARTY.properties-file is not yet existing, the first run of an &quot;aggregate-add-third-party&quot; goal (see below) will fail. Luckily the license-plugin just helped us and created the properties-files automatically (in each maven-subproject) and prefilled it with:

* a list of all detected licenses within the maven project
* all OSS libraries where a license could not be detected automatically.

You now need to fill in missing license information and rerun the plugin.

[[oss-compliance.asciidoc_redefine-wrongly-detected-licenses]]
=== Redefine wrongly detected licenses

In case automatically detected licenses proof to be wrong by closer investigation, this wrong detection can be overwritten. Add a configuration to declare alternative licenses within each maven-subproject: /src/license/override-THIRD-PARTY.properties

[source,xml]
--------
com.sun.mail--javax.mail--1.5.6=Common Development and Distribution License 1.1
--------

This can be also be useful for OSS that provides a multi-license to make a decision which license to actually choose .

[[oss-compliance.asciidoc_merge-licenses]]
=== Merge licenses

You will see that many prominent licenses come in all sorts of notations, e.g. Apache-2.0 as: &quot;Apache 2&quot; or &quot;ASL-2.0&quot; or &quot;The Apache License, Version 2.0&quot;. The Mojo Maven License Plugin allows to harmonize different forms of a license-naming like this:

[source,xml]
--------
    &lt;!-- harmonize different ways of writing license names --&gt;
    &lt;licenseMerges&gt;
      &lt;licenseMerge&gt;Apache-2.0|Apache 2.0&lt;/licenseMerge&gt;
      &lt;licenseMerge&gt;Apache-2.0|Apache License, Version 2.0&lt;/licenseMerge&gt;
      &lt;licenseMerge&gt;Apache-2.0|Apache Software License, Version 2.0&lt;/licenseMerge&gt;
      &lt;licenseMerge&gt;Apache-2.0|The Apache Software License, Version 2.0&lt;/licenseMerge&gt;
    &lt;/licenseMerges&gt;
--------

License-names will be harmonized in the OSS report to one common term. We propose to harmonize to short-license-IDs defined by the https://spdx.org/[SPDX] standard.

[[oss-compliance.asciidoc_retrieve-licenses-list]]
== Retrieve licenses list

For a quick initial judgement of OSS license situation run the following maven command from command line:

[source,bash]
--------
$ mvn license:license-list
--------

You receive the summary list of all used OSS licenses on the cmd-out.

[[oss-compliance.asciidoc_create-an-oss-inventory]]
== Create an OSS inventory

To create an OSS inventory means to report on the overall bill of material of used OSS and corresponding licenses.
Within the parent project, run the following maven goal from command line.

[source,bash]
--------
$ mvn license:aggregate-download-licenses -Dlicense.excludedScopes=test,provided
--------

Running the aggregate-download-licenses goal creates two results.

. a license.xml that contains all used OSS dependencies (even sub-dependencies) with respective license information
. puts all used OSS-license-texts as html files into folder target/generated resources

Carefully validate and judge the outcome of the license list. It is recommended to copy the license.xml to the project documentation and hand it over to your client. You may also import it into a spreadsheet to get a better overview.

[[oss-compliance.asciidoc_create-a-third-party-file]]
== Create a THIRD PARTY file

Within Java software it is a common practice to add a &quot;THIRD-PARTY&quot; text file to the distribution. Contained is a summary-list of all used OSS and respective licenses. This can also be achieved with the Mojo Maven License Plugin.

Within the parent project, run the following maven goal from command line.

[source,bash]
--------
$ mvn license:aggregate-add-third-party -Dlicense.excludedScopes=test,provided
--------

Find the THIRD-PARTY.txt in the folder: target\generated-resources. The goal aggregate-add-third-party also profits from configuration as outlined above.

[[oss-compliance.asciidoc_download-and-package-oss-sourcecode]]
== Download and package OSS SourceCode

Some OSS licenses require handing over the OSS source code which is packaged with your custom software to the client the solution is distributed to. It is a good practice to hand over the source code of _all_ used OSS to your client. Collecting all source code can be accomplished by another Maven plugin: Apache Maven Dependency Plugin.

It downloads all OSS Source Jars into the folder: \target\sources across the parent and all child maven projects.

You configure the plugin like this:

[source,xml]
--------
&lt;plugin&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;
  &lt;version&gt;3.0.2&lt;/version&gt;

  &lt;configuration&gt;
    &lt;classifier&gt;sources&lt;/classifier&gt;
    &lt;failOnMissingClassifierArtifact&gt;false&lt;/failOnMissingClassifierArtifact&gt;
    &lt;outputDirectory&gt;${project.build.directory}/sources&lt;/outputDirectory&gt;
  &lt;/configuration&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;src-dependencies&lt;/id&gt;
      &lt;phase&gt;package&lt;/phase&gt;
      &lt;goals&gt;
        &lt;!-- use unpack-dependencies instead if you want to explode the sources --&gt;
        &lt;goal&gt;copy-dependencies&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;
--------

You run the plugin from command line like this:

[source,bash]
--------
$ mvn dependency:copy-dependencies -Dclassifier=sources
--------

The plugin provides another goal that also unzips the jars, which is not recommended, since contents get mixed up.

Deliver the OSS source jars to your client with the release of your custom solution. This has been done physically - e.g. on DVD.

[[oss-compliance.asciidoc_handle-oss-within-ci-process]]
== Handle OSS within CI-process

To automate OSS handling in the regular build-process (which is not recommended to start with) you may declare the following executions and goals in your maven-configuration:

[source,xml]
--------
&lt;plugin&gt;
  ...

  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;aggregate-add-third-party&lt;/id&gt;
      &lt;phase&gt;generate-resources&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;aggregate-add-third-party&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;

    &lt;execution&gt;
      &lt;id&gt;aggregate-download-licenses&lt;/id&gt;
      &lt;phase&gt;generate-resources&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;aggregate-download-licenses&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;
--------

Note that the build may fail in case the OSS information was not complete. Check the build-output to understand and resolve the issue - like e.g. add missing license information in the &quot;missing file&quot;.

:leveloffset: 3

:leveloffset: 3

:leveloffset: 0

[[master-release-notes.asciidoc]]
= Release Notes

:leveloffset: 1

:toc: macro
toc::[]


:doctype: book
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing


[[release-notes-version-2020.04.asciidoc]]
= devonfw Release notes 2020.04

[[release-notes-version-2020.04.asciidoc_introduction]]
== Introduction

We are proud to announce the immediate release of devonfw version 2020.04. This version is the first one with the new versioning that will make easier to the community to identify when it was released since we use the year and month as many other software distributions.

This release includes lots of bug fixes and many version updates, but it is very important to highlight the following improvements:

* New devonfw IDE auto-configure project feature.
* Improved devonfw IDE plugin configuration.
* New devon4j kafka module.
* New devon4j JWT module.
* New devon4j authorization of batches feature.
* Dozer replaced with Orika in devon4j.
* Support for composite keys in devon4j and CobiGen.
* Multiple enhancements for project specific plugin development and usage of project specific template sets in CobiGen.
* Ability to adapt your own templates by making use of CobiGen CLI.
* Better responsiveness in eclipse and bugfixes in all assets in CobiGen.
* devon4ng updated to Angular 9, NgRx 9 and Ionic 5, including documentation, samples and templates.
* Yarn 2 support in devon4ng.
* devon4node updated to NestJS 7 (packages, samples and documentation)
* devon4node TSLint replaced with ESLint.
* @devon4node/config package added.
* devon4net updated to latest .NET Core 3.1.3 LTS version.
* Update of the Production Line templates for devonfw projects in devonfw shop floor.
* New merge feature included in the devonfw shop floor cicdgen tool.
* Updated sonar-devon4j-plugin:
    ** Improved coloring and other visual cues to our rule descriptions to highlight good and bad code examples.
	** Improved the locations of issues thrown on method- and class-level.

Please check the detailed list below.

This would have not been possible without the commitment and hard work of the devonfw core team, German, Indian and ADCenter Valencia colleagues and collaborators as, among many others, the Production Line team.

[[release-notes-version-2020.04.asciidoc_devonfw-ide]]
== devonfw IDE

The consolidated list of features for this devonfw IDE release is as it follows.

[[release-notes-version-2020.04.asciidoc_2020.04.001]]
=== 2020.04.001

Starting with this release we have changed the versioning schema in `devonfw` to `yyyy.mm.NNN` where `yyyy.mm` is the date of the planned milestone release and `NNN` is a running number increased with every bug- or security-fix update.

* https://github.com/devonfw/ide/issues/394[#394] variable from devon.properties not set if not terminated with newline
* https://github.com/devonfw/ide/issues/399[#399] launching of Intellij fails with No such file or directory error.
* https://github.com/devonfw/ide/issues/371[#371] Eclipse plugin installation broke
* https://github.com/devonfw/ide/issues/390[#390] maven get/set-version buggy
* https://github.com/devonfw/ide/issues/397[#397] migration support for devon4j 2020.04.001
* https://github.com/devonfw/ide/pull/400[#400] allow custom args for release

The full list of changes for this release can be found in https://github.com/devonfw/ide/milestone/9?closed=1[milestone 2020.04.001].

[[release-notes-version-2020.04.asciidoc_3.3.1]]
=== 3.3.1

New release with bugfixes and new ide plugin feature:

* https://github.com/devonfw/ide/issues/343[#343]: Setup can&apos;t find Bash nor Git
* https://github.com/devonfw/ide/issues/369[#369]: Fix flattening of POMs
* https://github.com/devonfw/ide/pull/386[#386]: Feature/clone recursive
* https://github.com/devonfw/ide/issues/379[#379]: Use own extensions folder in devonfw-ide
* https://github.com/devonfw/ide/pull/381[#381]: Add ability to configure VS Code plugins via settings
* https://github.com/devonfw/ide/issues/376[#376]: Improve Eclipse plugin configuration
* https://github.com/devonfw/ide/pull/373[#373]: Fix project import on windows
* https://github.com/devonfw/ide/pull/374[#374]: Rework build on import

The full list of changes for this release can be found in https://github.com/devonfw/ide/milestone/10?closed=1[milestone 3.3.1].

[[release-notes-version-2020.04.asciidoc_3.3.0]]
=== 3.3.0

New release with bugfixes and new project import feature:

* https://github.com/devonfw/ide/pull/343[#343]: Detect non-admin GitForWindows and Cygwin
* https://github.com/devonfw/ide/issues/175[#175]: Ability to clone projects and import into Eclipse automatically
* https://github.com/devonfw/ide/issues/346[#346]: devon eclipse add-plugin parameters swapped
* https://github.com/devonfw/ide/issues/363[#363]: devon ide update does not pull latest project settings
* https://github.com/devonfw/ide/pull/366[#366]: update java versions to latest fix releases

The full list of changes for this release can be found in https://github.com/devonfw/ide/milestone/5?closed=1[milestone 3.3.0].

[[release-notes-version-2020.04.asciidoc_devon4j]]
== devon4j

The consolidated list of features for this devon4j release is as it follows.

[[release-notes-version-2020.04.asciidoc_2020.04.001]]
=== 2020.04.001

Starting with this release we have changed the versioning schema in `devonfw` to `yyyy.mm.NNN` where `yyyy.mm` is the date of the planned milestone release and `NNN` is a running number increased with every bug- or security-fix update.

The following changes have been incorporated in devon4j:

* https://github.com/devonfw/devon4j/pull/233[#233]: Various version updates
* https://github.com/devonfw/devon4j/issues/241[#241]: Add module to support JWT and parts of OAuth
* https://github.com/devonfw/devon4j/issues/147[#147]: Switch from dozer to orika
* https://github.com/devonfw/devon4j/pull/180[#180]: Cleanup archtype
* https://github.com/devonfw/devon4j/pull/240[#240]: Add unreferenced guides
* https://github.com/devonfw/devon4j/issues/202[#202]: Architecture documentation needs update for components
* https://github.com/devonfw/devon4j/issues/145[#145]: Add a microservices article in the documentation
* https://github.com/devonfw/devon4j/issues/198[#198]: Deploy SNAPSHOTs to OSSRH in travis CI
* https://github.com/devonfw/devon4j/issues/90[#90]: Authorization of batches
* https://github.com/devonfw/devon4j/pull/221[#221]: Wrote monitoring guide
* https://github.com/devonfw/devon4j/pull/213[#213]: Document logging of custom field in json
* https://github.com/devonfw/devon4j/issues/138[#138]: Remove deprecated RevisionMetadata[Type]
* https://github.com/devonfw/devon4j/issues/211[#211]: Archetype: security config broken
* https://github.com/devonfw/devon4j/issues/109[#109]: LoginController not following devon4j to use JAX-RS but uses spring-webmvc instead
* https://github.com/devonfw/devon4j/issues/52[#52]: Improve configuration
* https://github.com/devonfw/devon4j/issues/39[#39]: Ability to log custom fields via SLF4J
* https://github.com/devonfw/devon4j/issues/204[#204]: Slf4j version
* https://github.com/devonfw/devon4j/issues/190[#190]: Rework of spring-batch integration
* https://github.com/devonfw/devon4j/pull/210[#210]: Rework documentation for blob support
* https://github.com/devonfw/devon4j/pull/191[#191]: Rework of devon4j-batch module
* https://github.com/devonfw/devon4j/pull/209[#209]: Include performance info in separate fields
* https://github.com/devonfw/devon4j/pull/207[#207]: Use more specific exception for not found entity
* https://github.com/devonfw/devon4j/pull/208[#208]: Remove unnecesary clone
* https://github.com/devonfw/devon4j/issues/116[#116]: Bug in JSON Mapping for ZonedDateTime
* https://github.com/devonfw/devon4j/pull/184[#184]: Fixed BOMs so devon4j and archetype can be used again
* https://github.com/devonfw/devon4j/issues/183[#183]: Error in executing the project created with devon4j
* https://github.com/devonfw/devon4j/issues/177[#177]: Switch to new maven-parent
* https://github.com/devonfw/devon4j/pull/169[169]: Provide a reason, why unchecked exceptions are used in devon4j

Documentation is available at https://repo.maven.apache.org/maven2/com/devonfw/java/doc/devon4j-doc/2020.04.001/devon4j-doc-2020.04.001.pdf[devon4j guide 2020.04.001].
The full list of changes for this release can be found in https://github.com/devonfw/devon4j/milestone/8?closed=1[milestone devon4j 2020.04.001].

[[release-notes-version-2020.04.asciidoc_devon4ng]]
== devon4ng

The consolidated list of features for this devon4ng release is as it follows.

[[release-notes-version-2020.04.asciidoc_2020.04.001]]
=== 2020.04.001

Starting with this release we have changed the versioning schema in `devonfw` to `yyyy.mm.NNN` where `yyyy.mm` is the date of the planned milestone release and `NNN` is a running number increased with every bug- or security-fix update.

* https://github.com/devonfw/devon4ng/pull/111[#111]: Yarn 2 support included
* https://github.com/devonfw/devon4ng/pull/96[#96]: devon4ng upgrade to Angular 9
  ** Templates and samples updated to Angular 9, NgRx 9 and Ionic 5.
  ** New internationalization module.
  ** Documentation updates and improvements.
* https://github.com/devonfw/devon4ng/pull/95[#95]: Added token management info in documentation

[[release-notes-version-2020.04.asciidoc_devon4net]]
== devon4net

The consolidated list of features for this devon4net release is as it follows:

* Updated to latest .NET Core 3.1.3 LTS version
* Dependency Injection Autoregistration for services and repositories
* Added multiple role managing claims in JWT
* Added custom headers to circuit breaker
* Reviewed default log configuration
* Added support to order query results from database via lambda expression
* Updated template and nuget packages

[[release-notes-version-2020.04.asciidoc_devon4node]]
== devon4node

The consolidated list of features for this devon4node release is as it follows:

* Upgrade to NestJS 7 (packages, samples and documentation)
* TSLint replaced with ESLint
* Add lerna to project to manage all the packages
* Add @devon4node/config package
* Add new schematics: Repository
* Improve WinstonLogger
* Improve documentation
* Update dependencies to latest versions

[[release-notes-version-2020.04.asciidoc_cobigen]]
== CobiGen

New release with updates and bugfixes:

* devonfw templates:
    ** https://github.com/devonfw/cobigen/issues/1063[#1063]: Upgrade devon4ng Ionic template to latest version
    ** https://github.com/devonfw/cobigen/pull/1065[#1065]: devon4ng templates for devon4node
    ** https://github.com/devonfw/cobigen/pull/1128[#1128]: update java templates for composite keys
    ** https://github.com/devonfw/cobigen/issues/1130[#1130]: Update template for devon4ng application template
    ** https://github.com/devonfw/cobigen/issues/1131[#1131]: Update template for devon4ng NgRx template
    ** https://github.com/devonfw/cobigen/pull/1139[#1149]: .NET templates
    ** https://github.com/devonfw/cobigen/pull/1146[#1146]: Dev ionic template update bug fix
* TypeScript plugin:
    ** https://github.com/devonfw/cobigen/issues/1126[#1126]: OpenApi parse/merge issues (ionic List templates)
* Eclipse plugin:
    ** https://github.com/devonfw/cobigen/issues/412[#412]: Write UI Test for HealthCheck use
    ** https://github.com/devonfw/cobigen/issues/867[#867]: Cobigen processbar
    ** https://github.com/devonfw/cobigen/pull/1069[#1069]: #953 dot path
    ** https://github.com/devonfw/cobigen/issues/1099[#1099]: NPE on HealthCheck
    ** https://github.com/devonfw/cobigen/pull/1100[#1100]: 1099 NPE on health check
    ** https://github.com/devonfw/cobigen/pull/1101[#1101]: #867 fix import of core and api
    ** https://github.com/devonfw/cobigen/issues/1102[#1102]: eclipse_plugin doesn&apos;t accept folders as input
    ** https://github.com/devonfw/cobigen/pull/1134[#1134]: (Eclipse-Plugin) Resolve Template utility classes from core
    ** https://github.com/devonfw/cobigen/pull/1142[#1142]: #1102 accept all kinds of input
* CobiGen core:
    ** https://github.com/devonfw/cobigen/issues/429[#429]: Reference external template files
    ** https://github.com/devonfw/cobigen/pull/1143[#1143]: Abort generation if external trigger does not match
    ** https://github.com/devonfw/cobigen/issues/1125[#1125]: Generation of templates from external increments does not work
    ** https://github.com/devonfw/cobigen/issues/747[#747]: Variable assignment for external increments throws exception
    ** https://github.com/devonfw/cobigen/pull/1133[#1133]: Bugfix/1125 generation of templates from external increments does not work
    ** https://github.com/devonfw/cobigen/pull/1127[#1127]: #1119 added new TemplatesUtilsClassesUtil class to core
    ** https://github.com/devonfw/cobigen/issues/953[#953]: NPE bug if foldername contains a dot
    ** https://github.com/devonfw/cobigen/pull/1067[#1067]: Feature/158 lat variables syntax
* CobiGen CLI:
    ** https://github.com/devonfw/cobigen/issues/1111[#1111]: Infinity loop in mmm-code (MavenDependencyCollector.collectWithReactor)
    ** https://github.com/devonfw/cobigen/issues/1113[#1113]: cobigen-cli does not seem to properly resolve classes from dependencies
    ** https://github.com/devonfw/cobigen/pull/1120[#1120]: Feature #1108 custom templates folder
    ** https://github.com/devonfw/cobigen/pull/1115[#1115]: Fixing CLI bugs related to dependencies and custom templates jar
    ** https://github.com/devonfw/cobigen/issues/1108[#1108]: CobiGen CLI: Allow easy use of user&apos;s templates
    ** https://github.com/devonfw/cobigen/issues/1110[#1110]: FileSystemNotFoundException blocking cobigen-cli
    ** https://github.com/devonfw/cobigen/pull/1138[#1138]: #1108 dev cli feature custom templates folder
    ** https://github.com/devonfw/cobigen/pull/1136[#1136]: (Cobigen-CLI) Resolve Template utility classes from core

[[release-notes-version-2020.04.asciidoc_devonfw-shop-floor]]
== devonfw-shop-floor

* Add documentation for deploy jenkins slaves
* Improve documentation
* Add devon4net Openshift template
* Add nginx docker image for devon4ng
* Add Openshift provisioning
* Production Line:
    ** Updated MTS template: add step for dependency check and change the deployment method
    ** Add template utils: initialize instance, openshift configuration, docker configuration and install sonar plugin
    ** Add devon4net template
    ** Add from existing template
    ** Improve documentation
    ** Refactor the documentation in order to follow the devonfw wiki workflow
    ** Update devon4j, devon4ng, devon4net and devon4node in order to be able to choose the deployment method: none, docker or openshift.
    ** Update the tools version in order to use the latest.
* Production Line Shared Lib
    ** Add more fuctionality to the existing classes.
    ** Add classes: DependencyCheckConfiguration, DockerConfiguration and OpenshiftConfiguration
* CICDGEN
    ** Add devon4net support
    ** Update tools versions in Jenkinsfiles to align with Production Line templates
    ** Add merge strategies: error, keep, override, combine
    ** Add lerna to the project
    ** Minor improvements in the code
    ** Add GitHub actions workflow to validate the new changes
    ** Improve documentation
    ** Breaking changes:
        *** Remove the following parameters: plurl, ocurl
        *** Add the following parameters: dockerurl, dockercertid, registryurl, ocname and merge

[[release-notes-version-2020.04.asciidoc_sonar-devon4j-plugin]]
== Sonar devon4j plugin

The consolidated list of features for this Sonar devon4j plugin release is as it follows.

[[release-notes-version-2020.04.asciidoc_2020.04.001]]
=== 2020.04.001

This is the first version using our new versioning scheme. Here, the following issues were resolved:

* https://github.com/devonfw/sonar-devon4j-plugin/issues/60[#60]: Fixed a bug in the naming check for Use-Case implementation classes
* https://github.com/devonfw/sonar-devon4j-plugin/issues/67[#67]: Fixed a bug where the whole body of a method or a class was marked as the issue location. Now only the method / class headers will be highlighted.
* https://github.com/devonfw/sonar-devon4j-plugin/issues/68[#68]: Made our rule descriptions more accessible by using better readable colors as well as alternative visual cues
* https://github.com/devonfw/sonar-devon4j-plugin/issues/71[#71]: Fixed a bug where a NPE could be thrown
* https://github.com/devonfw/sonar-devon4j-plugin/issues/74[#74]: Fixed a bug where a method always returned null

Unrelated to any specific issues, there was some refactoring and cleaning up done with the following two PRs:

* https://github.com/devonfw/sonar-devon4j-plugin/issues/66[PR #66]: Refactored the prefixes of our rule names from &apos;Devon&apos; to &apos;devonfw&apos;
* https://github.com/devonfw/sonar-devon4j-plugin/issues/65[PR #65]: Sorted security-related test files into their own package

Changes for this release can be found in https://github.com/devonfw/sonar-devon4j-plugin/milestone/3?closed=1[milestone 2020.04.001].

[[release-notes-version-2020.04.asciidoc_my-thai-star]]
== My Thai Star

As always, our reference application, My Thai Star, contains some interesting improvements that come from the new features and bug fixes from the other assets. The list is as it follows:

* devon4j - Java
    ** Implement example batches with modified devon-batch
    ** Upgrade spring boot version to 2.2.6 and devon4j 2020.004.001
    ** Migrate from dozer to orika
* devon4ng - Angular
    ** Move configuration to NgRx store
* devonfw shop floor - Jenkins
    ** Update tools versions in order to align with Production Line templates
    ** Add dependency check step (using dependency checker and yarn audit)
    ** Send dependency checker reports to SonarQube
    ** Changed deployment pipelines. Now pipelines are able to deploy docker containers using docker directly. No more ssh connections to execute commands in a remote machine are required.
    ** Update documentation in order to reflect all changes
* devon4nde - Node.js
    ** Upgrade to NestJS 7
    ** Add custom repositories
    ** Add exceptions and exception filters
    ** Add tests (missing in the previous version)
    ** Split logic into use cases in order to make the test process easier
    ** Minor patches and improvemets
    ** Documentation updated in order to reflect the new implementation

:leveloffset: 3

:leveloffset: 1

:toc: macro
toc::[]


:doctype: book
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing


[[release-notes-version-3.2.asciidoc]]
= devonfw Release notes 3.2 &#x201C;Homer&#x201D;


[[release-notes-version-3.2.asciidoc_introduction]]
== Introduction

We are proud to announce the immediate release of devonfw version 3.2 (code named &#x201C;Homer&#x201D; during development). This version is the first one that contains the **new devonfw IDE** by default, so there is no need to download a huge ZIP with the whole distribution regardless of the use to which it will be put. The new devonfw IDE CLI will allow any user to setup a customized development environment completely configured with access to all the devonfw features, frameworks and tools. As we access to the official IDEs this is also the first version macOS compatible.

This release consolidates the documentation workflow adding the contents dynamically to the new devonfw website at the same time the PDF is generated. This have been achieved using a new GitHub action that takes the contents and builds the HTML files for the documentation section of the website. The documentation workflow proposed in the following picture is now complete:

image::images/documentation_workflow.png[link=&quot;images/documentation_workflow.png&quot;]

This release also includes the **first version of devon4node**. We consider that node.js should be a first-class citizen inside the devonfw platform and for that reason we have included the latest development technologies for this ecosystem. The devon4node CLI, schematics and other tools will allow our users to create powerful node.js applications with the same philosophy you may find in the other languages and frameworks included. More information at its section below.

The new **devon4net 3.2.0 version** is also included in this release. Based on the .NET Core 3.0 and containing lots of new features gathered from important and recent projects, it represents a great improvement and an intermediate step to provide support for the incoming .NET Core 3.1 LTS. More information at its section below.

This release includes the final version of the **new CobiGen CLI** and completely integrated with the new devonfw IDE. Now using commands, you will be able to generate code the same way as you do with Eclipse. This means that you can use CobiGen on other IDEs like Visual Studio Code or IntelliJ. Besides the Update command has been implemented. Now you will be able to update easily all your CobiGen plug-ins and templates inside the CLI.

On the other hand, the refactoring process has been completely developed, improving the mergers and including input readers for any other languages and frameworks, allowing the creation of models to generate code from them. Last, but not least, this new version includes the new templates for devon4net, devon4ng and devon4j generation.

And as always, **My Thai Star** has been updated to the latest versions of devon4j, devon4node and devon4net including completely State Management with NgRx in its devon4ng implementation upgrade.

This is the last release with the current semantic versioning number and without a fixed release calendar. From now on the new devonfw releases will happen in April, August and December and will be named **YYYY.MM.NN**, being the first release of the next year the 2020.04.00.

[[release-notes-version-3.2.asciidoc_changes-and-new-features]]
== Changes and new features

[[release-notes-version-3.2.asciidoc_devonfw-ide]]
=== devonfw-ide

We have entirely rewritten our automated solution for your local IDE (integrated desktop environment). The former oasp4j-ide and devonfw distributions with their extra-large gigabyte zip files are not entirely replaced with devonfw-ide. This new solution is provided as a small *.tar.gz file that is publicly available. It works on all platforms and has been tested on Windows, MacOS, and Linux. After extraction you only need to run a `setup` script. Here you provide a settings git URL for your customer project or simply hit return for testing or small projects. After reading and confirming the terms of use it will download all required tools in the proper versions for your operating system and configure them. Instead of various confusing scripts there is now only one CLI command `devon` for all use-cases what gives a much better user experience.

To get started go to the https://github.com/devonfw/ide/blob/master/documentation/Home.asciidoc#devon-ide[home page]. There is even a https://github.com/devonfw/ide/blob/master/documentation/migration-from-devonfw-3.0.0-or-lower.asciidoc#migration-from-oasp4j-ide[migration-guide] if you are currently used to the old approach and want to quickly jump into the new solution.

[[release-notes-version-3.2.asciidoc_my-thai-star-sample-application]]
=== My Thai Star Sample Application

The new release of My Thai Star has focused on the following improvements:

* Release 3.2.0.
* devon4j:
** devon4j 3.2.0 integrated.
** Spring Boot 2.1.9 integrated.
** SAP 4/HANA prediction use case.
** Bug fixes.
* devon4ng:
** SAP 4/HANA prediction use case.
** 2FA toggleable (two factor authentication).
** NgRx full integrated (PR #285).
* devon4net
** devon4net for dotnet core 3.0 updated
** Updated the API contract compatible with the other stacks
** JWT implementation reviewed to increase security
** ASP.NET user database dependencies removed
** HTTP2 support
** Clearer CRUD pattern implementation
* devon4node
** TypeScript 3.6.3.
** Based on Nest framework.
** Configuration Module
** Added cors and security headers
** Added mailer module and email templates.
** Built in winston logger
** Custom ClassSerializerInterceptor
* MrChecker
** Example cases for end-to-end test.
** Production line configuration.
* CICD
** Improved integration with Production Line
** New Traefik load balancer and reverse proxy
** New deployment from artifact
** New CICD pipelines
** New deployment pipelines
** Automated creation of pipelines in Jenkins

[[release-notes-version-3.2.asciidoc_documentation-updates]]
=== Documentation updates

This release addresses the new documentation workflow, being now possible to keep the documentation synced with any change. The new documentation includes the following contents:

* Getting started
* devonfw ide
* devon4j documentation
* devon4ng documentation
* devon4net documentation
* devon4node documentation
* CobiGen documentation
* devonfw-shop-floor documentation
* cicdgen documentation
* devonfw testing with MrChecker
* My Thai Star documentation
* Contribution guide
* Release notes

[[release-notes-version-3.2.asciidoc_devon4j]]
=== devon4j

The following changes have been incorporated in devon4j:

* Completed full support from Java8 to Java11
* Several security fixes
* Upgrade to Spring Boot 2.1.9
* Upgrade to Spring 5.1.8
* Upgrade to JUnit 5 (requires migration via devonfw-ide)
* Improved JPA support for IdRef
* Improved auditing metadata support
* Many improvements to documentation (added JDK guide, architecture-mapping, JMS, etc.)
* For all details see https://github.com/devonfw/devon4j/milestone/6?closed=1[milestone].

[[release-notes-version-3.2.asciidoc_devon4ng]]
=== devon4ng

The following changes have been incorporated in devon4ng:

* Angular CLI 8.3.1,
* Angular 8.2.11,
* Angular Material 8.2.3,
* Ionic 4.11.1,
* Capacitor 1.2.1 as Cordova replacement,
* NgRx 8.3 support for State Management,
* devon4ng Angular application template updated to Angular 8.2.11 with visual improvements and bugfixes https://github.com/devonfw/devon4ng-application-template
* devon4ng Ionic application template updated to 4.11.1 and improved https://github.com/devonfw/devon4ng-ionic-application-template
* Improved devon4ng Angular application template with state management using Angular 8 and NgRx 8 https://github.com/devonfw/devon4ng-ngrx-template
* Documentation and samples updated to latest versions:
** Web Components with Angular Elements
** Initial configuration with App Initializer pattern
** Error Handling
** PWA with Angular and Ionic
** Lazy Loading
** Library construction
** Layout with Angular Material
** Theming with Angular Material

[[release-notes-version-3.2.asciidoc_devon4net]]
=== devon4net

The following changes have been incorporated in devon4net:

* Updated to latest .net core 3.0 version

* Template
** Global configuration automated. devon4net can be instantiated on any .net core application template with no effort
** Added support for HTTP2
** Number of libraries minimized
** Architecture layer review. More clear and scalable
** Added red button functionality (aka killswitch) to stop attending API request with custom error
** Improved API error management
** Added support to only accept request from clients with a specific client certificate on Kestrel server. Special thanks to Bart Roozendaal (Capgemini NL)
** All components use IOptions pattern to be set up properly
** Swagger generation compatible with OpenAPI v3
* Modules
** The devon4net netstandard libraries have been updated to netstandard 2.1

** JWT:
*** Added token encryption (token cannot be decrypted anymore by external parties). Now You can choose the encryption algorithm depending on your needs
*** Added support for secret key or certificate encryption
*** Added authorization for swagger portal

** Circuit breaker
*** Added support to bypass certificate validation
*** Added support to use a certificate for https communications using Microsoft&apos;s httpclient factory

** Unit of Work
*** Repository classes unified and reviewed for increasing performance and reduce the consumed memory
*** Added support for different database servers: In memory, Cosmos, MySQL + MariaDB, Firebird, PostgreSQL, Oracle, SQLite, Access, MS Local.

[[release-notes-version-3.2.asciidoc_devon4node]]
=== devon4node

The following changes have been incorporated in devon4node:

* TypeScript 3.6.3.
* Based on Nest framework.
* Complete backend implementation.
* New devon4node CLI. It will provide you some commands
** new: create a new devon4node interactively
** generate: generate code based on schematics
** db: manage the database
* New devon4node schematics
** application: create a new devon4node application
** config-module: add a configuration module to the project
** mailer: install and configure the devon4node mailer module
** typeorm: install TypeORM in the project
** auth-jwt: add users and auth-jwt modules to the project
** swagger: expose an endpoint with the auto-generated swagger
** security: add cors and other security headers to the project.
** crud: create all CRUD for an entity
** entity: create an entity
* New mailer module
* New common library
* Build in winston logger
* Custom ClassSerializerInterceptor
* Extendable base entity
* New application samples


[[release-notes-version-3.2.asciidoc_cobigen]]
=== CobiGen

* CobiGen core new features:
** CobiGen CLI: Update command implemented. Now you will be able to update easily all your CobiGen plug-ins and templates inside the CLI. Please take a look into the https://github.com/devonfw/cobigen/wiki/howto_Cobigen-CLI-generation[documentation] for more info.
*** CobiGen CLI is now JDK11 compatible.
*** CobiGen CLI commandlet for devonfw-ide has been added. You can use it to setup easily your CLI and to run CobiGen related commands.
*** Added a version provider so that you will be able to know all the CobiGen plug-ins versions.
*** Added a process bar when the CLI is downloading the CobiGen plug-ins.
** CobiGen refactoring finished: With this refactoring we have been able to decouple CobiGen completely from the target and input language. This facilitates the creation of parsers and mergers for any language. For more information please take a look https://github.com/devonfw/cobigen/wiki/howto_create-external-plugin[here].
*** New TypeScript input reader: We are now able to parse any TypeScript class and generate code using the parsed information. We currently use https://github.com/typeorm/typeorm/blob/master/docs/entities.md#what-is-entity[TypeORM] entities as a base for generation.
** Improving CobiGen templates:
*** Updated devon4ng-NgRx templates to NgRx 8.
*** Generation of an Angular client using as input a https://github.com/typeorm/typeorm/blob/master/docs/entities.md#what-is-entity[TypeORM] entity. This is possible thanks to the new TypeScript input reader.
*** .Net templates have been upgraded to .Net Core 3.0
** CobiGen for Eclipse is now JDK11 compatible.
** Fixed bugs when adapting templates and other bugs on the CobiGen core.

[[release-notes-version-3.2.asciidoc_devonfw-shop-floor]]
=== devonfw shop floor

* Added devon4ng OpenShift templates
* Added devon4j OpenShift templates
* Added devon4node OpenShift templates
* Added more methods to link https://github.com/devonfw-forge/devon-production-line-shared-lib [devonfw Production Line shared library]
* Updated link: https://github.com/devonfw-forge/devon-production-line[devonfw Production Line templates]

[[release-notes-version-3.2.asciidoc_cicdgen]]
==== cicdgen

* Patched minor bugs

[[release-notes-version-3.2.asciidoc_sonar-devon4j-plugin]]
=== sonar-devon4j-plugin

sonar-devon4j-plugin is a SonarQube plugin for architecture governance of devon4j applications. It verifies the architecture and conventions of devon4j, the Java stack of devonfw. The following changes have been incorporated:
* Plugin was renamed from sonar-devon-plugin to sonar-devon4j-plugin
* Rules/checks have been added to verify naming conventions
* New rule for proper JPA datatype mapping
* Proper tagging of rules as architecture-violation and not as bug, etc.
* Several improvements have been made to prepare the plugin to enter the SonarQube marketplace, what will happen with the very next release.
* Details can be found here: https://github.com/devonfw/sonar-devon4j-plugin/milestone/2?closed=1


:leveloffset: 3

:leveloffset: 1

:toc: macro
toc::[]


:doctype: book
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing


[[release-notes-version-3.1.asciidoc]]
= devonfw Release notes 3.1 &#x201C;Goku&#x201D;


[[release-notes-version-3.1.asciidoc_introduction]]
== Introduction

We are proud to announce the immediate release of devonfw version 3.1 (code named &#x201C;Goku&#x201D; during development). This version is the first one that implements our new documentation workflow, that will allow users to get the updated documentation at any moment and not to wait for the next devonfw release.

This is now possible as we have established a new workflow and rules during development of our assets. The idea behind this is that all the repositories contain a `documentation` folder and, in any pull request, the developer must include the related documentation change. A new Travis CI configuration added to all these repositories will automatically take the changes and publish them in the wiki section of every repository and in the new devonfw-guide repository that consolidates all the changes from all the repositories. Another pipeline will take changes from this consolidated repository and generate dynamically the devonfw guide in PDF and in the next weeks in HTML for the new planned devonfw website. The following schema explains this process:

image::images/documentation_workflow.png[link=&quot;images/documentation_workflow.png&quot;]

This release includes the very first version of the new CobiGen CLI. Now using commands, you will be able to generate code the same way as you do with Eclipse. This means that you can use CobiGen on other IDEs like Visual Studio Code or IntelliJ. Please take a look at https://github.com/devonfw/cobigen/wiki/howto_Cobigen-CLI-generation for more info.

The devonfw-shop-floor project has got a lot of updates in order to make even easier the creation of devonfw projects with CICD pipelines that run on the Production Line, deploy on Red Hat OpenShift Clusters and in general Docker environments. See the details below.

This release includes the very first version of our devonfw-ide tool that will allow users to automate devonfw setup and update the development environment. This tool will become the default devonfw setup tool in future releases. For more information please visit the repository https://github.com/devonfw/devon-ide.

Following the same collaboration model we used in order to improve the integration of devonfw with Red Hat OpenShift and which allowed us to get the Red Hat Open Shift Primed certification, we have been working alongside with SAP HANA developers in order to support this database in the devon4j. This model was based on the contribution and review of pull requests in our reference application My Thai Star. In this case, SAP developers collaborated with us in the following two new use cases:

* Prediction of future demand
* Geospatial analysis and clustering of customers

More info at https://blogs.sap.com/2019/06/17/introducing-devonfw-support-for-sap-hana/.

Last but not least the devonfw extension pack for VS Code has been improved with the latest extensions and helpers for this IDE. Among many others you can now use:

* Remote development on Docker containers and VMs https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack
* Dependency Analysis for maven and npm https://marketplace.visualstudio.com/items?itemName=redhat.fabric8-analytics
* React Native Tools https://marketplace.visualstudio.com/items?itemName=msjsdiag.vscode-react-native
* NgRx Snippets https://marketplace.visualstudio.com/itemdetails?itemName=hardikpthv.NgRxSnippets

Also it is worth the try of the updated support for Java and Spring Boot development in VS Code. Check it out for yourself!

More information at https://marketplace.visualstudio.com/items?itemName=devonfw.devonfw-extension-pack. Also, you can contribute to this extension in this GitHub repository https://github.com/devonfw/devonfw-extension-pack-vscode.

[[release-notes-version-3.1.asciidoc_changes-and-new-features]]
== Changes and new features

[[release-notes-version-3.1.asciidoc_devonfw-dist]]
=== Devonfw dist

* Eclipse 2018.12 integrated
** CheckStyle Plugin updated.
** SonarLint Plugin updated.
** Git Plugin updated.
** FindBugs Plugin updated.
** CobiGen plugin updated.
* Other Software
** Visual Studio Code latest version included and pre-configured with the devonfw Platform Extension Pack.
** Ant updated to latest.
** Maven updated to latest.
** Java updated to latest.
** Nodejs LTS updated to latest.
** @angular/cli included.
** @devonfw/cicdgen included.
** Yarn package manager updated.
** Python3 updated.
** Spyder3 IDE integrated in python3 installation updated.
** devon4ng-application-template for Angular 8 at workspaces/examples
** devon4ng-ionic-application-template for Ionic 4 at workspace/samples


[[release-notes-version-3.1.asciidoc_my-thai-star-sample-application]]
=== My Thai Star Sample Application

The new release of My Thai Star has focused on the following improvements:

* Release 3.1.0.
* devon4j:
** devon4j 3.1.0 integrated.
** Spring Boot 2.1.6 integrated.
** SAP 4/HANA prediction use case.
** Bug fixes.
* devon4ng:
** SAP 4/HANA prediction use case.
** 2FA toggleable (two factor authentication).
** NgRx integration in process (PR #234).
* devon4node
** TypeScript 3.1.3.
** Based on Nest framework.
** Aligned with devon4j.
** Complete backend implementation.
** TypeORM integrated with SQLite database configuration.
** Webpack bundler.
** Nodemon runner.
** Jest unit tests.
* Mr.Checker
** Example cases for end-to-end test.
** Production line configuration.
** CICD
** Improved integration with Production Line
** New Traefik load balancer and reverse proxy
** New deployment from artifact
** New CICD pipelines
** New deployment pipelines
** Automated creation of pipelines in Jenkins

[[release-notes-version-3.1.asciidoc_documentation-updates]]
=== Documentation updates

This release addresses the new documentation workflow, being now possible to keep the documentation synced with any change. The new documentation includes the following contents:

* Getting started
* Contribution guide
* Devcon
* Release notes
* devon4j documentation
* devon4ng documentation
* devon4net documentation
* devonfw-shop-floor documentation
* cicdgen documentation
* devonfw testing with MrChecker
* My Thai Star documentation

[[release-notes-version-3.1.asciidoc_devon4j]]
=== devon4j

The following changes have been incorporated in devon4j:

* Added Support for Java8 up to Java11
* Upgrade to Spring Boot 2.1.6.
* Upgrade to Spring 5.1.8
* Upgrade to JPA 2.2
* Upgrade to Hibernate 5.3
* Upgrade to Dozer 6.4.1 (ATTENTION: Requires Migration, use devon-ide for automatic upgrade)
* Many improvements to documentation (added JDK guide, architecture-mapping, JMS, etc.)
* Completed support (JSON, Beanmapping) for pagination, IdRef, and java.time
* Added MasterCto
* For all details see https://github.com/devonfw/devon4j/milestone/3?closed=1[milestone].

[[release-notes-version-3.1.asciidoc_devon4ng]]
=== devon4ng

The following changes have been incorporated in devon4ng:

* Angular CLI 8,
* Angular 8,
* Angular Material 8,
* Ionic 4,
* Capacitor 1.0 as Cordova replacement,
* NgRx 8 support for State Management,
* devon4ng Angular application template updated to Angular 8 with visual improvements and bugfixes https://github.com/devonfw/devon4ng-application-template
* devon4ng Ionic application template updated and improved https://github.com/devonfw/devon4ng-ionic-application-template
* New devon4ng Angular application template with state management using Angular 8 and NgRx 8 https://github.com/devonfw/devon4ng-ngrx-template
* New devon4ng library https://github.com/devonfw/devon4ng-library that includes the following libraries:
** Cache Module for Angular 7+ projects.
** Authorization Module for Angular 7+ projects.
* New use cases with documentation and samples:
** Web Components with Angular Elements
** Initial configuration with App Initializer pattern
** Error Handling
** PWA with Angular and Ionic
** Lazy Loading
** Library construction
** Layout with Angular Material
** Theming with Angular Material

[[release-notes-version-3.1.asciidoc_devon4net]]
=== devon4net

The following changes have been incorporated in devon4net:

* New circuit breaker component to communicate microservices via HTTP
* Resolved the update packages issue

[[release-notes-version-3.1.asciidoc_appsec-quick-solution-guide]]
=== AppSec Quick Solution Guide

This release incorporates a new Solution Guide for Application Security based on the state of the art in OWASP based application security. The purpose of this guide is to offer quick solutions for common application security issues for all applications based on devonfw. It&#x2019;s often the case that we need our systems to comply to certain sets of security requirements and standards. Each of these requirements needs to be understood, addressed and converted to code or project activity. We want this guide to prevent the wheel from being reinvented over and over again and to give clear hints and solutions to common security problems.

* The wiki can be accessed here: https://github.com/devonfw/devonfw-security/wiki
* The PDF can be accessed here: https://github.com/devonfw/devonfw-security

[[release-notes-version-3.1.asciidoc_cobigen]]
=== CobiGen

* CobiGen core new features:
** CobiGen CLI: New command line interface for CobiGen. Using commands, you will be able to generate code the same way as you do with Eclipse. This means that you can use CobiGen on other IDEs like Visual Studio Code or IntelliJ. Please take a look into the documentation for more info.
*** Performance improves greatly in the CLI thanks to the lack of GUI.
*** You will be able to use path globs for selecting multiple input files.
*** We have implemented a search functionality so that you can easily search for increments or templates.
** First steps taken on CobiGen refactoring: With the new refactoring we will be able to decouple CobiGen completely from the target and input language. This will facilitate the creation of parsers and mergers for any language.
*** NashornJS has been deprecated: It was used for executing JavaScript code inside JVM. With the refactoring, performance has improved on the TypeScript merger.
** Improving CobiGen templates:
*** Removed Covalent from Angular templates as it is not compatible with Angular 8.
*** Added devon4ng-NgRx templates that implement reactive state management. Note: The TypeScript merger is currently being improved in order to accept NgRx. The current templates are set as overridable by default.
*** Test data builder templates now make use of Lambdas and Consumers.
*** CTOs and ETOs increments have been correctly separated.
** TypeScript merger has been improved: Now it is possible to merge comments (like tsdoc) and enums.
** OpenAPI parsing extended to read enums. Also fixed some bugs when no properties were set or when URLs were too short.
** Java static and object initializers now get merged.
** Fixed bugs when downloading and adapting templates.

[[release-notes-version-3.1.asciidoc_devcon]]
=== Devcon

A new version of Devcon has been released. Fixes and new features include:

* Updated to match current devon4j
* Update to download Linux distribution.
* Custom modules creation improvements.
* Code Migration feature added.
* Bugfixes.

[[release-notes-version-3.1.asciidoc_devonfw-oss-modules]]
=== Devonfw OSS Modules

Modules upgraded to be used in new devon4j projects:

* Reporting module
* WinAuth AD Module
* WinAuth SSO Module
* I18n Module
* Async Module
* Integration Module
* Microservice Module
* Compose for Redis Module
See: https://github.com/devonfw/devon/wiki#devonfw-modules

[[release-notes-version-3.1.asciidoc_devonfw-shop-floor]]
=== devonfw shop floor

* Industrialization oriented to configure the provisioning environment provided by Production Line and deploy applications on an OpenShift cluster.
* Added Jenkinsfiles to configure automatically OpenShift environments to deploy devonfw applications.
* Industrialization to start new projects and configure them with CICD.
* Upgrade the documentation with getting started guide to configure CICD in any devonfw project and deploy it.
* Added new tool cicdgen to generate CICD code/files.

[[release-notes-version-3.1.asciidoc_cicdgen]]
==== cicdgen

cicdgen is a devonfw tool to generate all code/files related to CICD in your project. It&apos;s based on angular schematics and it has its own CLI.
More information https://github.com/devonfw/cicdgen[here].

* CICD configuration for devon4j, devon4ng and devon4node projects
* Option to deploy devonfw projects with Docker
* Option to deploy devonfw projects with OpenShift

[[release-notes-version-3.1.asciidoc_devonfw-testing]]
=== Devonfw Testing

[[release-notes-version-3.1.asciidoc_mr.checker]]
==== Mr.Checker

The Mr.Checker Test Framework is an automated testing framework for functional testing of web applications, API web services, Service Virtualization, Security and in coming future native mobile apps, and databases. All modules have tangible examples of how to build resilient integration test cases based on delivered functions. Mr.Checker updates and improvements:

* Examples available under embedded project &#x201C;MrChecker-App-Under-Test&#x201D; and in project wiki: https://github.com/devonfw/devonfw-testing/wiki
* How to install:
** Wiki : https://github.com/devonfw/devonfw-testing/wiki/How-to-install
* Release Note:
** module selenium - 3.8.2.1:
*** possibility to define version of driver in properties.file
*** automatic driver download if the version is not specified
*** possibility to run with different browser options
*** module webAPI &#x2013; 1.2.1:
*** possibility to connect to the remote WireMock server

:leveloffset: 3

:leveloffset: 1

:toc: macro
toc::[]

:doctype: book
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[release-notes-version-3.0.asciidoc]]
= devonfw Release notes 3.0 &#x201C;Fry&#x201D;

[[release-notes-version-3.0.asciidoc_introduction]]
== Introduction

We are proud to announce the immediate release of devonfw version 3.0 (code named &#x201C;Fry&#x201D; during development). This version is the consolidation of Open Source, focused on the major namespace change ever in the platform, removing the OASP references and adopting the new devonfw names for each technical stack or framework.

The new stack names are the following:

* devon4j, former OASP4J, is the new name for Java.
* devon4ng, former OASP4JS, is the new one for Angular.
* devon4net, is the new .NET stack.
* devon4X, is the new stack for Xamarin development.
* devon4node, is the new devonfw incubator for node.js.

The new devon4j version was created directly from the latest oasp4j version (3.0.0). Hence it brings all the features and values that oasp4j offered. However, the namespace migration was used to do some housekeeping and remove deprecated code as well as reduce dependencies. Therefore your data-access layer will no longer have to depend on any third party except for devon4j as well as of course the JPA. We also have improved the application template that now comes with a modern JSON logging ready for docker and logstash based environments.

To help you upgrading we introduced a migration feature in devcon. This can automatically migrate your code from oasp4j (even older versions starting from 2.4.0) to the latest version of devon4j. There might be some small manual changes left to do but 90% of the migration will be done automatically for you.

Besides, the first version of the devonfw plugin for SonarQube has been released. It extends SonarQube with the ability to validate your code according to the devon4j architecture. More details at https://github.com/devonfw/sonar-devon-plugin.

This is the first release that integrates the new devonfw .NET framework, called devon4net, and Xamarin for mobile native development, devon4X. devon4NET and devon4X are the Capgemini standard frameworks for .NET and Xamarin software development. With the two new family members devonfw provides guidance and acceleration for the major software development platforms in our industry. Their interoperability provides you the assurance your multichannel solution will be consistent across web and mobile channels.

&#x201C;Fry&#x201D; release contains lots of improvements in our Mr.Checker E2E Testing Framework, including a complete E2E sample inside our reference application My Thai Star. Besides Mr.Checker, we include as an incubator Testar, a test tool (and framework)  to test applications at the GUI level whose objective is to solve part of the maintenance problem affecting tests by automatically generating test cases based on a structure that is automatically derived from the GUI. Testar is not included to replace Mr.Checker but rather to provide development teams with a series of interesting options which go beyond what Mr.Checker already provides.

Apart from Mr.Checker, engagements can now use Testar as an extra option for testing. This is a tool that enables the automated system testing of desktop, web and mobile applications at the GUI level. Testar has been added as an incubator to the platform awaiting further development during 2019.

The new incubator for node.js, called devon4node, has been included and implemented in several internal projects. This incubator is based on the Nest framework https://www.nestjs.com/. Nest is a framework for building efficient, scalable Node.js server-side applications. It uses progressive JavaScript, is built with TypeScript (preserves compatibility with pure JavaScript) and combines elements of OOP (Object Oriented Programming), FP (Functional Programming), and FRP (Functional Reactive Programming). Under the hood, Nest makes use of Express, but also provides compatibility with a wide range of other libraries (e.g. Fastify). This allows for easy use of the myriad third-party plugins which are available.

In order to facilitate the utilization of Microsoft Visual Studio Code in devonfw, we have developed and included the new devonfw Platform Extension Pack with lots of features to develop and test applications with this IDE in languages and frameworks such as TypeScript, JavaScript, .NET, Java, Rust, C++ and many more. More information at https://marketplace.visualstudio.com/items?itemName=devonfw.devonfw-extension-pack. Also, you can contribute to this extension in this GitHub repository https://github.com/devonfw/devonfw-extension-pack-vscode.

There is a whole range of new features and improvements which can be seen in that light. The My Thai Star sample app has now been upgraded to devon4j and devon4ng, a new devon4node backend implementation has been included that is seamless interchangeable, an E2E MrChecker sample project, CICD and deployment scripts and lots of bugs have been fixed.

Last but not least, the projects wikis and the devonfw Guide has once again been updated accordingly before the big refactor that will be addressed in the following release in 2019.

[[release-notes-version-3.0.asciidoc_changes-and-new-features]]
== Changes and new features

[[release-notes-version-3.0.asciidoc_devonfw-dist]]
=== Devonfw dist

* Eclipse 2018.9 integrated
** CheckStyle Plugin updated.
** SonarLint Plugin updated.
** Git Plugin updated.
** FindBugs Plugin updated.
** CobiGen plugin updated.
* Other Software
** Visual Studio Code latest version included and pre-configured with the devonfw Platform Extension Pack.
** Ant updated to latest.
** Maven updated to latest.
** Java updated to latest.
** Nodejs LTS updated to latest.
** @angular/cli included.
** Yarn package manager updated.
** Python3 updated.
** Spyder3 IDE integrated in python3 installation updated.
** devon4ng-application-template for Angular 7 at workspaces/examples
** devon4ng-ionic-application-template for Ionic 3.20 at workspace/samples

[[release-notes-version-3.0.asciidoc_my-thai-star-sample-application]]
=== My Thai Star Sample Application

The new release of My Thai Star has focused on the following improvements:

* Release 1.12.2.
* devon4j:
** devon4j 3.0.0 integrated.
** Spring Boot 2.0.4 integrated.
** Spring Data integration.
** New pagination and search system.
** Bug fixes.
* devon4ng:
** Client devon4ng updated to Angular 7.
** Angular Material and Covalent UI frameworks updated.
** Electron framework integrated.
* devon4node
** TypeScript 3.1.3.
** Based on Nest framework.
** Aligned with devon4j.
** Complete backend implementation.
** TypeORM integrated with SQLite database configuration.
** Webpack bundler.
** Nodemon runner.
** Jest unit tests.
* Mr.Checker
** Example cases for end-to-end test.
** Production line configuration.
** CICD
** Improved integration with Production Line
** New deployment from artifact
** New CICD pipelines
** New deployment pipelines
** Automated creation of pipelines in Jenkins

[[release-notes-version-3.0.asciidoc_documentation-updates]]
=== Documentation updates

The following contents in the devonfw guide have been updated:

* Upgrade of all the new devonfw named assets.
** devon4j
** devon4ng
** Mr.Checker
* Electron integration cookbook.
* Updated cookbook about Swagger.
* Removed deprecated entries.

Apart from this the documentation has been reviewed and some typos and errors have been fixed.

The current development of the guide has been moved to https://github.com/devonfw-forge/devon-guide/wiki in order to be available as the rest of OSS assets.

[[release-notes-version-3.0.asciidoc_devon4j]]
=== devon4j

The following changes have been incorporated in devon4j:

* Spring Boot 2.0.4 Integrated.
* Spring Data layer Integrated.
* Decouple mmm.util.*
* Removed depreciated restaurant sample.
* Updated Pagination support for Spring Data
* Add support for hana as dbType.
* Bugfixes.

[[release-notes-version-3.0.asciidoc_devon4ng]]
=== devon4ng

The following changes have been incorporated in devon4ng:

* New client application architecture guide https://github.com/devonfw/devon4ng/wiki
* Angular CLI 7,
* Angular 7,
* Angular Material 7 and Covalent 2.0.0-beta.7,
* Ionic 3.20.0,
* Cordova 8.0.0,
* devon4ng Angular application template updated to Angular 7 with visual improvements and bugfixes https://github.com/devonfw/devon4ng-application-template
* devon4ng Ionic application template updated and improved https://github.com/devonfw/devon4ng-ionic-application-template
* PWA enabled.
* Electron integrated to run My Thai Star as a desktop application in Windows, Linux or macOS.

[[release-notes-version-3.0.asciidoc_devon4net]]
=== devon4net

Some of the highlights of devon4net 1.0 are:

* External configuration file for each environment.
* .NET Core 2.1.X working solution (Latest 2.1.402).
* Packages and solution templates published on nuget.org.
* Full components customization by config file.
* Docker ready (My Thai Star sample fully working on docker).
* Port specification by configuration.
* Dependency injection by Microsoft .NET Core.
* Automapper support.
* Entity framework ORM (Unit of work, async methods).
* .NET Standard library 2.0 ready.
* Multi-platform support: Windows, Linux, Mac.
* Samples: My Thai Star back-end, Google API integration, Azure login, AOP with Castle.
* Documentation site.
* SPA page support.

And included the following features:

* Logging:
** Text File.
** Sqlite database support.
** Serilog Seq Server support.
** Graylog integration ready through TCP/UDP/HTTP protocols.
** API Call params interception (simple and compose objects).
** API error exception management.
* Swagger:
** Swagger auto generating client from comments and annotations on controller classes.
** Full swagger client customization (Version, Title, Description, Terms, License, Json endpoint definition).
* JWT:
** Issuer, audience, token expiration customization by external file configuration.
** Token generation via certificate.
** MVC inherited classes to access JWT user properties.
** API method security access based on JWT Claims.
* CORS:
** Simple CORS definition ready.
** Multiple CORS domain origin definition with specific headers and verbs.
* Headers:
** Automatic header injection with middleware.
** Supported header definitions: AccessControlExposeHeader, StrictTransportSecurityHeader, XFrameOptionsHeader, XssProtectionHeader, XContentTypeOptionsHeader, ContentSecurityPolicyHeader, PermittedCrossDomainPoliciesHeader, ReferrerPolicyHeader.
* Reporting server:
** Partial implementation of reporting server based on My-FyiReporting (now runs on linux container).
* Testing:
** Integration test template with sqlite support.
** Unit test template.
** Moq, xunit frameworks integrated.

[[release-notes-version-3.0.asciidoc_devon4x]]
=== devon4X

Some of the highlights of the new devonfw Xamarin framework are:

* Based on Excalibur framework by Hans Harts (https://github.com/Xciles/Excalibur).
* Updated to latest MVVMCross 6 version.
* My Thai Star Excalibur forms sample.
* Xamarin Forms template available on nuget.org.

[[release-notes-version-3.0.asciidoc_appsec-quick-solution-guide]]
=== AppSec Quick Solution Guide

This release incorporates a new Solution Guide for Application Security based on the state of the art in OWASP based application security. The purpose of this guide is to offer quick solutions for common application security issues for all applications based on devonfw.  It&#x2019;s often the case that we need our systems to comply to certain sets of security requirements and standards. Each of these requirements needs to be understood, addressed and converted to code or project activity. We want this guide to prevent the wheel from being reinvented over and over again and to give clear hints and solutions to common security problems.

* The wiki can be accessed here: https://github.com/devonfw/devonfw-security/wiki
* The PDF can be accessed here: https://github.com/devonfw/devonfw-security

[[release-notes-version-3.0.asciidoc_cobigen]]
=== CobiGen

* CobiGen core new features:
** CobiGen_Templates will not need to be imported into the workspace anymore. However, If you want to adapt them, you can still click on a button that automatically imports them for you.
** CobiGen_Templates can be updated by one-click whenever the user wants to have the latest version.
** Added the possibility to reference external increments on configuration level. This is used for reducing the number of duplicated templates.
* CobiGen_Templates project and docs updated:
** Spring standard has been followed better than ever.
** Interface templates get automatically relocated to the api project. Needed for following the new devon4j standard.
* CobiGen Angular:
** Angular 7 generation improved based on the updated application template.
** Pagination changed to fit Spring standard.
* CobiGen Ionic: Pagination changed to fit Spring standard.
* CobiGen OpenAPI plugin released with multiple bug-fixes and other functionalities like:
** Response and parameter types are parsed properly when they are a reference to an entity.
** Parameters defined on the body of a request are being read correctly.

[[release-notes-version-3.0.asciidoc_devcon]]
=== Devcon

A new version of Devcon has been released. Fixes and new features include:

* Updated to match current devon4j
* Update to download Linux distribution.
* Custom modules creation improvements.
* Code Migration feature added
* Bugfixes.

[[release-notes-version-3.0.asciidoc_devonfw-oss-modules]]
=== Devonfw OSS Modules

Modules upgraded to be used in new devon4j projects:

* Reporting module
* WinAuth AD Module
* WinAuth SSO Module
* I18n Module
* Async Module
* Integration Module
* Microservice Module
* Compose for Redis Module

See: https://github.com/devonfw/devon/wiki#devonfw-modules

[[release-notes-version-3.0.asciidoc_devonfw-testing]]
=== Devonfw Testing

[[release-notes-version-3.0.asciidoc_mr.checker]]
==== Mr.Checker

The Mr.Checker Test Framework is an automated testing framework for functional testing of web applications, API web services, Service Virtualization, Security and in coming future native mobile apps, and databases. All modules have tangible examples of how to build resilient integration test cases based on delivered functions. Mr.Checker updates and improvements:

* Examples available under embedded project &#x201C;MrChecker-App-Under-Test&#x201D; and in project wiki: https://github.com/devonfw/devonfw-testing/wiki
* How to install:
** Wiki : https://github.com/devonfw/devonfw-testing/wiki/How-to-install
* Release Note:
** module selenium - 3.8.1.13:
*** headless browser
*** enable browser options
** module DevOps :
*** Jenkinsfile align with ProductionLine


[[release-notes-version-3.0.asciidoc_testar]]
==== Testar

We have added Test*, Testar, as an incubator to the available test tools within devonfw. This ground-breaking tool is being developed by the Technical University of Valencia (UPV). In 2019 Capgemini will co-develop Testar with the UPV.

Testar is a tool that enables the automated system testing of desktop, web and mobile applications at the GUI level.

With Testar, you can start testing immediately. It automatically generates and executes test sequences based on a structure that is automatically derived from the UI through the accessibility API. Testar can detect the violation of general-purpose system requirements and you can use plugins to customize your tests.

You do not need test scripts and maintenance of it. The tests are random and are generated and executed automatically.

If you need to do directed tests you can create scripts to test specific requirements of your application.

Testar is included in the devonfw distro or can be downloaded from https://testar.org/download/.

The Github repository can be found at o: https://github.com/TESTARtool/TESTAR.



:leveloffset: 3

:leveloffset: 1

:toc: macro
toc::[]

:doctype: book
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[release-notes-version-2.4.asciidoc]]
= devonfw Release notes 2.4 &#x201C;EVE&#x201D;

[[release-notes-version-2.4.asciidoc_introduction]]
== Introduction

We are proud to announce the immediate release of devonfw version 2.4 (code named &#x201C;EVE&#x201D; during development). This version is the first one that fully embraces Open Source, including components like the documentation assets and CobiGen. Most of the IP (Intellectual Property or proprietary) part of devonfw are now published under the Apache License version 2.0 (with the documentation under the Creative Commons License (Attribution-NoDerivatives)). This includes the GitHub repositories where all the code and documentation is located. All of these repositories are now open for public viewing as well.

&#x201C;EVE&#x201D; contains a slew of new features but in essence it is already driven by what we expect to be the core focus of 2018: strengthening the platform and improving quality.

This release is also fully focused on deepening the platform rather than expanding it. That is to say: we have worked on improving existing features rather than adding new ones and strengthen the qualitative aspects of the software development life cycle, i.e. security, testing, infrastructure (CI, provisioning) etc.

&#x201C;EVE&#x201D; already is very much an example of this. This release contains the Allure Test Framework (included as an incubator in version 2.3) update called MrChecker Test Framework. MrChecker is an automated testing framework for functional testing of web applications, API web services, Service Virtualization, Security and in coming future native mobile apps, and databases. All modules have tangible examples of how to build resilient integration test cases based on delivered functions.

Another incubator being updated is the devonfw Shop Floor which intended to be a compilation of DevOps experiences from the devonfw perspective. A new part of the release is the new Solution Guide for Application Security based on the state of the art in OWASP based application security.

There is a whole range of new features and improvements which can be seen in that light. OASP4j 2.6 changes and improves the package structure of the core Java framework. The My Thai Star sample app has now been upgraded to Angular 6, lots of bugs have been fixed and the devonfw Guide has once again been improved.

Last but not least, this release contains the formal publication of the devonfw Methodology or The Accelerated Solution Design - an Industry Standards based solution design and specification (documentation) methodology for Agile (and less-than-agile) projects.


[[release-notes-version-2.4.asciidoc_changes-and-new-features]]
== Changes and new features

[[release-notes-version-2.4.asciidoc_devonfw-2.4-is-open-source]]
=== devonfw 2.4 is Open Source

This version is the first release of devonfw that fully embraces Open Source, including components like the documentation assets and CobiGen. This is done in response to intensive market pressure and demands from the MU&#xB4;s (Public Sector France, Netherlands)

Most of the IP (Intellectual Property or proprietary) part of devonfw are now published under the Apache License version 2.0 (with the documentation under the Creative Commons License (Attribution-NoDerivatives)).

So you can now use the devonfw distribution (the &quot;zip&quot; file), CobiGen, the devonfw modules and all other components without any worry to expose the client unwittingly to Capgemini IP.

*Note:* there are still some components which are IP and are not published under an OSS license. The class room trainings, the Sencha components and some CobiGen templates. But these are not includes in the distribution nor documentation and are now completely maintained separately.

[[release-notes-version-2.4.asciidoc_devonfw-dist]]
=== devonfw dist

* Eclipse Oxygen integrated
** CheckStyle Plugin updated.
** SonarLint Plugin updated.
** Git Plugin updated.
** FindBugs Plugin updated.
** CobiGen plugin updated.
* Other Software
** Visual Studio Code latest version included and pre-configured with https://github.com/oasp/oasp-vscode-ide
** Ant updated to latest.
** Maven updated to latest.
** Java updated to latest.
** Nodejs LTS updated to latest.
** @angular/cli included.
** Yarn package manager updated.
** Python3 updated.
** Spyder3 IDE integrated in python3 installation updated.
** OASP4JS-application-template for Angular 6 at workspaces/examples


[[release-notes-version-2.4.asciidoc_my-thai-star-sample-application]]
=== My Thai Star Sample Application

The new release of My Thai Star has focused on the following improvements:

* Release 1.6.0.
* Travis CI integration with Docker. Now we get a valuable feedback of the current status and when collaborators make pull requests.
* Docker compose deployment.
* OASP4J:
** Flyway upgrade from 3.2.1 to 4.2.0
** Bug fixes.
* OASP4JS:
** Client OASP4JS updated to Angular 6.
** Frontend translated into 9 languages.
** Improved mobile and tablet views.
** Routing fade animations.
** Compodoc included to generate dynamically frontend documentation.

[[release-notes-version-2.4.asciidoc_documentation-updates]]
=== Documentation updates
The following contents in the devonfw guide have been updated:

* devonfw OSS modules documentation.
* Creating a new OASP4J application.
* How to update Angular CLI in devonfw.
* Include Angular i18n.

Apart from this the documentation has been reviewed and some typos and errors have been fixed.

The current development of the guide has been moved to https://github.com/oasp-forge/devon-guide/wiki in order to be available as the rest of OSS assets.

[[release-notes-version-2.4.asciidoc_oasp4j]]
=== OASP4J
The following changes have been incorporated in OASP4J:

* Integrate batch with archetype.
* Application module structure and dependencies improved.
* Issues with Application Template fixed.
* Solved issue where Eclipse maven template oasp4j-template-server version 2.4.0 produced pom with missing dependency spring-boot-starter-jdbc.
* Solved datasource issue with project archetype 2.4.0.
* Decouple archetype from sample (restaurant).
* Upgrade to Flyway 4.
* Fix for issue with Java 1.8 and QueryDSL #599.

[[release-notes-version-2.4.asciidoc_oasp4js]]
=== OASP4JS
The following changes have been incorporated in OASP4JS:

* First version of the new client application architecture guide https://github.com/oasp-forge/oasp4js-wiki/wiki
* Angular CLI 6,
* Angular 6,
* Angular Material 6 and Covalent 2.0.0-beta.1,
* Ionic 3.20.0,
* Cordova 8.0.0,
* OASP4JS Angular application template updated to Angular 6 with visual improvements and bugfixes https://github.com/oasp/oasp4js-application-template
* OASP4JS Ionic application template updated and improved https://github.com/oasp/oasp4js-ionic-application-template
* PWA enabled.

[[release-notes-version-2.4.asciidoc_appsec-quick-solution-guide]]
=== AppSec Quick Solution Guide

This release incorporates a new Solution Guide for Application Security based on the state of the art in OWASP based application security. The purpose of this guide is to offer quick solutions for common application security issues for all applications based on devonfw.  It&#x2019;s often the case that we need our systems to comply to certain sets of security requirements and standards. Each of these requirements needs to be understood, addressed and converted to code or project activity. We want this guide to prevent the wheel from being reinvented over and over again and to give clear hints and solutions to common security problems.

* The wiki can be accessed here: https://github.com/devonfw/devonfw-security/wiki
* The PDF can be accessed here: https://github.com/devonfw/devonfw-security

[[release-notes-version-2.4.asciidoc_cobigen]]
=== CobiGen
* CobiGen_Templates project and docs updated.
* CobiGen Angular 6 generation improved based on the updated application template
* CobiGen Ionic CRUD App generation based on Ionic application template. Although a first version was already implemented, it has been deeply improved:
** Changed the code structure to comply with Ionic standards.
** Added pagination.
** Pull-to-refresh, swipe and attributes header implemented.
** Code documented and JSDoc enabled (similar to Javadoc)
* CobiGen TSPlugin Interface Merge support.
* CobiGen XML plugin comes out with new cool features:
** Enabled the use of XPath within variable assignment. You can now retrieve almost any data from an XML file and store it on a variable for further processing on the templates. Documented here.
** Able to generate multiple output files per XML input file.
** Generating code from UML diagrams. XMI files (standard XML for UML) can be now read and processed. This means that you can develop templates and generate code from an XMI like class diagrams.
* CobiGen OpenAPI plugin released with multiple bug-fixes and other functionalities like:
** Assigning global and local variables is now possible. Therefore you can set any string for further processing on the templates. For instance, changing the root package name of the generated files. Documented here.
** Enabled having a class with more than one relationship to another class (more than one property of the same type).
* CobiGen Text merger plugin has been extended and now it is able to merge text blocks. This means, for example, that the generation and merging of AsciiDoc documentation is possible. Documented here.

[[release-notes-version-2.4.asciidoc_devcon]]
=== Devcon
A new version of Devcon has been released. Fixes and new features include:

* Now Devcon is OSS, with public repository at https://github.com/devonfw/devcon
* Updated to match current OASP4J
* Update to download Linux distribution.
* Custom modules creation improvements.
* Bugfixes.

[[release-notes-version-2.4.asciidoc_devonfw-oss-modules]]
=== devonfw OSS Modules
* Existing devonfw IP modules have been moved to OSS.
** They can now be accessed in any OASP4J project as optional dependencies from Maven Central.
** The repository now has public access https://github.com/devonfw/devon
* Starters available for modules:
** Reporting module
** WinAuth AD Module
** WinAuth SSO Module
** I18n Module
** Async Module
** Integration Module
** Microservice Module
** Compose for Redis Module

See: https://github.com/devonfw/devon/wiki#devonfw-modules

[[release-notes-version-2.4.asciidoc_devonfw-shop-floor]]
=== devonfw Shop Floor

* devonfw Shop Floor 4 Docker
** Docker-based CICD environment
*** docker-compose.yml (installation file)
*** dsf4docker.sh (installation script)
*** Service Integration (documentation in Wiki)
** devonfw projects build and deployment with Docker
*** Dockerfiles (multi-stage building)
**** Build artifact (NodeJS for Angular and Maven for Java)
**** Deploy built artifact (NGINX for Angular and Tomcat for Java)
**** NGINX Reverse-Proxy to redirect traffic between both Angular client and Java server containers.
* devonfw Shop Floor 4 OpenShift
** devonfw projects deployment in OpenShift cluster
*** s2i images
*** OpenShift templates
*** Video showcase (OpenShift Origin 3.6)

This incubator is intended to be a compilation of DevOps experiences from the devonfw perspective. &#x201C;How we use our devonfw projects in DevOps environments&#x201D;. Integration with the Production Line, creation and service integration of a Docker-based CI environment and deploying devonfw applications in an OpenShift Origin cluster using devonfw templates.
See: https://github.com/devonfw/devonfw-shop-floor

[[release-notes-version-2.4.asciidoc_devonfw-testing]]
=== devonfw Testing

The MrChecker Test Framework is an automated testing framework for functional testing of web applications, API web services, Service Virtualization, Security and in coming future native mobile apps, and databases. All modules have tangible examples of how to build resilient integration test cases based on delivered functions.

* Examples available under embedded project &#x201C;MrChecker-App-Under-Test&#x201D; and in project wiki: https://github.com/devonfw/devonfw-testing/wiki
* How to install:
** Wiki : https://github.com/devonfw/devonfw-testing/wiki/How-to-install
* Release Note:
** module core - 4.12.0.8:
*** fixes on getting Environment values
*** top notch example how to keep vulnerable data in repo , like passwords
** module selenium - 3.8.1.8:
*** browser driver auto downloader
*** list of out off the box examples to use in any web page
** module webAPI - ver. 1.0.2 :
*** api service virtualization with REST and SOAP examples
*** api service virtualization with dynamic arguments
*** REST working test examples with page object model
** module security - 1.0.1 (security tests against My Thai Start)
** module DevOps :
*** dockerfile for Test environment execution
*** CI + CD as Jenkinsfile code

[[release-notes-version-2.4.asciidoc_devonfw-methodology-accelerated-solution-design]]
=== devonfw methodology: Accelerated Solution Design

One of the prime challenges in Distributed Agile Delivery is the maintenance of a common understanding and unity of intent among all participants in the process of creating a product. That is: how can you guarantee that different parties in the client, different providers, all in different locations and time zones during a particular period of time actually understand the requirements of the client, the proposed solution space and the state of implementation.

We offer the Accelerated Solution Design as a possible answer to these challenges. The ASD is carefully designed to be a practical guideline that fosters and ensures the collaboration and communication among all team members.

The Accelerated Solution Design is:

* A practical guideline rather than a &#x201C;methodology&#x201D;
* Based on industry standards rather than proprietary methods
* Consisting of an evolving, &#x201C;living&#x201D;, document set rather than a static, fixed document
* Encapsulating the business requirements, functional definitions as well as Architecture design
* Based on the intersection of Lean, Agile, DDD and User Story Mapping

And further it is based on the essential belief or paradigm that ASD should be:

* Focused on the design (definition) of the &#x201C;externally observable behavior of a system&#x201D;
* Promoting communication and collaboration between team members
* Guided by prototypes

For more on the devonfw Methodology / ASD, see:
https://github.com/devonfw/devon-methodology/blob/master/design-guidelines/Accelerated_Solution_Design.adoc


:leveloffset: 3

:leveloffset: 1

:toc: macro
toc::[]

:doctype: book
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[release-notes-version-2.3.asciidoc]]
= devonfw Release notes 2.3 &quot;Dash&quot;

[[release-notes-version-2.3.asciidoc_release-improving--strengthening-the-platform]]
== Release: improving &amp; strengthening the Platform

We are proud to announce the immediate release of *devonfw version 2.3* (code named &#x201C;_Dash_&#x201D; during development).  This release comes with a bit of a delay as we decided to wait for the publication of OASP4j 2.5. &#x201C;Dash&#x201D; contains a slew of new features but in essence it is already driven by what we expect to be the core focus of 2018: strengthening the platform and improving quality.

After one year and a half of rapid expansion, we expect the next release(s) of the devonfw 2.x series to be fully focused on deepening the platform rather than expanding it. That is to say: we should work on improving existing features rather than adding new ones and strengthen the qualitative aspects of the software development life cycle, i.e. testing, infrastructure (CI, provisioning) etc.

&#x201C;Dash&#x201D; already is very much an example of this. This release contains the Allure Test Framework as an incubator. This is an automated testing framework for functional testing of web applications. Another incubator is the devonfw Shop Floor which intended to be a compilation of DevOps experiences from the devonfw perspective. And based on this devonfw has been _OpenShift Primed_ (&#x201C;certified&#x201D;) by Red Hat.

There is a whole range of new features and improvements which can be seen in that light. OASP4j 2.5 changes and improves the package structure of the core Java framework. The My Thai Star sample app has now been fully integrated in the different frameworks and the devonfw Guide has once again been significantly expanded and improved.

[[release-notes-version-2.3.asciidoc_an-industrialized-platform-for-the-adcenter]]
== An industrialized platform for the ADcenter

Although less visible to the overall devonfw community, an important driving force was (meaning that lots of work has been done in the context of) the creation of the ADcenter concept towards the end of 2017. Based on a radical transformation of on/near/offshore software delivery, the focus of the ADcenters is to deliver agile &amp; accelerated &#x201C;Rightshore&#x201D; services with an emphasis on:

* Delivering Business Value and optimized User Experience
* Innovative software development with state of the art technology
* Highly automated devops; resulting in lower costs &amp; shorter time-to-market

The first two ADcenters, in Valencia (Spain) and Bangalore (India), are already servicing clients all over Europe - Germany, France, Switzerland  and the Netherlands - while ADcenter aligned production teams are currently working for Capgemini UK as well (through Spain).Through the ADcenter, Capgemini establishes industrialized innovation; designed for &amp; with the user. The availability of platforms for industrialized software delivery like devonfw and the Production Line has allowed us to train and make available over a 150 people in very short time.

The creation of the ADcenter is such a short time is visible proof that we&#xB4;re getting closer to a situation where devonfw and Production Line are turning into the default development platform for APPS2, thereby standardizing all aspects of the software development life cycle: from training and design, architecture, devops and development,  all the way up to QA and deployment.

[[release-notes-version-2.3.asciidoc_changes-and-new-features]]
== Changes and new features

[[release-notes-version-2.3.asciidoc_devonfw-dist]]
=== devonfw dist

The *devonfw dist*, or distribution, i.e. the central zip file which contains the main working environment for the devonfw developer, has been significantly enhanced. New features include:

* Eclipse Oxygen integrated
** CheckStyle Plugin installed and configured
** SonarLint Plugin installed and configured
** Git Plugin installed
** FindBugs replaced by SpotBugs and configured
** Tomcat8 specific Oxygen configuration
** CobiGen Plugin installed
* Other Software
** Cmder integrated (when console.bat launched)
** Visual Studio Code latest version included and pre-configured with https://github.com/devonfw/extension-pack-vscode
** Ant updated to latest.
** Maven updated to latest.
** Java updated to latest.
** Nodejs LTS updated to latest.
** @angular/cli included.
** Yarn package manager included.
** Python3 integrated
** Spyder3 IDE integrated in python3 installation
** OASP4JS-application-template for Angular5 at workspaces/examples
** Devon4sencha starter templates updated

[[release-notes-version-2.3.asciidoc_oasp4j-2.5]]
=== OASP4j 2.5

[[release-notes-version-2.3.asciidoc_support-for-jax-rs--jax-ws-clients]]
==== Support for JAX-RS &amp; JAX-WS clients

With the aim to enhance the ease in consuming RESTful and SOAP web services, JAX-RS and JAX-WS clients have been introduced. They enable developers to concisely and efficiently implement portable client-side solutions that leverage existing and well-established client-side HTTP connector implementations. Furthermore, the getting started time for consuming web services has been considerably reduced with the default configuration out-of-the-box which can be tweaked as per individual project requirements.

See: https://github.com/oasp/oasp4j/issues/358

[[release-notes-version-2.3.asciidoc_separate-security-logs-for-oasp4j-log-component]]
==== Separate security logs for OASP4J log component

Based on OWASP(Open Web Application Security Project), OASP4J aims to give developers more control and flexibility with the logging of security events and tracking of forensic information. Furthermore, it helps classifying the information in log messages and applying masking when necessary. It provides powerful security features while based on set of logging APIs developers are already familiar with over a decade of their experience with Log4J and its successors.

See: https://github.com/oasp/oasp4j/issues/569

[[release-notes-version-2.3.asciidoc_support-for-microservices]]
==== Support for Microservices

Integration of an OASP4J application to a Microservices environment can now be leveraged with this release of OASP4J. Introduction of service clients for RESTful and SOAP web services based on Java EE give developers agility and ease to access microservices in the Devon framework. It significantly cuts down the efforts on part of developers around boilerplate code and stresses more focus on the business code improving overall efficiency and quality of deliverables.

See: https://github.com/oasp/oasp4j/pull/589/commits

[[release-notes-version-2.3.asciidoc_cobigen]]
=== Cobigen

A new version of Cobigen has been included. New features include:

* Swagger/Yaml Plugin for CobiGen. CobiGen is able to read a swagger definition file that follows the OpenAPI 3.0 spec and generate code. A preliminary release was already included in 2.2.1 but the current version is much more mature and stable. See: https://github.com/devonfw/cobigen/wiki/howto_openapi_generation
* Integration of CobiGen into Maven build process. This already existed but has been improved. It consists mainly of documentation + better log output and bug fixes. See: https://github.com/devonfw/cobigen/wiki/cobigen-maven_configuration
* CobiGen Ionic CRUD App generation based on https://github.com/oasp/oasp4js-ionic-application-template
* Cobigen_Templates project and docs updated
* Bugfixes and Hardening

[[release-notes-version-2.3.asciidoc_my-thai-star-sample-application]]
=== My Thai Star Sample Application

From this release on the My Thai Star application has been fully integrated in the different frameworks in the platform. Further more, a more modularized approach has been followed in the current release of My Thai star application to decouple client from implementation details. Which provides better encapsulation of code and dependency management for API and implementation classes. This has been achieved with creation of a new &#x201C;API&#x201D; module that contain interfaces for REST services and corresponding Request/Response objects. With existing &#x201C;Core&#x201D; module being dependent on &#x201C;API&#x201D; module. To read further you can follow the link https://github.com/oasp/my-thai-star/wiki/java-design#basic-architecture-details

Furthermore: an email and Twitter micro service were integrated in my-thai-star. This is just for demonstration purposes. A full micro service framework is already part of oasp4j 2.5.0

[[release-notes-version-2.3.asciidoc_documentation-refactoring]]
=== Documentation refactoring

The complete devonfw guide is restructured and refactored. Getting started guides are added for easy start with devonfw.Integration of the new Tutorial with the existing devonfw Guide whereby existing chapters of the previous tutorial were converted to Cookbook chapters. Asciidoctor is used for devonfw guide PDF generation.
See: https://github.com/devonfw/devon-guide/wiki

[[release-notes-version-2.3.asciidoc_oasp4js]]
=== OASP4JS

The following changes have been incorporated in OASP4JS:

* Angular CLI 1.6.0,
* Angular 5.1,
* Angular Material 5 and Covalent 1.0.0 RC1,
* PWA enabled,
* Core and Shared Modules included to follow the recommended Angular projects structure,
* Yarn and NPM compliant since both lock files are included in order to get a stable installation.

[[release-notes-version-2.3.asciidoc_admin-interface-for-oasp4j-apps]]
=== Admin interface for oasp4j apps

The new version includes an Integration of an admin interface for oasp4j apps (Spring Boot). This module is based on CodeCentric&#xB4;s Spring Boot Admin (https://github.com/codecentric/spring-boot-admin). See: https://github.com/devonfw/devon-guide/wiki/Spring-boot-admin-Integration-with-devon4j

[[release-notes-version-2.3.asciidoc_devcon]]
=== Devcon

A new version of Devcon has been released. Fixes and new features include:

* Renaming of system Commands.
* New menu has been added - &#x201C;other modules&#x201D;, if menus are more than 10, other modules will display some menus.
* A progress bar has been added for installing the distribution

[[release-notes-version-2.3.asciidoc_devonfw-modules]]
=== devonfw Modules

Existing devonfw modules can now be accessed with the help of starters following namespace devonfw-&lt;module_name&gt;-starter. Starters available for modules:

* Reporting module
* WinAuth AD Module
* WinAuth SSO Module
* I18n Module
* Async Module
* Integration Module
* Microservice Module
* Compose for Redis Module

See: https://github.com/devonfw/devon/wiki#ip-modules

[[release-notes-version-2.3.asciidoc_devonfw-shop-floor]]
=== devonfw Shop Floor

This incubator is intended to be a compilation of DevOps experiences from the devonfw perspective. &#x201C;How we use our devonfw projects in DevOps environments&#x201D;. Integration with the Production Line, creation and service integration of a Docker-based CI environment and deploying devonfw applications in an OpenShift Origin cluster using devonfw templates.

See: https://github.com/devonfw/devonfw-shop-floor

[[release-notes-version-2.3.asciidoc_devonfw-testing]]
=== devonfw-testing

The Allure Test Framework is an automated testing framework for functional testing of web applications and in coming future native mobile apps, web services and databases. All modules have tangible examples of how to build resilient integration test cases based on delivered functions.

* Examples available under embedded project &#x201C;Allure-App-Under-Test&#x201D; and in project wiki: https://github.com/devonfw/devonfw-testing/wiki
* How to install: https://github.com/devonfw/devonfw-testing/wiki/How-to-install
* Release Notes:
** Core Module &#x2013; ver.4.12.0.3:
*** Test report with logs and/or screenshots
*** Test groups/tags
*** Data Driven (inside test case, external file)
*** Test case parallel execution
*** Run on independent Operating System (Java)
*** Externalize test environment (DEV, QA, PROD)
** UI Selenium module &#x2013; ver. 3.4.0.3:
*** Malleable resolution ( Remote Web Design, Mobile browsers)
*** Support for many browsers( Internet Explorer, Edge, Chrome, Firefox, Safari)
*** User friendly actions ( elementCheckBox, elementDropdown, etc. )
*** Ubiquese test execution (locally, against Selenium Grid through Jenkins)
*** Page Object Model architecture
*** Selenium WebDriver library ver. 3.4.0

See:  https://github.com/devonfw/devonfw-testing/wiki

[[release-notes-version-2.3.asciidoc_dot.net-framework-incubators]]
=== DOT.NET Framework incubators

The .NET Core and Xamarin frameworks are still under development by a workgroup from The Netherlands, Spain, Poland, Italy, Norway and Germany. The 1.0 release is expected to be coming soon but the current incubator frameworks are already being used in several engagements.  Some features to highlight are:

* Full .NET implementation with multi-platform support
* Detailed documentation for developers
* Docker ready
* Web API server side template :
** Swagger auto-generation
** JWT security
** Entity Framework Support
** Advanced log features
* Xamarin Templates based on Excalibur framework
* My Thai Star implementation:
** Backend (.NET Core)
** FrontEnd (Xamarin)

[[release-notes-version-2.3.asciidoc_devonfw-has-been-primed-by-red-hat-for-openshift]]
=== devonfw has been Primed by Red Hat for OpenShift

OpenShift is a supported distribution of Kubernetes from Red Hat for container-based software deployment and management. It is using Docker containers and DevOps tools for accelerated application development. Using OpenShift allows Capgemini to avoid Cloud Vendor lock-in. OpenShift provides devonfw with a state of the art CI/CD environment (devonfw Shop Floor), providing devonfw with a platform for the whole development life cycle: from development to staging / deploy.

See https://hub.openshift.com/primed/120-capgemini and https://github.com/oasp/s2i

[[release-notes-version-2.3.asciidoc_harvested-components-and-modules]]
=== Harvested components and modules

The devonfw Harvesting process continues to add valuable components and modules to the devonfw platform. The last months the following elements were contributed:

[[release-notes-version-2.3.asciidoc_service-client-support-for-micro-service-projects.]]
==== Service Client support (for Micro service Projects).

This client is for consuming microservices from other application.This solution is already very flexible and customizable.As of now,this is suitable for small and simple project where two or three microservices are invoked. Donated by J&#xF6;rg Hohwiller. See: https://github.com/devonfw/devon-microservices

[[release-notes-version-2.3.asciidoc_jhipster-devonfw-code-generation]]
==== JHipster devonfw code generation

This component was donated by the ADcenter in Valencia. It was made in order to comply with strong requirements (especially from the French BU) to use jHipster for code generation.

JHipster is a code generator based on Yeoman generators. Its default generator generator-jhipster generates a specific JHipster structure. The purpose of generator-jhipster-DevonModule is to generate the structure and files of a typical OASP4j project. It is therefore equivalent to the standard OASP4j application template based CobiGen code generation.

See: https://github.com/devonfw/devon-guide/wiki/cookbook-devon-jhipster-module

[[release-notes-version-2.3.asciidoc_simple-jenkins-task-status-dashboard]]
==== Simple Jenkins task status dashboard

This component has been donated by, has been harvested from system in use by, Capgemini  Valencia. This dashboard, apart from an optional gamification element, allows the display of multiple Jenkins instances. See: https://github.com/oasp/jenkins_view

[[release-notes-version-2.3.asciidoc_and-lots-more,-among-others]]
=== And lots more, among others:

* OASP4J/devonfw docker based build IN a docker process. See: https://github.com/devonfw/devon-guide/wiki/Dockerfile-for-the-maven-based-spring.io-projects

* CI test boot archetype. This is for unit testing.This will create a sample project and add sample web service to it. A Jenkins job will start oasp4j server and will call web service. See: https://github.com/devonfw/devonfw-shop-floor/tree/master/testing/Oasp4jTestingScripts

* CI test Angular starterTemplate. Testing automation for Angular applications (My Thai Star) in Continuous Integration environments by using Headless browsers and creating Node.js scripts. See: https://github.com/oasp/my-thai-star/blob/develop/angular/package.json#L8-L12 and https://github.com/oasp/my-thai-star/blob/develop/angular/karma.conf.js

:leveloffset: 3

:leveloffset: 1

:toc: macro
toc::[]

:doctype: book
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[release-notes-version-2.2.asciidoc]]
= devonfw Release notes 2.2 &quot;Courage&quot;

[[release-notes-version-2.2.asciidoc_production-line-integration]]
== Production Line Integration
devonfw is now fully supported on the Production Line v1.3 and the coming v2.0. Besides that, we now &quot;eat our own dogfood&quot; as the whole devonfw project, all &quot;buildable assets&quot;, now run on the Production Line.

[[release-notes-version-2.2.asciidoc_oasp4js-2.0]]
== OASP4js 2.0

The main focus of the Courage release is the renewed introduction of &quot;OASP for JavaScript&quot;, or OASP4js. This new version is a completely new implementation based on Angular (version 4). This new &quot;stack&quot; comes with:

- New application templates for Angular 4 application (as well as Ionic 3)

- A new reference application

- A new tutorial (and Architecture Guide following soon)

- Component Gallery

- New CobiGen templates for generation of both Angular 4 and Ionic 3 UI components (&quot;screens&quot;)

- Integration of Covalent and Bootstrap offering a large number of components

- my-thai-star, a showcase and reference implementation in Angular of a real, responsive usable app using recommended architecture and patterns

- A new Tutorial using my-thai-star as a starting point

See:
https://github.com/oasp/oasp4js-application-template
https://github.com/oasp/oasp4js-angular-catalog
https://github.com/oasp/my-thai-star/tree/develop/angular

[[release-notes-version-2.2.asciidoc_a-new-oasp-portal]]
== A new OASP Portal
As part of the new framework(s) we have also done a complete redesign of the OASP Portal website at http://oasp.io/ which should make all things related with OASP more accessible and easier to find.

[[release-notes-version-2.2.asciidoc_new-cobigen]]
== New Cobigen

Major changes in this release:

* Support for multi-module projects

* Client UI Generation:

** New Angular 4 templates based on the latest - angular project seed

** Basic Typescript Merger

** Basic Angular Template Merger

** JSON Merger

* Refactored oasp4j templates to make use of Java template logic feature

* Bugfixes:

** Fixed merging of nested Java annotations including array values

** more minor issues

* Under the hood:

** Large refactoring steps towards language agnostic templates formatting sensitive placeholder descriptions automatically formatting camelCase to TrainCase to snake-case, etc.

* Easy setup of CobiGen IDE to enable fluent contribution

* CI integration improved to integrate with GitHub for more valuable feedback


See: https://github.com/devonfw/cobigen/releases

[[release-notes-version-2.2.asciidoc_mythaistar-new-restaurant-example,-reference-implementation--methodology-showcase]]
== MyThaiStar: New Restaurant Example, reference implementation &amp; Methodology showcase

A major part of the new devonfw release is the incorporation of a new application, &quot;my-thai-star&quot; which among others:

- serve as an example of how to make a &quot;real&quot; devonfw application (i.e. the application could be used for real)

- Serves  as an attractive showcase

- Serves as a reference application of devonfw patterns and practices as well as the standard example in the new devonfw tutorial

- highlights modern security option like JWT Integration

The application is  accompanied by a substantial new documentation asset, the devonfw methodology, which described in detail the whole lifecycle of the development of a devonfw application, from requirements gathering to technical design. Officially my-that-star is still considered to be an incubator as especially this last part is still not as mature as it could be. But the example application and tutorial are 100% complete and functional and form a marked improvement over the &quot;old&quot; restaurant example app. My-Thai-star will become the standard example app from devonfw 3.0 onwards.

See:     https://github.com/oasp/my-thai-star
         https://github.com/oasp/my-thai-star/wiki


[[release-notes-version-2.2.asciidoc_the-new-oasp-tutorial]]
== The new OASP Tutorial
The OASP Tutorial is a new part of the combined OASP / devonfw documentation which changes the focus of how people can get started with the platform

There are tutorials for OASP4j, OASP4js (Angular), OASP4fn and more to come. My-Thai-Star is used throughout the tutorial series to demonstrate the basic principles, architecture, and good practices of the different OASP &quot;stacks&quot;. There is an elaborated exercise where the readers get to write their own application &quot;JumpTheQueue&quot;.


We hope that the new tutorial offers a better, more efficient way for people to get started with devonfw. Answering especially the question: how to make a devonfw application.

Oasp4j tutorial: https://github.com/oasp/oasp-tutorial-sources/wiki/OASP4jGettingStartedHome
Oasp4js tutorial: https://github.com/oasp/oasp-tutorial-sources/wiki/OASP4jsGettingStartedHome
Oasp4fn tutorial: https://github.com/oasp/oasp-tutorial-sources/wiki/OASP4FnGettingStartedHome

[[release-notes-version-2.2.asciidoc_oasp4j-2.4.0]]
== OASP4j 2.4.0

&quot;OASP for Java&quot; or OASP4j now includes updated versions of the latest stable versions of Spring Boot and the Spring Framework and all related dependencies. This allows guaranteed, stable, execution of any devonfw 2.X application on the latest versions of the Industry Standard Spring stack.
Another important new feature is a new testing architecture/infrastructure. All database options are updated to the latest versions as well as guaranteed to function on all Application Servers which should cause less friction and configuration time when starting a new OASP4j project.

Details:

- Spring Boot Upgrade to 1.5.3

- Updated all underlying dependencies

- Spring version is 4.3.8

- Exclude Third Party Libraries that are not needed from sample restaurant application

- Bugfix:Fixed the &apos;WhiteLabel&apos; error received when tried to login to the sample restaurant application that is deployed onto external Tomcat

- Bugfix:Removed the API api.org.apache.catalina.filters.SetCharacterEncodingFilter and used spring framework&apos;s API org.springframework.web.filter.CharacterEncodingFilter instead

- Bugfix:Fixed the error &quot;class file for javax.interceptor.InterceptorBinding not found&quot; received when executing the command &apos;mvn site&apos; when trying to generate javadoc using Maven javadoc plugin

- Removed the deprecated API io.oasp.module.web.common.base.PropertiesWebApplicationContextInitializer

- Documentation of the usage of UserDetailsService of Spring Security


See: https://github.com/oasp/oasp4j

Wiki: https://github.com/oasp/oasp4j/wiki

[[release-notes-version-2.2.asciidoc_microservices-netflix]]
== Microservices Netflix
devonfw now includes a microservices implementation based on Spring Cloud Netflix. It provides a Netflix OSS integrations for Spring Boot apps through auto-configuration and binding to the Spring Environment. It  offers microservices archetypes and a complete user guide with all the details to start creating microservices with devonfw.

See: https://github.com/devonfw-forge/devon-guide/wiki/devon-microservices

[[release-notes-version-2.2.asciidoc_devonfw-distribution-based-on-eclipse-oomph]]
== devonfw distribution based on Eclipse OOMPH
The new Eclipse devonfw distribution is now based on Eclipse OOMPH, which allows us, an any engagement, to create and manage the distribution more effectively by formalizing the setup instructions so they can be performed automatically (due to a blocking issue postponed to devonfw 2.2.1 which will be released a few weeks after 2.2.0)

[[release-notes-version-2.2.asciidoc_visual-studio-code--atom]]
== Visual Studio Code / Atom
The devonfw distro now contains Visual Studio Code alongside Eclipse in order to provide a default, state of the art, environment for web based development.

See: https://github.com/oasp/oasp-vscode-ide

[[release-notes-version-2.2.asciidoc_more-i18n-options]]
== More I18N options
The platform now contains more documentation and a conversion utility which makes it easier to share i18n resource files between the different frameworks.

See: https://github.com/devonfw/devon/wiki/cookbook-i18n-resource-converter

[[release-notes-version-2.2.asciidoc_spring-integration-as-devonfw-module]]
== Spring Integration as devonfw Module
This release includes a new module based on the Java Message Service (JMS) and Spring Integration which provides a communication system (sender/subscriber) out-of-the-box with simple channels (only to send and read messages), request and reply channels (to send messages and responses) and request &amp; reply asynchronously channels.

See: https://github.com/devonfw/devon/wiki/cookbook-integration-module

[[release-notes-version-2.2.asciidoc_devonfw-harvest-contributions]]
== devonfw Harvest contributions
devonfw contains a whole series of new components obtained through the Harvesting process. Examples are :

* New backend IP module Compose for Redis: management component for cloud environments. Redis is an open-source, blazingly fast, key/value low maintenance store. Compose&apos;s platform gives you a configuration pre-tuned for high availability and locked down with additional security features. The component will manage the service connection and the main methods to manage the key/values on the storage. The library used is &quot;lettuce&quot;.

* Sencha component for extending GMapPanel with the following functionality :
** Markers management
** Google Maps options management
** Geoposition management
** Search address and coordinates management
** Map events management
** Map life cycle and behavior management

* Sencha responsive Footer that moves from horizontal to vertical layout depending on the screen resolution or the device type. It is a simple functionality but we consider it very useful and reusable.

See: https://github.com/devonfw/devon/wiki/cookbook-compose-for-redis-module

[[release-notes-version-2.2.asciidoc_more-deployment-options-to-jee-application-servers-and-dockercloudfoundry]]
== More Deployment options to JEE Application Servers and Docker/CloudFoundry

The platform now fully supports deployment on the latest version of Weblogic, WebSphere, Wildfly (JBoss) as well as Docker and Cloud Foundry.

See:    https://github.com/devonfw/devon/wiki/Deployment-on-WebLogic
    https://github.com/devonfw/devon/wiki/cookbook-Deployment-on-WebSphere
    https://github.com/devonfw/devon/wiki/cookbook-Deployment-on-Wildfly

[[release-notes-version-2.2.asciidoc_devcon-on-linux]]
== Devcon on Linux
Devcon is now fully supported on Linux which, together with the devonfw distro running on Linux, makes devonfw fully multi-platform and Cloud compatible (as Linux is the default OS in the Cloud!)

See: https://github.com/devonfw/devcon/releases

[[release-notes-version-2.2.asciidoc_new-oasp-incubators]]
== New OASP Incubators
From different Business Units (countries) have contributed &quot;incubator&quot; frameworks:

- OASP4NET (Stack based on .NET Core / .NET &quot;Classic&quot; (4.6))
- OASP4X (Stack based on Xamarin)
- OASP4Fn (Stack based on Node-js/Serverless): https://github.com/oasp/oasp4fn

An &quot;incubator&quot; status means that the frameworks are production ready, all are actually already used in production, but  are still not fully compliant with the OASP definition of a &quot;Minimally Viable Product&quot;.

During this summer the OASP4NET and OASP4X repos will be properly installed. In the mean time, if you want to have access to the source code, please contact the _devonfw Core Team_.

:leveloffset: 3

:leveloffset: 1

:toc: macro
toc::[]

:doctype: book
:reproducible:
:source-highlighter: rouge
:listing-caption: Listing

[[release-notes-version-2.1.asciidoc]]
= Release notes devonfw 2.1.1 &quot;Balu&quot;

[[release-notes-version-2.1.asciidoc_version-2.1.2-oasp4j-updates--some-new-features]]
== Version 2.1.2: OASP4J updates &amp; some new features

We&apos;ve released the latest update release of devonfw in the _Balu_ series: version 2.1.2. The next major release, code named _Courage_, will be released approximately the end of June. This current release contains the following items:

[[release-notes-version-2.1.asciidoc_oasp4j-2.3.0-release]]
=== OASP4j 2.3.0 Release

Friday the 12th of May 2017 OASP4J version 2.3.0 was released. Major features added are :

- Database Integration with PostGres, MSSQL Server, MariaDB
- Added docs folder for gh pages and added oomph setups
- Refactored Code
- Refactored Test Infrastructure
- Added Documentation on debugging tests
- Added Two Batch Job tests in the restaurant sample
- Bugfix: Fixed the error received when the Spring Boot Application from sample application that is created from maven archetype is launched
- Bugfix: Fix for 404 error received when clicked on the link &apos;1. Table&apos; in index.html of the sample application created from maven archetype

More details on features added can be found at https://github.com/oasp/oasp4j/milestone/23?closed=1 .
The OASP4j wiki and other documents are updated for release 2.3.0.

[[release-notes-version-2.1.asciidoc_cobigen-enhancements]]
=== CobiGen Enhancements

Previous versions of CobiGen are able to generate code for REST services only. Now it is possible to generate the code for SOAP services as well. There are two use cases available in CobiGen:

 - SOAP without nested data
 - SOAP nested data

The &quot;nested data&quot; use case is when there are 3 or more entities which are interrelated with each other. CobiGen will generate code which will return the nested data. Currently CobiGen services return ETO classes, CobiGen has been enhanced as to return CTO classes (ETO + relationship).

Apart from the SOAP code generation, the capability to express nested relationships have been added to the existing ReST code generator as well.

See: https://github.com/devonfw/devon-guide/wiki/cookbook-cobigen-advanced-use-cases-soap-and-nested-data

[[release-notes-version-2.1.asciidoc_micro-services-module-spring-cloudnetflix-oss]]
=== Micro services module (Spring Cloud/Netflix OSS)

To make it easier for devonfw users to design and develop applications based on microservices, this release provides a series of archetypes and resources based on _Spring Cloud Netflix_ to automate the creation and configuration of microservices.

New documentation ind de devonfw Guide contains all the details to start https://github.com/devonfw-forge/devon-guide/wiki/devon-microservices[creating microservices with devonfw]

[[release-notes-version-2.1.asciidoc_spring-integration-module]]
=== Spring Integration Module

Based on the _Java Message Service_ (JMS) and _Spring Integration_, the devonfw _Integration module_ provides a communication system (sender/subscriber) out-of-the-box with simple channels (only to send and read messages), request and reply channels (to send messages and responses) and request &amp; reply asynchronously channels. You can find more details about the implementation in the https://github.com/devonfw/devon-guide/wiki/cookbook-integration-module[devonfw guide].

[[release-notes-version-2.1.asciidoc_websphere--wildfly-deployment-documentation]]
=== WebSphere &amp; Wildfly deployment documentation

The new version of devonfw contains more elaborate and updated documentation about deployment on https://github.com/devonfw/devon-guide/wiki/cookbook-Deployment-on-WebSphere[WebSpere] and https://github.com/devonfw/devon-guide/wiki/cookbook-Deployment-on-Wildfly[Wildfly].

[[release-notes-version-2.1.asciidoc_version-2.1.1-updates,-fixes--some-new-features]]
== Version 2.1.1 Updates, fixes &amp; some new features

[[release-notes-version-2.1.asciidoc_cobigen-code-generator-fixes]]
=== CobiGen code-generator fixes

The CobiGen incremental code generator released in the previous version contained a regression which has now been fixed. Generating services in Batch mode whereby a package can be given as an input, using all Entities contained in that package, works again as expected.

For more information see: https://github.com/devonfw/cobigen/wiki[The CobiGen documentation] and the corresponding change in the https://github.com/devonfw/devon/wiki/getting-started-Cobigen[devonfw Guide]

[[release-notes-version-2.1.asciidoc_devcon-enhancements]]
=== Devcon enhancements

In this new release we have added devcon to the devonfw distribution itself so one can directly use devcon from the console.bat or ps-console.bat windows. It is therefore no longer necessary to independently install devcon. However, as devcon is useful outside of the devonfw distribution, this remains a viable option.

[[release-notes-version-2.1.asciidoc_devon4sencha]]
=== Devon4Sencha

in Devon4Sencha there are changes in the sample application. It now complies fully with the architecture which is known as &quot;universal app&quot;, so now it has screens custom tailored for desktop and mobile devices. All the basic logic remains the same for both versions. (The StarterTemplate is still only for creating a desktop app. This will be tackled in the next release.)

[[release-notes-version-2.1.asciidoc_new-winauth-modules]]
=== New Winauth modules

The original _winauth_ module that, in previous Devon versions, implemented the _Active Directory_ authentication and the _Single Sign-on_ authentication now has been divided in two independent modules. The _Active Directory_ authentication now is included in the new _Winauth-ad_ module whereas the _Single Sign-on_ implementation is included in a separate module called _Winauth-sso_.
Also some improvements have been added to _Winauth-sso_ module to ease the way in which the module can be injected.

For more information about the update see: https://github.com/devonfw/devon/wiki/Client-GUI-Sencha-Introduction-to-Devon4sencha[The Sencha docs within the devonfw Guide]

[[release-notes-version-2.1.asciidoc_general-updates]]
=== General updates

There are a series of updates to the devonfw documentation, principally the devonfw Guide. Further more, from this release on, you can find the devonfw guide in the _doc_ folder of the distribution.

Furthermore, the OASP4J and devonfw source-code in the &quot;examples&quot; workspace, have been updated to the latest version.

[[release-notes-version-2.1.asciidoc_version-2.1-new-features,-improvements-and-updates]]
== Version 2.1 New features, improvements and updates

[[release-notes-version-2.1.asciidoc_introduction]]
=== Introduction

We are proud to present the new release of devonfw, version &quot;2.1&quot; which we&apos;ve baptized &quot;Balu&quot;. A major focus for this release is developer productivity. So that explains the name, as Balu is not just big, friendly and cuddly but also was very happy to let Mowgli do the work for him.

[[release-notes-version-2.1.asciidoc_cobigen-code-generator-ui-code-generation-and-more]]
=== Cobigen code-generator UI code generation and more

The Cobigen incremental code generator which is part of devonfw has been significantly improved. Based on a single data schema it can generate the JPA/Hibernate code for the whole service layer (from data-access code to web services) for all CRUD operations. When generating code, Cobigen is able to detect and leave untouched any code which developers have added manually.

In the new release it supports Spring Data for data access and it is now capable of generating the whole User Interface as well: data-grids and individual rows/records with support for filters, pagination etc.  That is to say: Cobigen can now generate automatically all the code from the server-side database access layer all the way up to the UI &quot;screens&quot; in the web browser.

Currently we support Sencha Ext JS with support for Angular 2 coming soon. The code generated by Cobigen can be opened and used by Sencha Architect, the visual design tool, which enables the programmer to extend and enhance the generated UI non-programmatically. When Cobigen regenerates the code, even those additions are left intact. All these features combined allow for an iterative, incremental way of development which can be up to an order of an magnitude more productive than &quot;programming manual&quot;

Cobigen can now also be used for code-generation within the context of an engagement. It is easily extensible and the process of how to extend it for your own project is well documented. This becomes already worthwhile (&quot;delivers ROI&quot;) when having 5+ identical elements within the project.

For more information see: https://github.com/devonfw/cobigen/wiki[The Cobigen documentation] and the corresponding changer in the https://github.com/devonfw/devon/wiki/getting-started-Cobigen[devonfw Guide] and

[[release-notes-version-2.1.asciidoc_angular-2]]
=== Angular 2

With the official release of Angular 2 and TypeScript 2, we&apos;re slowly but steadily moving to embrace  these important new players in the  web development scene. We keep supporting the Angular 1 based OASP4js framework and are planning a migration of this framework to Angular 2 in the near future. For &quot;Balu&quot; we&apos;ve have decided to integrate &quot;vanilla&quot; Angular 2.

We have migrated the Restaurant Sample application to serve as a, documented and supported, blueprint for Angular 2 applications. Furthermore, we support three &quot;kickstarter&quot; projects which help engagement getting started with Angular2 - either using Bootstrap or Google&#xB4;s Material Design - or, alternatively, Ionic 2 (the mobile framework on top of Angular 2). For more information see: https://github.com/devonfw/devonfw-angular2-kickstarter[Angular 2 Kickstarter] and https://github.com/devonfw/devonfw-ionic2-kickstarter/[Ionic 2 Kickstarter]

[[release-notes-version-2.1.asciidoc_oasp4j-2.2.0-release]]
=== OASP4J 2.2.0 Release

A new release of OASP4J, version 2.2.0, is included in this release of devonfw. This release mainly focuses on server side of oasp. i.e oasp4j.

Major features added are :

* Upgrade to Spring Boot 1.3.8.RELEASE
* Upgrade to Apache CXF 3.1.8
* Database Integration with Oracle 11g
* Added Servlet for HTTP-Debugging
* Refactored code and improved JavaDoc
* Bugfix: mvn spring-boot:run executes successfully for oasp4j application created using oasp4j template
* Added subsystem tests of SalesmanagementRestService and several other tests
* Added Tests to test java packages conformance to OASP conventions

More details on features added can be found at https://github.com/oasp/oasp4j/milestone/19?closed=1(here). The OASP4j wiki and other documents are updated for release 2.2.0.

[[release-notes-version-2.1.asciidoc_devon4sencha]]
=== Devon4Sencha

Devon4Sencha is an alternative view layer for web applications developed with devonfw. It is based on Sencha Ext JS. As it requires a license for commercial applications it is not provided as Open Source and is considered to be part of the IP of Capgemini.

These libraries provide support for creating SPA (Single Page Applications) with a very rich set of components for both desktop and mobile. In the new version we extend this functionality to support for &quot;Universal Apps&quot;, the Sencha specific term for true multi-device applications which make it possible to develop a single application for desktop, tablet as well as mobile devices. In the latest version Devon4Sencha has been upgraded to support Ext JS 6.2 and we now support the usage of Cobigen as well as Sencha Architect as extra option to improve developer productivity.
For more information about the update see: https://github.com/devonfw/devon/wiki/Client-GUI-Sencha-Introduction-to-Devon4sencha[The Sencha docs within the devonfw Guide]

[[release-notes-version-2.1.asciidoc_devcon-enhancements]]
=== Devcon enhancements

The Devon Console, Devcon, is a cross-platform command line tool running on the JVM that provides many automated tasks around the full life-cycle of Devon applications, from installing the basic working environment and generating a new project, to running a test server and deploying an application to production. It can be used by the engagements to integrate with their proprietary tool chain.

In this new release we have added an optional graphical user interface (with integrated help) which makes using Devcon even easier to use. Another new feature is that it is now possible to easily extend it with commands just by adding your own or project specific Javascript files. This makes it an attractive option for project task automation. You can find more information in the https://github.com/devonfw/devon/wiki/devcon-command-developers-guide[Devcon Command Developers Guide]

[[release-notes-version-2.1.asciidoc_ready-for-the-cloud]]
=== Ready for the Cloud

devonfw is in active use in the Cloud, with projects running on IBM Bluemix and on Amazon AWS. The focus is very much to keep Cloud-specific functionality decoupled from the devonfw core. The engagement can choose between - and easily configure the use of - either CloudFoundry or Spring Cloud (alternatively, you can run devonfw in Docker containers in the Cloud as well. See elsewhere in the release notes). For more information
about how to configure devonfw for use in the cloud see: https://github.com/devonfw/devon/wiki/cookbook-dockerization[devonfw on Docker] and https://github.com/devonfw/devon/wiki/devon-in-bluemix[devonfw in IBM Bluemix]

[[release-notes-version-2.1.asciidoc_spring-data]]
=== Spring Data

The java server stack within devonfw, OASP4J,  is build on a very solid DDD architecture  which uses JPA for its data access layer. We now offer integration of Spring Data as an alternative or to be used in conjunction with JPA. Spring Data offers significant advantages over JPA through its query mechanism which allows the developer to specify complex queries in an easy way. Overall working with Spring Data should be quite more productive compared with JPA for the average or junior developer. And extra advantage is that Spring Data also allows - and comes with support for - the usage of NoSQL databases like MongoDB, Cassandra, DynamoDB etc. THis becomes especially critical in the Cloud where NoSQL databases typically offer better scalability than relational databases.
For more information see: https://github.com/devonfw/devon/wiki/cookbook-spring-data[Integrating Spring Data in OASP4J]

[[release-notes-version-2.1.asciidoc_videos-content-in-the-devonfw-guide]]
=== Videos content in the devonfw Guide

The devonfw Guide is the single, authoritative tutorial and reference (&quot;cookbook&quot;) for all things devonfw, targeted at the general developer working with the platform (there is another document for Architects).  It is clear and concise but because of the large scope and wide reach of devonfw, it comes with a hefty 370+ pages. For the impatient - and sometimes images do indeed say more than words - we&apos;ve added 17 videos to the Guide which significantly speed up getting started with the diverse aspects of devonfw.

For more information see: https://coconet.capgemini.com/sf/frs/do/listReleases/projects.apps2_devon/frs.videos[Video releases on TeamForge]

[[release-notes-version-2.1.asciidoc_containerisation-with-docker-and-the-production-line]]
=== Containerisation with Docker and the Production Line

Docker (see: https://www.docker.com/) containers wrap a piece of software in a complete filesystem that contains everything needed to run: code, runtime, system tools, system libraries &#x2013; anything that can be installed on a server. Docker containers resemble virtual machines but are far more resource efficient. Because of this, Docker and related technologies like Kubernetes are taking the Enterprise and Cloud by storm. We have certified and documented the usage of devonfw on Docker so we can now firmly state that &quot;devonfw is Docker&quot; ready. All the more so as the iCSD Production Line is now supporting devonfw as well. The Production Line is a Docker based set of methods and tools that make possible to develop custom software to our customers on time and with the expected quality. By having first-class support for devonfw on the Production Line, iCSD has got an unified, integral solution which covers all the phases involved on the application development cycle from requirements to testing and hand-off to the client.

See: https://github.com/devonfw/devon/wiki/cookbook-dockerization[devonfw on Docker] and https://github.com/devonfw/devon/wiki/devon-guide-production-line[devonfw on the Production Line]


[[release-notes-version-2.1.asciidoc_eclipse-neon]]
=== Eclipse Neon

devonfw comes with its own pre configured and enhanced Eclipse based IDE:  the Open Source &quot;OASP IDE&quot; and &quot;devonfw Distr&quot; which falls under Capgemini IP. We&apos;ve updated both versions to the latest stable version of Eclipse, Neon. From Balu onwards we support the IDE on Linux as well and we offer downloadable versions for both Windows and Linux.

See: https://github.com/devonfw/devon-guide/wiki/getting-started-the-devon-ide[The Devon IDE]

[[release-notes-version-2.1.asciidoc_default-java-8-with-java-7-compatibility]]
=== Default Java 8 with Java 7 compatibility

From version 2.1. &quot;Balu&quot; onwards, devonfw is using by default Java 8 for both the tool-chain as well as the integrated development environments. However, both the framework as well as the IDE and tool-set remain fully backward compatible with Java 7. We have added documentation to help configuring aspects of the framework to use Java 7 or to upgrade existing projects to Java 8. See: https://github.com/devonfw/devon/wiki/Compatibility-guide-for-Java7,-Java8-and-Tomcat7,-Tomcat8[Compatibility guide for Java7, Java8 and Tomcat7, Tomcat8]

[[release-notes-version-2.1.asciidoc_full-linux-support]]
=== Full Linux support

In order to fully support the move towards the Cloud, from version 2.1. &quot;Balu&quot; onwards, devonfw is fully supported on Linux. Linux is the de-facto standard for most Cloud providers. We currently only offer first-class support for Ubuntu 16.04 LTS onward but most aspects of devonfw should run without problems on other and older distributions as well.

[[release-notes-version-2.1.asciidoc_initial-atom-support]]
=== Initial ATOM support

Atom is a text editor that&apos;s modern, approachable, yet hackable to the core - a tool you can customize to do anything but also use productively without ever touching a config file. It is turning into a standard for modern web development. In devonfw 2.1 &quot;Balu&quot; we provide a script which installs automatically the most recent version of Atom in the devonfw distribution with a pre-configured set of essential plugins. See: https://github.com/oasp/oasp-atom-ide/wiki[OASP/devonfw Atom editor (&quot;IDE&quot;) settings &amp; packages]

[[release-notes-version-2.1.asciidoc_database-support]]
=== Database support

Through JPA (and now Spring Data as well) devonfw supports many databases. In Balu we&apos;ve extended this support to prepared configuration, extensive documentations and supporting examples for all major &quot;Enterprise&quot; DB servers. So it becomes even easier for engagements to start using these standard database options. Currently we provide this extended support for Oracle, Microsoft SQL Server, MySQL and PostgreSQL.
For more information see: https://github.com/devonfw/devon4j/wiki/guide-database-migration[OASP Database Migration Guide]

[[release-notes-version-2.1.asciidoc_file-upload-and-download]]
=== File upload and download

File up and download was supported in previous version of the framework, but as these operations are common but complex, we&apos;ve extended the base functionality and improved the available documentation so it becomes substantially easier to offer both File up- as well as download in devonfw based applications. See: https://github.com/devonfw/devon-guide/wiki/cookbook-File-Upload-and-Download[devonfw Guide Cookbook: File Upload and Download]

[[release-notes-version-2.1.asciidoc_internationalisation-i18n-improvements]]
=== Internationalisation (I18N) improvements

Likewise, existing basic Internationalisation (I18N) support has been significantly enhanced through an new devonfw module and extended to support Ext JS and Angular 2 apps as well. This means that both server as well as client side applications can be made easily to support multiple languages (&quot;locales&quot;), using industry standard tools and without touching programming code (essential when working with teams of translators). For more information see: https://github.com/devonfw/devon-guide/wiki/cookbook-i18n-module[The I18N (Internationalization) module] and https://github.com/devonfw/devon-guide/wiki/Client-GUI-Sencha-i18n[Client GUI Sencha i18n]

[[release-notes-version-2.1.asciidoc_asynchronous-http-support]]
=== Asynchronous HTTP support

Asynchronous HTTP is an important feature allowing so-called &quot;long polling&quot; HTTP Requests (for streaming applications, for example) or with requests sending large amounts of data. By making HTTP Requests asynchronous, devonfw server instances can better support these types of use-cases while offering far better performance. Documentation about how to include the new devonfw module implementing this feature can be found at: https://github.com/devonfw/devon-guide/wiki/cookbook-async-module[The devonfw async module]

[[release-notes-version-2.1.asciidoc_security-and-license-guarantees]]
=== Security and License guarantees

In devonfw security comes first. The components of the framework are designed and implemented according to the recommendations and guidelines as specified by OWASP in order to confront the top 10 security vulnerabilities.

From version 2.1 &quot;Balu&quot; onward we certify that devonfw has been scanned by software from &quot;Black Duck&quot;. This verifies that devonfw is based on 100% Open Source Software (non Copyleft) and demonstrates that at moment of release there are no known, critical security flaws. Less critical issues are clearly documented.

[[release-notes-version-2.1.asciidoc_documentation-improvements]]
=== Documentation improvements

Apart from the previously mentioned additions and improvements to diverse aspects of the devonfw documentation, principally the devonfw Guide,  there are a number of other important changes. We&apos;ve incorporated the Devon Modules Developer&#xB4;s Guide which describes how to extend devonfw with its Spring-based module system. Furthermore we&apos;ve significantly improved the Guide to the usage of web services. We&apos;ve included a Compatibility Guide which details a series of considerations related with different version of the framework as well as Java 7 vs 8. And finally, we&apos;ve extended the F.A.Q. to provide the users with direct answers to common, Frequently Asked Questions.

[[release-notes-version-2.1.asciidoc_contributors]]
=== Contributors

Many thanks to adrianbielewicz, aferre777, amarinso, arenstedt, azzigeorge, cbeldacap, cmammado, crisjdiaz, csiwiak, Dalgar, drhoet, Drophoff, dumbNickname, EastWindShak, fawinter, fbougeno, fkreis, GawandeKunal, henning-cg, hennk, hohwille, ivanderk, jarek-jpa, jart, jensbartelheimer, jhcore, jkokoszk, julianmetzler, kalmuczakm, kiran-vadla, kowalj, lgoerlach, ManjiriBirajdar, MarcoRose, maybeec, mmatczak, nelooo, oelsabba, pablo-parra, patrhel, pawelkorzeniowski, PriyankaBelorkar, RobertoGM, sekaiser, sesslinger, SimonHuber, sjimenez77, sobkowiak, sroeger, ssarmokadam, subashbasnet, szendo, tbialecki, thoptr, tsowada, znazir and anyone who we may have forgotten to add!


:leveloffset: 3

:leveloffset: 3</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>&#x2190;&#xA0;Previous:&#xA0;<a href="master-mrchecker.asciidoc_who-is-mrchecker.html">Who Is MrChecker</a>&#xA0;| &#x2191;&#xA0;Up:&#xA0;<a href="master-mrchecker.asciidoc.html">MrChecker - devon testing tool</a>&#xA0;| &#x2302;&#xA0;Home:&#xA0;<a href="master.html">devonfw guide</a></p>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_introduction.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_introduction.html#introduction-why-should-i-use-devonfw.asciidoc">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_further-information.html">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devon4j.asciidoc_architecture.html">Architecture</a></p>
</li>
<li>
<p><a href="/website/pages/resources/resources.html">Resources</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-ide-support.asciidoc.html#LICENSE.asciidoc">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script type="module">
      import { UtilsModule } from '/website/shared/utils.js';
      import { HeaderModule } from '/website/components/header/header.js';

      let searchData = { index: null, documents: null };
      UtilsModule.loadIndex(searchData);

      $(window).on('load', function() {
        const queryFun = () => {
          HeaderModule.queryFunction(searchData);
        };

        HeaderModule.searchOnClick(queryFun);
      });
    </script>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<div class="footnote"><sub>

Last updated 2020-08-04 15:36:05 UTC
</sub></div>


<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>

</body></html>